{"version":3,"file":"static/js/112.13d268e7.chunk.js","mappings":"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","sources":["pages/auth/jwt/login.js","components/hook-form/form-provider.js","sections/auth/jwt/jwt-login-view.js","sections/auth/jwt/jwt-register-view.js"],"sourcesContent":["import { Helmet } from 'react-helmet-async';\n// sections\nimport { JwtLoginView } from 'src/sections/auth/jwt';\n\n// ----------------------------------------------------------------------\n\nexport default function LoginPage() {\n  return (\n    <>\n      <Helmet>\n        <title> Jwt: Login</title>\n      </Helmet>\n\n      <JwtLoginView />\n    </>\n  );\n}\n","import PropTypes from 'prop-types';\nimport { FormProvider as Form } from 'react-hook-form';\n\n// ----------------------------------------------------------------------\n\nexport default function FormProvider({ children, onSubmit, methods }) {\n  return (\n    <Form {...methods}>\n      <form onSubmit={onSubmit}>{children}</form>\n    </Form>\n  );\n}\n\nFormProvider.propTypes = {\n  children: PropTypes.node,\n  methods: PropTypes.object,\n  onSubmit: PropTypes.func,\n};\n","import { useState, useEffect } from 'react';\n// @mui\nimport LoadingButton from '@mui/lab/LoadingButton';\nimport Alert from '@mui/material/Alert';\nimport Stack from '@mui/material/Stack';\nimport IconButton from '@mui/material/IconButton';\nimport Typography from '@mui/material/Typography';\nimport InputAdornment from '@mui/material/InputAdornment';\n// routes\nimport { paths } from 'src/routes/paths';\nimport { RouterLink } from 'src/routes/components';\nimport { useSearchParams, useRouter } from 'src/routes/hook';\n// config\nimport { PATH_AFTER_LOGIN } from 'src/config-global';\n// hooks\nimport { useBoolean } from 'src/hooks/use-boolean';\n// auth\nimport { useAuthContext } from 'src/auth/hooks';\n// components\nimport Iconify from 'src/components/iconify';\nimport FormProvider from 'src/components/hook-form';\nimport { TextField } from '@mui/material';\nimport axios, { endpoints } from 'src/utils/axios';\nimport { decryptToken, encryptToken } from 'src/utils/common';\nimport { constants } from 'src/utils/constant';\nimport { useSnackbar } from 'src/components/snackbar'\nimport { jwtDecode } from 'src/auth/context/jwt/utils';\n\n// ----------------------------------------------------------------------\n\nexport default function JwtLoginView() {\n  const { login } = useAuthContext();\n  const router = useRouter();\n\n  const [errorMsg, setErrorMsg] = useState('');\n  const searchParams = useSearchParams();\n\n\n  // State for login state\n  const [loginState, setLoginState] = useState({\n    email: 'adminuser@test.in',\n    password: 'defaultPassword',\n    emailErr: false,\n    passErr: false\n  });\n  const { enqueueSnackbar } = useSnackbar();\n\n  const [isSubmitting, setIsSubmitting] = useState(false);\n\n  const password = useBoolean();\n\n  const handleLogin = async () => {\n\n    const re = /^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,}$/\n    if (loginState.email.length === 0 || !re.test(loginState.email)) {\n      setLoginState((prev) => ({ ...prev, emailErr: true }));\n      return;\n    }\n    setLoginState((prev) => ({ ...prev, emailErr: false }));\n\n    if (loginState.password.length === 0) {\n      setLoginState((prev) => ({ ...prev, passErr: true }));\n      return;\n    };\n\n    setLoginState((prev) => ({ ...prev, passErr: false }));\n\n    try {\n      setIsSubmitting(true);\n\n\n      // const apiResponse = await axios.post(endpoints.auth.login, {\n      //   email: loginState.email,\n      //   password: loginState.password,\n      // });\n      setIsSubmitting(false);\n      await login?.(loginState.email, loginState.password);\n\n      // if (apiResponse) {\n\n\n\n      // SET TOKEN\n      // const encryptedToken = encryptToken(apiResponse.data.data.token);\n      // localStorage.setItem(constants.keyUserToken, encryptedToken);\n\n      // SET AXIOS HEADER\n      // axios.defaults.headers.common.Authorization = `Bearer ${apiResponse.data.data.token}`;\n      // setIsSubmitting(false);\n\n      // Go TO DASHBOARD\n      // router.push('/dashboard');\n\n      // };\n\n    } catch (error) {\n      setIsSubmitting(false);\n      enqueueSnackbar(error.error, { variant: \"error\" })\n    }\n  };\n\n  useEffect(() => {\n    const token = localStorage.getItem(constants.keyUserToken);\n    if (token) {\n      const decrypted = decryptToken(token);\n\n      if (decrypted) {\n\n        const decodedToken = jwtDecode(decrypted);\n        const currentTimestamp = Math.floor(Date.now() / 1000);\n\n        if (decodedToken.exp && decodedToken.exp < currentTimestamp) {\n\n          // Token is expired, clear token and redirect to login page\n          localStorage.clear();\n\n          // Display a message\n          alert(\"Your session has expired. Please log in again.\");\n\n          // Redirect to '/login';\n          window.location.href = '/';\n\n        } else {\n          router.push('/dashboard');\n        }\n      }\n    }\n\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n\n  const renderHead = (\n    <Stack spacing={2} sx={{ mb: 5 }}>\n      <Typography variant=\"h4\">Sign in to Accounting Software</Typography>\n\n      {/* <Stack direction=\"row\" spacing={0.5}>\n        <Typography variant=\"body2\">New user?</Typography>\n\n        <Link component={RouterLink} href={paths.auth.jwt.register} variant=\"subtitle2\">\n          Create an account\n        </Link>\n      </Stack> */}\n    </Stack>\n  );\n\n  const renderForm = (\n    <Stack spacing={2.5}>\n      {!!errorMsg && <Alert severity=\"error\">{errorMsg}</Alert>}\n\n      <TextField\n        name=\"email\"\n        label=\"Email address\"\n        value={loginState.email}\n        onChange={(e) => {\n          setLoginState((prev) => ({ ...prev, email: e.target.value, emailErr: false }));\n        }}\n        error={loginState.emailErr}\n        helperText={loginState.emailErr ? 'Please enter valid email!' : null}\n      />\n\n      <TextField\n        name=\"password\"\n        label=\"Password\"\n        type={password.value ? 'text' : 'password'}\n        value={loginState.password}\n        onChange={(e) => {\n          setLoginState((prev) => ({ ...prev, password: e.target.value, passErr: false }))\n        }}\n        error={loginState.passErr}\n        helperText={loginState.passErr ? 'Please enter valid password!' : null}\n\n        InputProps={{\n          endAdornment: (\n            <InputAdornment position=\"end\">\n              <IconButton onClick={password.onToggle} edge=\"end\">\n                <Iconify icon={password.value ? 'solar:eye-bold' : 'solar:eye-closed-bold'} />\n              </IconButton>\n            </InputAdornment>\n          ),\n        }}\n      />\n\n      <LoadingButton\n        fullWidth\n        color=\"inherit\"\n        size=\"large\"\n        variant=\"contained\"\n        loading={isSubmitting}\n        onClick={handleLogin}\n      >\n        Login\n      </LoadingButton>\n    </Stack>\n  );\n\n  return (\n    <FormProvider>\n      {renderHead}\n\n      {/* <Alert severity=\"info\" sx={{ mb: 3 }}>\n        Use email : <strong>demo@minimals.cc</strong> / password :<strong> demo1234</strong>\n      </Alert> */}\n\n      {renderForm}\n    </FormProvider>\n  );\n}\n","import * as Yup from 'yup';\nimport { useForm } from 'react-hook-form';\nimport { useEffect, useState } from 'react';\nimport { yupResolver } from '@hookform/resolvers/yup';\n// @mui\nimport LoadingButton from '@mui/lab/LoadingButton';\nimport Link from '@mui/material/Link';\nimport Alert from '@mui/material/Alert';\nimport Stack from '@mui/material/Stack';\nimport IconButton from '@mui/material/IconButton';\nimport Typography from '@mui/material/Typography';\nimport InputAdornment from '@mui/material/InputAdornment';\n// hooks\nimport { useBoolean } from 'src/hooks/use-boolean';\n// routes\nimport { paths } from 'src/routes/paths';\nimport { RouterLink } from 'src/routes/components';\nimport { useSearchParams, useRouter } from 'src/routes/hook';\n// config\nimport { PATH_AFTER_LOGIN } from 'src/config-global';\n// auth\nimport { useAuthContext } from 'src/auth/hooks';\n// components\nimport Iconify from 'src/components/iconify';\nimport FormProvider, { RHFTextField } from 'src/components/hook-form';\nimport { Box, Container, TextField } from '@mui/material';\nimport axios, { endpoints } from 'src/utils/axios';\n\n// ----------------------------------------------------------------------\n\nexport default function JwtRegisterView() {\n  const { register } = useAuthContext();\n\n  const router = useRouter();\n\n  const [errorMsg, setErrorMsg] = useState('');\n  const [isSubmitting, setIsSubmitting] = useState(false);\n\n  const searchParams = useSearchParams();\n\n\n  const nameValue = searchParams.get('name');\n  const emailValue = searchParams.get('email');\n  const uuidValue = searchParams.get('uuid');\n\n  // Split the full name into an array of first and last name\n  const nameParts = nameValue.split(\" \");\n\n  const password = useBoolean();\n\n  // const RegisterSchema = Yup.object().shape({\n  //   firstName: Yup.string().required('First name required'),\n  //   lastName: Yup.string().required('Last name required'),\n  //   email: Yup.string().required('Email is required').email('Email must be a valid email address'),\n  //   password: Yup.string().required('Password is required'),\n  // });\n\n\n  const defaultValues = {\n    firstName: nameParts[0],\n    lastName: nameParts[nameParts.length - 1],\n    email: emailValue,\n    password: '',\n    confirmPassword: ''\n  };\n\n  const [user, setUser] = useState(defaultValues)\n\n  const handleChange = (event) => {\n    const { name, value } = event.target;\n    setUser((prevUser) => ({\n      ...prevUser,\n      [name]: value,\n    }));\n  };\n\n  const handleRegister = () => {\n    setIsSubmitting(true);\n    if (user.firstName === '' || user.lastName === '' || user.email === '' || user.password === '' || user.confirmPassword === '') {\n      setErrorMsg('All fields are required');\n      setIsSubmitting(false);\n      return;\n    };\n\n    if (user.password !== user.confirmPassword) {\n      setErrorMsg('Password does not match');\n      setIsSubmitting(false);\n      return;\n    };\n\n\n    axios.post(endpoints.auth.passwordTable.details, { email: user.email }).then((response) => {\n      if (response.data.data) {\n        const { uuidCode, expiryDate } = response.data.data;\n        const expiryDateUTC = new Date(expiryDate); // Convert UTC string to Date object\n        const currentDate = new Date(); // Current date\n\n        if (uuidCode === uuidValue && expiryDateUTC > currentDate) {\n          console.log('All Right you can login now');\n          // Add your registration logic here\n          register?.(user.email, user.password, user.firstName, user.lastName)\n            .then(() => {\n              router.push(PATH_AFTER_LOGIN);\n            })\n            .catch((error) => {\n              console.error(error);\n              setErrorMsg(typeof error === 'string' ? error : error.message);\n            })\n            .finally(() => {\n              setIsSubmitting(false);\n            });\n\n        } else {\n          setErrorMsg('The link is expired');\n          setIsSubmitting(false);\n        }\n      } else {\n        setErrorMsg('The link is expired');\n        setIsSubmitting(false);\n      }\n    }).catch((error) => {\n      console.error(error);\n      setErrorMsg(typeof error === 'string' ? error : error.message);\n      setIsSubmitting(false);\n    })\n\n\n\n    // register?.(user.email, user.password, user.firstName, user.lastName, uuid)\n    //   .then(() => {\n    //     router.push(PATH_AFTER_LOGIN);\n    //   })\n    //   .catch((error) => {\n    //     console.error(error);\n    //     setErrorMsg(typeof error === 'string' ? error : error.message);\n    //   })\n    //   .finally(() => {\n    //     setIsSubmitting(false);\n    //   });\n  };\n\n\n  const renderForm = (\n    <div>\n      {!!errorMsg && <Alert severity=\"error\">{errorMsg}</Alert>}\n\n      {/* <Stack direction={{ xs: 'column', sm: 'row' }} spacing={2}> */}\n      <TextField\n        name=\"firstName\"\n        label=\"First name\"\n        fullWidth\n        value={user.firstName}\n        onChange={handleChange}\n        sx={{ mt: 4, backgroundColor: 'white' }}\n        required\n      />\n      <TextField\n        name=\"lastName\"\n        label=\"Last name\"\n        fullWidth\n        value={user.lastName}\n        onChange={handleChange}\n        sx={{ mt: 4, backgroundColor: 'white' }}\n        required\n      />\n      <TextField\n        name=\"email\"\n        label=\"Email address\"\n        fullWidth\n        value={user.email}\n        onChange={handleChange}\n        sx={{ mt: 4, backgroundColor: 'white' }}\n        required\n      />\n      <TextField\n        name=\"password\"\n        label=\"Password\"\n        fullWidth\n        type='password'\n        value={user.password}\n        onChange={handleChange}\n        sx={{ mt: 4, backgroundColor: 'white' }}\n        required\n      />\n      <TextField\n        name=\"confirmPassword\"\n        label=\"Confirm Password\"\n        fullWidth\n        value={user.confirmPassword}\n        onChange={handleChange}\n        required\n        type={password.value ? 'text' : 'password'}\n        InputProps={{\n          endAdornment: (\n            <InputAdornment position=\"end\">\n              <IconButton onClick={password.onToggle} edge=\"end\">\n                <Iconify icon={password.value ? 'solar:eye-bold' : 'solar:eye-closed-bold'} />\n              </IconButton>\n            </InputAdornment>\n          ),\n        }}\n        sx={{ mt: 4, backgroundColor: 'white' }}\n      />\n      <LoadingButton\n        fullWidth\n        color=\"primary\"\n        sx={{ mt: 4, borderRadius: \"18px\" }}\n        size=\"large\"\n        variant=\"contained\"\n        disabled={\n          user.firstName === '' ||\n          user.lastName === '' ||\n          user.email === '' ||\n          user.password === '' ||\n          user.confirmPassword === ''\n        }\n        loading={isSubmitting}\n        onClick={handleRegister}\n      >\n        SIGN UP NOW\n      </LoadingButton>\n      <Stack direction=\"row\" spacing={0.5} justifyContent='center'>\n        <Typography variant=\"body2\"> Already have an account? </Typography>\n\n        <Link href={paths.auth.jwt.login} component={RouterLink} variant=\"subtitle2\" color='#074DFF'>\n          SIGN IN\n        </Link>\n      </Stack>\n    </div >\n  );\n\n  return (\n    <div style={{ backgroundColor: \"#F3F8FB\", display: 'flex', alignItems: 'center', flexDirection: 'column', width: '100vw', height: '100vh', gap: '30px' }}>\n      {/* {renderHead} */}\n\n      <div style={{ width: '600px', }}>\n\n        <div style={{ display: 'flex', justifyContent: 'center', marginBottom: '30px' }}>\n\n          <Box\n            component=\"img\"\n            src=\"/logo/logo_single.svg\"\n            sx={{ width: 120, height: 120, display: 'flex', justifyContent: 'center' }}\n          />\n        </div>\n\n        {renderForm}\n      </div>\n\n      {/* {renderTerms} */}\n\n    </div>\n  );\n}\n"],"names":["LoginPage","_jsxs","_Fragment","children","_jsx","Helmet","JwtLoginView","FormProvider","_ref","onSubmit","methods","Form","_objectSpread","login","useAuthContext","router","useRouter","_useState","useState","_useState2","_slicedToArray","errorMsg","_useState3","useSearchParams","email","password","emailErr","passErr","_useState4","loginState","setLoginState","enqueueSnackbar","useSnackbar","_useState5","_useState6","isSubmitting","setIsSubmitting","useBoolean","handleLogin","_asyncToGenerator","_regeneratorRuntime","mark","_callee","re","wrap","_context","prev","next","length","test","abrupt","t0","error","variant","stop","apply","arguments","useEffect","token","localStorage","getItem","constants","decrypted","decryptToken","decodedToken","jwtDecode","currentTimestamp","Math","floor","Date","now","exp","clear","alert","window","location","href","push","renderHead","Stack","spacing","sx","mb","Typography","renderForm","Alert","severity","TextField","name","label","value","onChange","e","target","helperText","type","InputProps","endAdornment","InputAdornment","position","IconButton","onClick","onToggle","edge","Iconify","icon","LoadingButton","fullWidth","color","size","loading","JwtRegisterView","register","setErrorMsg","searchParams","nameValue","get","emailValue","uuidValue","nameParts","split","defaultValues","firstName","lastName","confirmPassword","user","setUser","handleChange","event","_event$target","prevUser","_defineProperty","mt","backgroundColor","required","borderRadius","disabled","axios","endpoints","then","response","data","_response$data$data","uuidCode","expiryDate","expiryDateUTC","currentDate","console","log","PATH_AFTER_LOGIN","catch","message","finally","direction","justifyContent","Link","paths","component","RouterLink","style","display","alignItems","flexDirection","width","height","gap","marginBottom","Box","src"],"sourceRoot":""}