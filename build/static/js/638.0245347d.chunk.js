(self.webpackChunk_accounting_billing_stacklab=self.webpackChunk_accounting_billing_stacklab||[]).push([[638],{32869:function(e,t,n){"use strict";n.d(t,{Ds:function(){return r.Ds}});var r=n(58518);n(58764)},65638:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return re}});var r=n(6907),a=n(4942),i=n(74165),o=n(15861),l=n(1413),s=n(29439),c=n(72791),u=n(64554),d=n(89164),p=n(4567),h=n(57088),f=n(30439),x=n(71715),m=n(82626),Z=n(48550),y=n(63466),v=n(68096),b=n(50168),g=n(58406),j=n(73590),S=n(61889),k=n(47071),C=n(85523),P=n(89891),D=n(5574),I=n(65661),E=n(39157),M=n(97123),T=n(26759),A=n(42419),w=n(5403),$=n(18406),Y=n(99615),N=n(52073),R=n(32869),O=n(43513),L=n(71652),U=n(23937),_=n(24750),B=n(97892),H=n.n(B),F=n(83027),W=n.n(F),q=n(8976),z=n(80184);H().extend(W());var X={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"70%",bgcolor:"background.paper",borderRadius:"10px",boxShadow:24,p:2,backgroundColor:$.$_.modalbackground,height:"auto",overflow:"auto"},G={price:"",type:"",date:null,category:"",paymentStatus:"PAID",paymentMode:"",bankId:""},Q={price:!1,date:!1,type:!1,category:!1,paymentStatus:!1,paymentMode:!1,bankId:!1},K={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"400px",bgcolor:$.$_.modalbackground,borderRadius:"10px",height:"auto",boxShadow:24,p:2},J=["ELECTRICITY BILL","REPAIR AND MAINTAINANCE","INTERNET BILLS","RAW MATERIAL","RENT","PRINTING","EMPLOYEE SALARIES"],V=["SALE OF OLD NEWSPAPERS","SALE OF CARTOON BOXES","RENTAL INCOME","SALE OF UNUSED BUSINESS EQUIPMENT"],ee=["CASH","CARD","UPI","CHEQUE"],te={id:"",type:"",balance:0,amountToPay:0,paymentDate:H()(new Date),paymentMode:"",bank:""};function ne(){var e,t,n=(0,q.E)().user,B=(0,c.useState)([]),F=(0,s.Z)(B,2),W=F[0],ne=F[1],re=(0,c.useState)(H()("2022-04-17")),ae=(0,s.Z)(re,2),ie=(ae[0],ae[1],H().utc("2024-01-14T18:30:00.000+00:00").local(),(0,h.K$)()),oe=(0,R.Ds)().enqueueSnackbar,le=(0,c.useState)(!1),se=(0,s.Z)(le,2),ce=se[0],ue=se[1],de=(0,c.useState)(!1),pe=(0,s.Z)(de,2),he=pe[0],fe=pe[1],xe=(0,c.useState)(te),me=(0,s.Z)(xe,2),Ze=me[0],ye=me[1],ve=(0,c.useState)(!1),be=(0,s.Z)(ve,2),ge=be[0],je=be[1],Se=(0,c.useState)([]),ke=(0,s.Z)(Se,2),Ce=ke[0],Pe=ke[1],De=(0,c.useState)([]),Ie=(0,s.Z)(De,2),Ee=Ie[0],Me=Ie[1],Te=(0,c.useState)([]),Ae=(0,s.Z)(Te,2),we=Ae[0],$e=Ae[1],Ye=(0,c.useState)(G),Ne=(0,s.Z)(Ye,2),Re=Ne[0],Oe=Ne[1],Le=(0,c.useState)(Q),Ue=(0,s.Z)(Le,2),_e=Ue[0],Be=Ue[1],He=(0,c.useState)(!1),Fe=(0,s.Z)(He,2),We=Fe[0],qe=Fe[1],ze=(0,c.useState)("ALL"),Xe=(0,s.Z)(ze,2),Ge=Xe[0],Qe=Xe[1],Ke=(0,c.useState)({}),Je=(0,s.Z)(Ke,2),Ve=Je[0],et=Je[1],tt=(0,c.useState)(""),nt=(0,s.Z)(tt,2),rt=nt[0],at=nt[1],it=(0,c.useState)(null),ot=(0,s.Z)(it,2),lt=ot[0],st=ot[1],ct=Boolean(lt),ut=(0,c.useState)(!1),dt=(0,s.Z)(ut,2),pt=dt[0],ht=dt[1],ft=function(){return ue(!1)},xt=function(){var e=(0,o.Z)((0,i.Z)().mark((function e(){var t,n,r;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=localStorage.getItem(N._.keyUserToken),n=(0,$.sw)(t),e.next=5,Y.ZP.post(Y.Hv.expenditure.list,{},{headers:{Authorization:"Bearer ".concat(n)}});case 5:(r=e.sent)&&(je(!1),Pe(r.data.data),Me(r.data.data),ne(r.data.data)),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),oe("Failed to fetch dataArray!",{variant:"error"}),je(!1);case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}(),mt=function(){var e=(0,o.Z)((0,i.Z)().mark((function e(){var t,n,r;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=localStorage.getItem(N._.keyUserToken),n=(0,$.sw)(t),e.next=5,Y.ZP.post(Y.Hv.bank.list,{},{headers:{Authorization:"Bearer ".concat(n)}});case 5:(r=e.sent)&&$e(r.data.data),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),oe("Failed to fetch bank accounts!",{variant:"error"});case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}();(0,c.useEffect)((function(){je(!0),xt(),mt()}),[]);var Zt=(0,c.useState)(H()().startOf("month")),yt=(0,s.Z)(Zt,2),vt=yt[0],bt=yt[1],gt=(0,c.useState)(H()().endOf("month")),jt=(0,s.Z)(gt,2),St=jt[0],kt=jt[1];(0,c.useEffect)((function(){if(vt&&St){var e=W.filter((function(e){var t=H()(e.createdAt);return console.log(vt,St),t.isBetween(vt,St,null,"[]")}));console.log({filteredSalesFromDates:e}),Pe(e)}else Pe(W)}),[vt,St]);var Ct=function(e){var t=e.target,n=t.name,r=t.value;Oe((function(e){return(0,l.Z)((0,l.Z)({},e),{},(0,a.Z)({},n,r))})),Be((function(e){return(0,l.Z)((0,l.Z)({},e),{},(0,a.Z)({},n,!1))}))},Pt=function(){var e=(0,o.Z)((0,i.Z)().mark((function e(){var t,n,r,a;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t={},Re.price){e.next=4;break}return Be((function(e){return(0,l.Z)((0,l.Z)({},e),{},{price:!0})})),e.abrupt("return");case 4:if(Be((function(e){return(0,l.Z)((0,l.Z)({},e),{},{price:!1})})),Re.date){e.next=8;break}return Be((function(e){return(0,l.Z)((0,l.Z)({},e),{},{date:!0})})),e.abrupt("return");case 8:if(Be((function(e){return(0,l.Z)((0,l.Z)({},e),{},{date:!1})})),Re.type){e.next=12;break}return Be((function(e){return(0,l.Z)((0,l.Z)({},e),{},{type:!0})})),e.abrupt("return");case 12:if(Be((function(e){return(0,l.Z)((0,l.Z)({},e),{},{type:!1})})),Re.category){e.next=16;break}return Be((function(e){return(0,l.Z)((0,l.Z)({},e),{},{category:!0})})),e.abrupt("return");case 16:if(Be((function(e){return(0,l.Z)((0,l.Z)({},e),{},{category:!1})})),"PAID"!==Re.paymentStatus){e.next=27;break}if(Re.paymentMode){e.next=21;break}return Be((function(e){return(0,l.Z)((0,l.Z)({},e),{},{paymentMode:!0})})),e.abrupt("return");case 21:if(Be((function(e){return(0,l.Z)((0,l.Z)({},e),{},{paymentMode:!1})})),"CASH"===Re.paymentMode||Re.bankId){e.next=25;break}return Be((function(e){return(0,l.Z)((0,l.Z)({},e),{},{bankId:!0})})),e.abrupt("return");case 25:Be((function(e){return(0,l.Z)((0,l.Z)({},e),{},{bankId:!1})}));case 27:n=Re.date.format("YYYY/MM/DD"),t.price=parseFloat(Re.price),t.date=n,t.category=Re.category,t.paymentStatus=Re.paymentStatus,t.type=Re.type,"PAID"===Re.paymentStatus&&(t.paymentMode=Re.paymentMode,Re.bankId&&(t.bankId=Re.bankId)),r=localStorage.getItem(N._.keyUserToken),a=(0,$.sw)(r),Y.ZP.post(Y.Hv.expenditure.add,t,{headers:{Authorization:"Bearer ".concat(a)}}).then((function(e){oe("Expense created successfully!",{variant:"success"}),xt(),ft(),Be(Q),Oe(G)})).catch((function(e){oe(e.error||e.msg,{variant:"error"})}));case 38:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Dt=function(){var e=(0,o.Z)((0,i.Z)().mark((function e(){var t,n,r,a;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t={},Re.date){e.next=4;break}return Be((function(e){return(0,l.Z)((0,l.Z)({},e),{},{date:!0})})),e.abrupt("return");case 4:if(Be((function(e){return(0,l.Z)((0,l.Z)({},e),{},{date:!1})})),Re.category){e.next=8;break}return Be((function(e){return(0,l.Z)((0,l.Z)({},e),{},{category:!0})})),e.abrupt("return");case 8:if(Be((function(e){return(0,l.Z)((0,l.Z)({},e),{},{category:!1})})),Re.type){e.next=12;break}return Be((function(e){return(0,l.Z)((0,l.Z)({},e),{},{category:!0})})),e.abrupt("return");case 12:Be((function(e){return(0,l.Z)((0,l.Z)({},e),{},{category:!1})})),n=Re.date.format("YYYY/MM/DD"),t.date=n,t.type=Re.type,t.category=Re.category,t.id=Re.id,r=localStorage.getItem(N._.keyUserToken),a=(0,$.sw)(r),Y.ZP.post(Y.Hv.expenditure.update,Re,{headers:{Authorization:"Bearer ".concat(a)}}).then((function(e){oe("Expenditure updated successfully!",{variant:"success"}),ft(),Be(Q),Oe(G),xt()})).catch((function(e){oe(e.error||e.msg,{variant:"error"})}));case 21:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),It=[{name:"Type",selector:function(e){return e.type},sortable:"true"},{name:"Category",selector:function(e){return e.category},sortable:"true",width:"250px"},{name:"Amount",selector:function(e){return e.price},sortable:"true",width:"150px"},{name:"Payment Mode",selector:function(e){return 0===e.payments.length?"-":e.payments[e.payments.length-1].paymentID.paymentMode},sortable:!0,width:"150px"},{name:"Payment Status",selector:function(e){return e.paymentStatus},sortable:"true",center:"true",width:"150px"},{name:"Date",selector:function(e){return new Date(e.date).toLocaleDateString("en-GB",{day:"2-digit",month:"long",year:"numeric"})},sortable:"true",width:"150px"},{name:"Actions",width:"20%",cell:function(e){var t,r;return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(f.Z,{disabled:!(null!==n&&void 0!==n&&null!==(t=n.permissions)&&void 0!==t&&null!==(r=t.expenditure)&&void 0!==r&&r.u),onClick:function(t){st(t.currentTarget),et(e)},style:{color:$.$_.actionButton},variant:"outlined",endIcon:(0,z.jsx)(T.Z,{}),children:"Action"}),(0,z.jsxs)(x.Z,{id:"basic-menu",anchorEl:lt,open:ct,onClose:function(){st(null),et({})},MenuListProps:{"aria-labelledby":"basic-button"},children:[(0,z.jsx)(m.Z,{onClick:function(){return function(){qe(!0),st(null);var e={id:Ve._id,price:Ve.price,date:H()(Ve.date),type:Ve.type,category:Ve.category};Oe(e),ue(!0)}()},children:"Edit Details"}),(0,z.jsx)(m.Z,{onClick:function(){return Oe((function(e){return(0,l.Z)((0,l.Z)({},e),{},{id:Ve._id})})),ht(!0),void st(null)},children:"Delete"}),Ve.remainingAmount>0&&(0,z.jsx)(m.Z,{onClick:function(){st(null),fe(!0),ye((function(e){return(0,l.Z)((0,l.Z)({},e),{},{type:Ve.type,balance:Ve.remainingAmount,id:Ve._id})})),et({})},children:"Record Payment"})]})]})}}],Et=Ce.filter((function(e){var t;return null===e||void 0===e||null===(t=e.category)||void 0===t?void 0:t.toLowerCase().includes(null===rt||void 0===rt?void 0:rt.toLowerCase())}));return(0,z.jsxs)(d.Z,{maxWidth:!ie.themeStretch&&"xl",children:[(0,z.jsx)(r.ql,{children:(0,z.jsx)("title",{children:" Dashboard : Expense / Income"})}),(0,z.jsx)(p.Z,{variant:"h4",children:" Expense/Income "}),(0,z.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginTop:"20px"},children:[(0,z.jsxs)("div",{style:{display:"flex",flexDirection:"row",alignItems:"center",gap:"10px"},children:[(0,z.jsx)(Z.Z,{placeholder:"Search",size:"small",value:rt,onChange:function(e){return at(e.target.value)},InputProps:{startAdornment:(0,z.jsx)(y.Z,{position:"start",children:(0,z.jsx)(w.Z,{})})}}),(0,z.jsxs)(v.Z,{size:"small",sx:{width:"230px"},children:[(0,z.jsx)(b.Z,{id:"demo-simple-select-label",children:"Select Category"}),(0,z.jsxs)(g.Z,{labelId:"demo-simple-select-label",id:"demo-simple-select",value:Ge,label:"Select Category",onChange:function(e){je(!0),"INCOME"===e.target.value?Pe(Ee.filter((function(e){return"INCOME"===e.type}))):"EXPENSE"===e.target.value?Pe(Ee.filter((function(e){return"EXPENSE"===e.type}))):Pe(Ee),Qe(e.target.value),je(!1)},children:[(0,z.jsx)(m.Z,{value:"ALL",children:"ALL"}),(0,z.jsx)(m.Z,{value:"EXPENSE",children:"EXPENSE"}),(0,z.jsx)(m.Z,{value:"INCOME",children:"INCOME"})]})]}),(0,z.jsx)("div",{children:(0,z.jsx)(L._,{dateAdapter:_.y,children:(0,z.jsxs)(u.Z,{sx:{display:"flex",flexDirection:"row",gap:"10px",alignItems:"center"},children:[(0,z.jsx)(U.M,{label:"From",format:"DD/MM/YYYY",value:vt,slotProps:{textField:{size:"small"}},onChange:function(e){bt(e)},renderInput:function(e){return(0,z.jsx)(Z.Z,(0,l.Z)({},e))}}),(0,z.jsx)(p.Z,{children:"-"}),(0,z.jsx)(U.M,{label:"To",format:"DD/MM/YYYY",value:St,slotProps:{textField:{size:"small"}},onChange:function(e){kt(e)},renderInput:function(e){return(0,z.jsx)(Z.Z,(0,l.Z)({},e))}})]})})})]}),(null===n||void 0===n||null===(e=n.permissions)||void 0===e||null===(t=e.expenditure)||void 0===t?void 0:t.u)&&(0,z.jsx)(f.Z,{startIcon:(0,z.jsx)(A.Z,{}),variant:"contained",color:"primary",onClick:function(){Oe((function(e){return(0,l.Z)((0,l.Z)({},e),{},{date:H()(new Date)})})),ue(!0),qe(!1)},children:"ADD ENTRY"})]}),(0,z.jsx)(j.Z,{open:ce,"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:(0,z.jsxs)(u.Z,{sx:X,children:[(0,z.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"10px"},children:[(0,z.jsx)(p.Z,{id:"modal-modal-title",variant:"h4",component:"h2",children:"Basic Details"}),(0,z.jsx)("div",{style:{padding:"10px",backgroundColor:"white",borderRadius:"10px"},children:(0,z.jsxs)(S.ZP,{container:!0,spacing:2,children:[(0,z.jsx)(S.ZP,{item:!0,xs:6,children:(0,z.jsx)(Z.Z,{label:"Amount in rupees",name:"price",type:"number",value:Re.price,disabled:We,onBlur:function(){parseFloat(Re.price)<=0&&(oe("Expense should be greater than 0!",{variant:"error"}),Oe((function(e){return(0,l.Z)((0,l.Z)({},e),{},{price:1})})))},onChange:Ct,error:_e.price,helperText:_e.price?"Please enter expense in rupees":null,fullWidth:!0,required:!0})}),(0,z.jsx)(S.ZP,{item:!0,xs:6,children:(0,z.jsx)(L._,{dateAdapter:_.y,children:(0,z.jsx)(U.M,{label:"Date",value:Re.date,format:"DD/MM/YYYY",onChange:function(e){Oe((function(t){return(0,l.Z)((0,l.Z)({},t),{},{date:e})})),Be((function(e){return(0,l.Z)((0,l.Z)({},e),{},{date:!1})}))},slotProps:{textField:{fullWidth:!0,required:!0,error:_e.date,helperText:_e.date?"Please select expense date!.":null}}})})}),(0,z.jsx)(S.ZP,{item:!0,xs:6,children:(0,z.jsxs)(v.Z,{fullWidth:!0,required:!0,children:[(0,z.jsx)(b.Z,{id:"demo-simple-select-label",children:"Type"}),(0,z.jsxs)(g.Z,{labelId:"demo-simple-select-label",id:"demo-simple-select",value:Re.type,label:"Type",name:"type",onChange:function(e){Oe((function(t){return(0,l.Z)((0,l.Z)({},t),{},{type:e.target.value,category:""})})),Be((function(e){return(0,l.Z)((0,l.Z)({},e),{},{type:!1})}))},required:!0,error:_e.type,children:[(0,z.jsx)(m.Z,{value:"EXPENSE",children:"EXPENSE"}),(0,z.jsx)(m.Z,{value:"INCOME",children:"INCOME"})]}),_e.type&&(0,z.jsx)(k.Z,{sx:{color:"red"},children:"Please Select Expense Type"})]})}),(0,z.jsx)(S.ZP,{item:!0,xs:6,children:(0,z.jsxs)(v.Z,{fullWidth:!0,required:!0,children:[(0,z.jsx)(b.Z,{id:"demo-simple-select-label",children:"Category"}),(0,z.jsx)(g.Z,{labelId:"demo-simple-select-label",id:"demo-simple-select",value:Re.category,label:"Category",name:"category",disabled:!Re.type,onChange:function(e){Oe((function(t){return(0,l.Z)((0,l.Z)({},t),{},{category:e.target.value})})),Be((function(e){return(0,l.Z)((0,l.Z)({},e),{},{category:!1})}))},error:_e.category,children:"EXPENSE"===Re.type?J.map((function(e,t){return(0,z.jsx)(m.Z,{value:e,children:e},t)})):V.map((function(e,t){return(0,z.jsx)(m.Z,{value:e,children:e},t)}))}),_e.category&&(0,z.jsx)(k.Z,{sx:{color:"red"},children:"Please Select Expense Category"})]})})]})}),!We&&(0,z.jsx)("div",{style:{padding:"10px",backgroundColor:"white",borderRadius:"10px"},children:(0,z.jsxs)(S.ZP,{container:!0,spacing:2,children:[(0,z.jsx)(S.ZP,{item:!0,xs:12,children:(0,z.jsx)(p.Z,{id:"modal-modal-title",variant:"h6",component:"h2",children:"Payments"})}),(0,z.jsx)(S.ZP,{item:!0,xs:12,display:"flex",justifyContent:"flex-start",alignItems:"center",children:(0,z.jsx)(v.Z,{component:"fieldset",variant:"standard",children:(0,z.jsx)(v.Z,{children:(0,z.jsx)(C.Z,{control:(0,z.jsx)(P.Z,{checked:"PAID"===(null===Re||void 0===Re?void 0:Re.paymentStatus),onChange:function(e){Oe((function(t){return(0,l.Z)((0,l.Z)({},t),{},{paymentStatus:e.target.checked?"PAID":"PENDING"})}))},name:"paymentStatus"}),label:"Mark as Paid",labelPlacement:"start"})})})}),"PAID"===Re.paymentStatus&&(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(S.ZP,{item:!0,xs:6,children:(0,z.jsxs)(v.Z,{fullWidth:!0,required:!0,children:[(0,z.jsx)(b.Z,{id:"demo-simple-select-label",children:"Payment Type"}),(0,z.jsx)(g.Z,{labelId:"demo-simple-select-label",id:"demo-simple-select",value:Re.paymentMode,label:"Payment Type",name:"paymentMode",onChange:Ct,error:_e.paymentMode,required:!0,children:ee.map((function(e,t){return(0,z.jsx)(m.Z,{value:e,children:e},t)}))}),_e.paymentMode&&(0,z.jsx)(k.Z,{sx:{color:"red"},children:"Please Select Expense Payment Type"})]})}),"CASH"!==Re.paymentMode&&(0,z.jsx)(S.ZP,{item:!0,xs:6,children:(0,z.jsxs)(v.Z,{fullWidth:!0,required:!0,children:[(0,z.jsx)(b.Z,{id:"demo-simple-select-label",children:"Select Bank"}),(0,z.jsx)(g.Z,{labelId:"demo-simple-select-label",id:"demo-simple-select",value:Re.bankId,label:"Select Bank",name:"bankId",onChange:function(e){console.log(e.target.value),Oe((function(t){return(0,l.Z)((0,l.Z)({},t),{},{bankId:e.target.value})})),Be((function(e){return(0,l.Z)((0,l.Z)({},e),{},{bankId:!1})}))},error:_e.bankId,required:!0,children:we.map((function(e){return(0,z.jsx)(m.Z,{value:e._id,children:e.bankName},e._id)}))}),_e.bankId&&(0,z.jsx)(k.Z,{sx:{color:"red"},children:"Please Select Bank"})]})})]})]})})]}),(0,z.jsxs)("div",{style:{display:"flex",flexDirection:"row",gap:"10px",justifyContent:"flex-end",padding:"10px"},children:[(0,z.jsx)(f.Z,{variant:"contained",color:"primary",onClick:We?Dt:Pt,children:We?"Update":"Save"}),(0,z.jsx)(f.Z,{variant:"outlined",onClick:function(){We&&(Oe(G),qe(!1)),ue(!1),et({}),Oe(G),Be(Q)},children:"Cancel"})]})]})}),(0,z.jsx)("div",{style:{marginTop:"20px"},children:(0,z.jsx)(O.ZP,{columns:It,data:Et,pagination:!0,progressPending:ge})}),(0,z.jsxs)(D.Z,{open:pt,onClose:function(){return ht(!1)},children:[(0,z.jsx)(I.Z,{children:"Remove"}),(0,z.jsx)(E.Z,{children:"Are you sure you want to delete?"}),(0,z.jsxs)(M.Z,{children:[(0,z.jsx)(f.Z,{onClick:function(){ht(!1),Oe(G),Be(Q),et({})},children:"Cancel"}),(0,z.jsx)(f.Z,{onClick:function(){var e=localStorage.getItem(N._.keyUserToken),t=(0,$.sw)(e),n={headers:{Authorization:"Bearer ".concat(t)}};Y.ZP.post(Y.Hv.expenditure.delete,{id:Re.id},n).then((function(e){e&&(oe("Entry deleted successfully!",{variant:"success"}),ht(!1),Oe(G),Be(Q),et({}),xt())})).catch((function(e){oe(e.msg||e.error,{variant:"error"})}))},variant:"contained",color:"error",children:"Delete"})]})]}),(0,z.jsx)(j.Z,{id:"paymentModal",open:he,"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:(0,z.jsx)(u.Z,{sx:K,children:(0,z.jsxs)(S.ZP,{container:!0,sx:{display:"flex",flexDirection:"column",gap:"10px"},children:[(0,z.jsx)(S.ZP,{item:!0,xs:12,children:(0,z.jsx)(p.Z,{variant:"h6",children:"Customer Details"})}),(0,z.jsx)(S.ZP,{item:!0,xs:12,children:(0,z.jsxs)(v.Z,{fullWidth:!0,required:!0,children:[(0,z.jsx)(b.Z,{id:"demo-simple-select-label",children:"Type"}),(0,z.jsx)(g.Z,{labelId:"demo-simple-select-label",id:"demo-simple-select",value:Ze.type,label:"Type",name:"type",disabled:!0,required:!0,sx:{backgroundColor:"white",borderRadius:"7px"},children:(0,z.jsx)(m.Z,{value:Ze.type,children:Ze.type})})]})}),(0,z.jsx)(S.ZP,{item:!0,xs:12,children:(0,z.jsx)(Z.Z,{label:"Balance",value:Ze.balance,disabled:!0,sx:{backgroundColor:"white",borderRadius:"7px"},fullWidth:!0})}),(0,z.jsx)(S.ZP,{item:!0,xs:12,children:(0,z.jsx)(p.Z,{variant:"h6",children:"Payment Details"})}),(0,z.jsx)(S.ZP,{item:!0,xs:12,children:(0,z.jsx)(Z.Z,{label:"Amount To Pay",value:Ze.amountToPay,onBlur:function(){Ze.amountToPay>Ze.balance&&(oe("Amount to pay cannot be greater than balance!",{variant:"error"}),ye((function(e){return(0,l.Z)((0,l.Z)({},e),{},{amountToPay:Ze.balance})})))},onChange:function(e){return ye((function(t){return(0,l.Z)((0,l.Z)({},t),{},{amountToPay:e.target.value})}))},sx:{backgroundColor:"white",borderRadius:"7px"},fullWidth:!0})}),(0,z.jsx)(S.ZP,{item:!0,xs:12,children:(0,z.jsx)(L._,{dateAdapter:_.y,children:(0,z.jsx)(U.M,{label:"Payment Date",value:Ze.paymentDate,maxDate:H()(new Date),onChange:function(e){ye((function(t){return(0,l.Z)((0,l.Z)({},t),{},{paymentDate:e})}))},sx:{backgroundColor:"white",borderRadius:"7px"},format:"DD/MM/YYYY",slotProps:{textField:{fullWidth:!0}}})})}),(0,z.jsx)(S.ZP,{item:!0,xs:12,children:(0,z.jsxs)(v.Z,{fullWidth:!0,children:[(0,z.jsx)(b.Z,{id:"record-payment-mode",children:"Select Payment Mode"}),(0,z.jsx)(g.Z,{labelId:"record-payment-mode",id:"demo-simple-select",label:"Select Payment Mode",sx:{backgroundColor:"white",borderRadius:"7px"},value:Ze.paymentMode,onChange:function(e){return ye((function(t){return(0,l.Z)((0,l.Z)({},t),{},{paymentMode:e.target.value})}))},children:["CASH","CARD","UPI","CHEQUE"].map((function(e,t){return(0,z.jsx)(m.Z,{value:e,children:e},t)}))})]})}),"CASH"!==Ze.paymentMode&&(0,z.jsx)(S.ZP,{item:!0,xs:12,children:(0,z.jsxs)(v.Z,{fullWidth:!0,children:[(0,z.jsx)(b.Z,{id:"select-bank",children:"Select Bank"}),(0,z.jsx)(g.Z,{labelId:"select-bank",id:"demo-simple-select",label:"Select Bank",value:Ze.bank,sx:{backgroundColor:"white",borderRadius:"7px"},onChange:function(e){return ye((function(t){return(0,l.Z)((0,l.Z)({},t),{},{bank:e.target.value})}))},children:we.map((function(e,t){return(0,z.jsx)(m.Z,{value:e._id,children:e.bankName},e._id)}))})]})}),(0,z.jsxs)(S.ZP,{item:!0,xs:12,sx:{display:"flex",justifyContent:"flex-end",gap:"10px"},children:[(0,z.jsx)(f.Z,{variant:"contained",color:"primary",onClick:function(){var e={};if(parseFloat(Ze.amountToPay)<=0)oe("Amount to pay should be greater than 0!",{variant:"error"});else{e.id=Ze.id,e.amount=parseFloat(Ze.amountToPay),e.paymentDate=H()(Ze.paymentDate).format("YYYY-MM-DD"),e.paymentMode=Ze.paymentMode,Ze.bank.length>0&&(e.bank=Ze.bank);var t=localStorage.getItem(N._.keyUserToken),n=(0,$.sw)(t);Y.ZP.post(Y.Hv.expenditure.recordPayment,e,{headers:{Authorization:"Bearer ".concat(n)}}).then((function(e){oe("Payment recorded successfully!",{variant:"success"}),fe(!1),ye(te),xt()})).catch((function(e){oe(e.error,{variant:"error"})}))}},disabled:!Ze.amountToPay||!Ze.paymentMode||"CASH"!==Ze.paymentMode&&!Ze.bank,children:"Update Payment"}),(0,z.jsx)(f.Z,{variant:"contained",color:"error",onClick:function(){fe(!1),ye(te)},children:"Cancel"})]})]})})})]})}function re(){return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(r.ql,{children:(0,z.jsx)("title",{children:" Dashboard: Expenditure"})}),(0,z.jsx)(ne,{})]})}},5403:function(e,t,n){"use strict";var r=n(64836);t.Z=void 0;var a=r(n(45649)),i=n(80184);t.Z=(0,a.default)((0,i.jsx)("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14"}),"Search")},65661:function(e,t,n){"use strict";var r=n(87462),a=n(63366),i=n(72791),o=n(28182),l=n(94419),s=n(4567),c=n(66934),u=n(31402),d=n(17673),p=n(85090),h=n(80184),f=["className","id"],x=(0,c.ZP)(s.Z,{name:"MuiDialogTitle",slot:"Root",overridesResolver:function(e,t){return t.root}})({padding:"16px 24px",flex:"0 0 auto"}),m=i.forwardRef((function(e,t){var n=(0,u.Z)({props:e,name:"MuiDialogTitle"}),s=n.className,c=n.id,m=(0,a.Z)(n,f),Z=n,y=function(e){var t=e.classes;return(0,l.Z)({root:["root"]},d.a,t)}(Z),v=i.useContext(p.Z).titleId,b=void 0===v?c:v;return(0,h.jsx)(x,(0,r.Z)({component:"h2",className:(0,o.Z)(y.root,s),ownerState:Z,ref:t,variant:"h6",id:null!=c?c:b},m))}));t.Z=m},83027:function(e){e.exports=function(){"use strict";var e="minute",t=/[+-]\d\d(?::?\d\d)?/g,n=/([+-]|\d\d)/g;return function(r,a,i){var o=a.prototype;i.utc=function(e){return new a({date:e,utc:!0,args:arguments})},o.utc=function(t){var n=i(this.toDate(),{locale:this.$L,utc:!0});return t?n.add(this.utcOffset(),e):n},o.local=function(){return i(this.toDate(),{locale:this.$L,utc:!1})};var l=o.parse;o.parse=function(e){e.utc&&(this.$u=!0),this.$utils().u(e.$offset)||(this.$offset=e.$offset),l.call(this,e)};var s=o.init;o.init=function(){if(this.$u){var e=this.$d;this.$y=e.getUTCFullYear(),this.$M=e.getUTCMonth(),this.$D=e.getUTCDate(),this.$W=e.getUTCDay(),this.$H=e.getUTCHours(),this.$m=e.getUTCMinutes(),this.$s=e.getUTCSeconds(),this.$ms=e.getUTCMilliseconds()}else s.call(this)};var c=o.utcOffset;o.utcOffset=function(r,a){var i=this.$utils().u;if(i(r))return this.$u?0:i(this.$offset)?c.call(this):this.$offset;if("string"==typeof r&&(r=function(e){void 0===e&&(e="");var r=e.match(t);if(!r)return null;var a=(""+r[0]).match(n)||["-",0,0],i=a[0],o=60*+a[1]+ +a[2];return 0===o?0:"+"===i?o:-o}(r),null===r))return this;var o=Math.abs(r)<=16?60*r:r,l=this;if(a)return l.$offset=o,l.$u=0===r,l;if(0!==r){var s=this.$u?this.toDate().getTimezoneOffset():-1*this.utcOffset();(l=this.local().add(o+s,e)).$offset=o,l.$x.$localOffset=s}else l=this.utc();return l};var u=o.format;o.format=function(e){var t=e||(this.$u?"YYYY-MM-DDTHH:mm:ss[Z]":"");return u.call(this,t)},o.valueOf=function(){var e=this.$utils().u(this.$offset)?0:this.$offset+(this.$x.$localOffset||this.$d.getTimezoneOffset());return this.$d.valueOf()-6e4*e},o.isUTC=function(){return!!this.$u},o.toISOString=function(){return this.toDate().toISOString()},o.toString=function(){return this.toDate().toUTCString()};var d=o.toDate;o.toDate=function(e){return"s"===e&&this.$offset?i(this.format("YYYY-MM-DD HH:mm:ss:SSS")).toDate():d.call(this)};var p=o.diff;o.diff=function(e,t,n){if(e&&this.$u===e.$u)return p.call(this,e,t,n);var r=this.local(),a=i(e).local();return p.call(r,a,t,n)}}}()}}]);
//# sourceMappingURL=638.0245347d.chunk.js.map