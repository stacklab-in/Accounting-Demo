"use strict";(self.webpackChunk_accounting_billing_stacklab=self.webpackChunk_accounting_billing_stacklab||[]).push([[60],{32869:function(e,n,t){t.d(n,{Ds:function(){return r.Ds}});var r=t(58518);t(58764)},60060:function(e,n,t){t.r(n),t.d(n,{default:function(){return K}});var r=t(6907),i=t(45987),l=t(4942),o=t(74165),a=t(15861),s=t(1413),d=t(29439),c=t(72791),u=t(64554),m=t(89164),h=t(4567),v=t(57088),f=t(23937),p=t(30439),Z=t(71715),x=t(82626),b=t(48550),j=t(63466),y=t(73590),g=t(61889),C=t(68096),k=t(50168),N=t(58406),S=t(5574),w=t(65661),P=t(39157),D=t(97123),B=t(26759),A=t(42419),M=t(5403),E=t(42716),_=t(18406),I=t(99615),Y=t(52073),L=t(32869),O=t(43513),T=t(71652),W=t(24750),R=t(97892),q=t.n(R),z=t(57689),U=t(8976),$=t(80184),F=["id"],H={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"70%",backgroundColor:_.$_.modalbackground,borderRadius:"10px",boxShadow:24,p:2,height:"auto",overflow:"auto"},Q={id:"",code:"",name:"",mobileNumber:"",dateOfBirth:null,address:{line1:"",line2:"",city:"",state:"",pincode:""}};function V(){var e,n,t=(0,v.K$)(),r=(0,L.Ds)().enqueueSnackbar,R=(0,z.s0)(),V=(0,U.E)().user,K=(0,c.useState)(!1),G=(0,d.Z)(K,2),J=G[0],X=G[1],ee=(0,c.useState)(!1),ne=(0,d.Z)(ee,2),te=ne[0],re=ne[1],ie=(0,c.useState)([]),le=(0,d.Z)(ie,2),oe=le[0],ae=le[1],se=(0,c.useState)(Q),de=(0,d.Z)(se,2),ce=de[0],ue=de[1],me=(0,c.useState)(!1),he=(0,d.Z)(me,2),ve=he[0],fe=he[1],pe=(0,c.useState)({}),Ze=(0,d.Z)(pe,2),xe=Ze[0],be=Ze[1],je=(0,c.useState)(""),ye=(0,d.Z)(je,2),ge=ye[0],Ce=ye[1],ke=(0,c.useState)({mobileNumber:!1}),Ne=(0,d.Z)(ke,2),Se=Ne[0],we=Ne[1],Pe=(0,c.useState)(null),De=(0,d.Z)(Pe,2),Be=De[0],Ae=De[1],Me=Boolean(Be),Ee=(0,c.useState)(!1),_e=(0,d.Z)(Ee,2),Ie=_e[0],Ye=_e[1],Le=function(){return X(!1)},Oe=function(){var e=(0,a.Z)((0,o.Z)().mark((function e(){var n,t,i;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=localStorage.getItem(Y._.keyUserToken),t=(0,_.sw)(n),e.next=5,I.ZP.post(I.Hv.employee.list,{},{headers:{Authorization:"Bearer ".concat(t)}});case 5:(i=e.sent)&&(re(!1),ae(i.data.data)),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),r("Failed to fetch employees!",{variant:"error"}),re(!1);case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}();(0,c.useEffect)((function(){re(!0),Oe()}),[]);var Te=function(e){var n=e.target,t=n.name,r=n.value;ue((function(e){return(0,s.Z)((0,s.Z)({},e),{},(0,l.Z)({},t,r))}))},We=function(){var e=(0,a.Z)((0,o.Z)().mark((function e(){var n,t,l;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=localStorage.getItem(Y._.keyUserToken),t=(0,_.sw)(n),ce.id,(l=(0,i.Z)(ce,F)).dateOfBirth=q()(l.dateOfBirth).format("YYYY-MM-DD"),l.mobileNumber&&/^[0-9]*$/.test(l.mobileNumber)&&10===l.mobileNumber.length?we((function(e){return(0,s.Z)((0,s.Z)({},e),{},{mobileNumber:!1})})):we((function(e){return(0,s.Z)((0,s.Z)({},e),{},{mobileNumber:!0})})),I.ZP.post(I.Hv.employee.add,l,{headers:{Authorization:"Bearer ".concat(t)}}).then((function(e){r("Employee created successfully!",{variant:"success"}),Le(),ue(Q),Oe()})).catch((function(e){r(e.error||e.msg,{variant:"error"})}));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Re=function(){var e=(0,a.Z)((0,o.Z)().mark((function e(){var n,t,i;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=localStorage.getItem(Y._.keyUserToken),t=(0,_.sw)(n),(i=(0,s.Z)({},ce)).dateOfBirth=q()(i.dateOfBirth).format("YYYY-MM-DD"),i.mobileNumber&&/^[0-9]*$/.test(i.mobileNumber)&&10===i.mobileNumber.length?we((function(e){return(0,s.Z)((0,s.Z)({},e),{},{mobileNumber:!1})})):we((function(e){return(0,s.Z)((0,s.Z)({},e),{},{mobileNumber:!0})})),I.ZP.post(I.Hv.employee.update,ce,{headers:{Authorization:"Bearer ".concat(t)}}).then((function(e){r("Employee updated successfully!",{variant:"success"}),Le(),ue(Q),Oe()})).catch((function(e){r(e.error||e.msg,{variant:"error"})}));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),qe=[{name:"Name",selector:function(e){return e.name},sortable:!0,cell:function(e){return(0,$.jsx)(h.Z,{variant:"subtitle2",onClick:function(){console.log({row:e}),R("/dashboard/employee/details",{state:e})},style:{cursor:"pointer"},children:"".concat(e.name.slice(0,1).toUpperCase()).concat(e.name.slice(1).toLowerCase())})}},{name:"Employee Code",selector:function(e){return e.code}},{name:"Contact Number",selector:function(e){return e.mobileNumber}},{name:"Quantities Sold",selector:function(e){return e.soldQuantities},sortable:!0,center:"true"},{name:"Sales Amount",selector:function(e){return new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR"}).format(e.totalSales)},sortable:!0},{name:"Actions",cell:function(e){var n,t;return(0,$.jsxs)($.Fragment,{children:[(0,$.jsx)(p.Z,{disabled:!(null!==V&&void 0!==V&&null!==(n=V.permissions)&&void 0!==n&&null!==(t=n.employee)&&void 0!==t&&t.u),onClick:function(n){Ae(n.currentTarget),be(e)},style:{color:_.$_.actionButton},variant:"outlined",endIcon:(0,$.jsx)(B.Z,{}),children:"Action"}),(0,$.jsxs)(Z.Z,{id:"basic-menu",anchorEl:Be,open:Me,onClose:function(){Ae(null),be({})},MenuListProps:{"aria-labelledby":"basic-button"},children:[(0,$.jsx)(x.Z,{onClick:function(){return function(){var e,n,t,r,i,l,o,a,s,d;fe(!0),Ae(null);var c={id:xe._id,name:xe.name,code:xe.code,dateOfBirth:q()(xe.dateOfBirth),mobileNumber:xe.mobileNumber.slice(3),address:{line2:null!==(e=null===xe||void 0===xe||null===(n=xe.address)||void 0===n?void 0:n.line2)&&void 0!==e?e:"",line1:null!==(t=null===xe||void 0===xe||null===(r=xe.address)||void 0===r?void 0:r.line1)&&void 0!==t?t:"",city:null!==(i=null===xe||void 0===xe||null===(l=xe.address)||void 0===l?void 0:l.city)&&void 0!==i?i:"",state:null!==(o=null===xe||void 0===xe||null===(a=xe.address)||void 0===a?void 0:a.state)&&void 0!==o?o:"",pincode:null!==(s=null===xe||void 0===xe||null===(d=xe.address)||void 0===d?void 0:d.pincode)&&void 0!==s?s:""}};ue(c),X(!0)}()},children:"Edit Details"}),(0,$.jsx)(x.Z,{onClick:function(){return ue((function(e){return(0,s.Z)((0,s.Z)({},e),{},{id:xe._id})})),Ye(!0),void Ae(null)},children:"Remove"})]})]})}}],ze=oe.filter((function(e){var n,t;return(null===e||void 0===e||null===(n=e.name)||void 0===n?void 0:n.toLowerCase().includes(null===ge||void 0===ge?void 0:ge.toLowerCase()))||(null===e||void 0===e||null===(t=e.code)||void 0===t?void 0:t.toLowerCase().includes(null===ge||void 0===ge?void 0:ge.toLowerCase()))})),Ue=function(e){var n=e.target,t=n.name,r=n.value;"pincode"===t&&r.length>6||ue((function(e){return(0,s.Z)((0,s.Z)({},e),{},{address:(0,s.Z)((0,s.Z)({},e.address),{},(0,l.Z)({},t,r))})}))};return(0,$.jsxs)(m.Z,{maxWidth:!t.themeStretch&&"xl",children:[(0,$.jsx)(h.Z,{variant:"h4",children:" Employee Master "}),(0,$.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginTop:"20px"},children:[(0,$.jsx)(b.Z,{size:"small",onChange:function(e){return Ce(e.target.value)},type:"text",placeholder:"Search",InputProps:{endAdornment:(0,$.jsx)(j.Z,{position:"end",children:(0,$.jsx)(M.Z,{})})}}),(null===V||void 0===V||null===(e=V.permissions)||void 0===e||null===(n=e.employee)||void 0===n?void 0:n.u)&&(0,$.jsx)(p.Z,{startIcon:(0,$.jsx)(A.Z,{}),color:"primary",variant:"contained",onClick:function(){var e=(0,_.bj)();ue((function(n){return(0,s.Z)((0,s.Z)({},n),{},{code:e})})),X(!0),fe(!1)},children:"ADD EMPLOYEE"})]}),(0,$.jsx)(y.Z,{open:J,"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:(0,$.jsxs)(u.Z,{sx:H,children:[(0,$.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"10px"},children:[(0,$.jsx)(h.Z,{id:"modal-modal-title",variant:"h4",component:"h2",children:"Basic Details"}),(0,$.jsx)("div",{style:{padding:"10px",backgroundColor:"white",borderRadius:"10px"},children:(0,$.jsxs)(g.ZP,{container:!0,spacing:2,children:[(0,$.jsx)(g.ZP,{item:!0,xs:6,children:(0,$.jsx)(b.Z,{label:"Name",name:"name",value:ce.name,onChange:Te,fullWidth:!0,required:!0})}),(0,$.jsx)(g.ZP,{item:!0,xs:6,children:(0,$.jsx)(b.Z,{label:"Employee Code",name:"code",value:ce.code,onChange:Te,fullWidth:!0,disabled:!0,required:!0})}),(0,$.jsx)(g.ZP,{item:!0,xs:6,children:(0,$.jsx)(b.Z,{label:"Mobile Number",name:"mobileNumber",value:ce.mobileNumber,onChange:Te,fullWidth:!0,error:Se.mobileNumber,helperText:Se.mobileNumber?"Please enter valid mobile number..":null,required:!0,inputProps:{maxLength:10},InputProps:{startAdornment:(0,$.jsxs)(j.Z,{position:"start",children:[(0,$.jsx)(E.Z,{})," +91"]})}})}),(0,$.jsx)(g.ZP,{item:!0,xs:6,children:(0,$.jsx)(T._,{dateAdapter:W.y,children:(0,$.jsx)(f.M,{label:"Date of Birth",value:ce.dateOfBirth,onChange:function(e){return ue((function(n){return(0,s.Z)((0,s.Z)({},n),{},{dateOfBirth:e})}))},slotProps:{textField:{fullWidth:!0,required:!0}},required:!0,format:"DD/MM/YYYY"})})})]})}),(0,$.jsx)("div",{style:{padding:"10px",backgroundColor:"white",borderRadius:"10px"},children:(0,$.jsxs)(g.ZP,{container:!0,spacing:2,children:[(0,$.jsx)(g.ZP,{item:!0,xs:12,children:(0,$.jsx)(h.Z,{variant:"h6",children:"Address"})}),(0,$.jsx)(g.ZP,{item:!0,xs:6,children:(0,$.jsx)(b.Z,{label:"Address Line 1",value:ce.address.line1,name:"line1",onChange:Ue,fullWidth:!0})}),(0,$.jsx)(g.ZP,{item:!0,xs:6,children:(0,$.jsx)(b.Z,{label:"Address Line 2",value:ce.address.line2,name:"line2",onChange:Ue,fullWidth:!0})}),(0,$.jsx)(g.ZP,{item:!0,xs:6,children:(0,$.jsx)(b.Z,{label:"City",value:ce.address.city,name:"city",onChange:Ue,fullWidth:!0})}),(0,$.jsx)(g.ZP,{item:!0,xs:6,children:(0,$.jsxs)(C.Z,{fullWidth:!0,children:[(0,$.jsx)(k.Z,{id:"demo-simple-select-label",children:"Select State"}),(0,$.jsx)(N.Z,{labelId:"demo-simple-select-label",id:"demo-simple-select",value:ce.address.state,name:"state",onChange:Ue,label:"Select State",children:_.$q.map((function(e,n){return(0,$.jsx)(x.Z,{value:e,children:e},n)}))})]})}),(0,$.jsx)(g.ZP,{item:!0,xs:6,children:(0,$.jsx)(b.Z,{label:"Pincode",name:"pincode",type:"number",value:ce.address.pincode,onChange:Ue,fullWidth:!0,inputProps:{maxLength:6}})})]})})]}),(0,$.jsxs)("div",{style:{display:"flex",flexDirection:"row",gap:"10px",justifyContent:"flex-end",padding:"10px"},children:[(0,$.jsx)(p.Z,{disabled:!ce.name||!ce.mobileNumber||!ce.dateOfBirth,variant:"contained",color:"primary",onClick:ve?Re:We,children:ve?"Update":"Save"}),(0,$.jsx)(p.Z,{variant:"outlined",onClick:function(){ve&&(ue(Q),fe(!1)),X(!1),be({})},children:"Cancel"})]})]})}),(0,$.jsx)("div",{style:{marginTop:"20px"},children:(0,$.jsx)(O.ZP,{columns:qe,data:ze,pagination:!0,progressPending:te})}),(0,$.jsxs)(S.Z,{open:Ie,onClose:function(){return Ye(!1)},children:[(0,$.jsx)(w.Z,{children:"Remove Employee"}),(0,$.jsx)(P.Z,{children:"Are you sure you want to delete this employee?"}),(0,$.jsxs)(D.Z,{children:[(0,$.jsx)(p.Z,{onClick:function(){return Ye(!1)},children:"Cancel"}),(0,$.jsx)(p.Z,{onClick:function(){var e=localStorage.getItem(Y._.keyUserToken),n=(0,_.sw)(e),t={headers:{Authorization:"Bearer ".concat(n)}};I.ZP.post(I.Hv.employee.delete,{id:ce.id},t).then((function(e){e&&(r("Employee deleted successfully!",{variant:"success"}),Ye(!1),ue(Q),Oe())})).catch((function(e){r(e.msg||e.error,{variant:"error"})}))},variant:"contained",color:"error",children:"Delete"})]})]})]})}function K(){return(0,$.jsxs)($.Fragment,{children:[(0,$.jsx)(r.ql,{children:(0,$.jsx)("title",{children:" Dashboard : Employee"})}),(0,$.jsx)(V,{})]})}},42419:function(e,n,t){var r=t(64836);n.Z=void 0;var i=r(t(45649)),l=t(80184);n.Z=(0,i.default)((0,l.jsx)("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6z"}),"Add")},42716:function(e,n,t){var r=t(64836);n.Z=void 0;var i=r(t(45649)),l=t(80184);n.Z=(0,i.default)((0,l.jsx)("path",{d:"M6.62 10.79c1.44 2.83 3.76 5.14 6.59 6.59l2.2-2.2c.27-.27.67-.36 1.02-.24 1.12.37 2.33.57 3.57.57.55 0 1 .45 1 1V20c0 .55-.45 1-1 1-9.39 0-17-7.61-17-17 0-.55.45-1 1-1h3.5c.55 0 1 .45 1 1 0 1.25.2 2.45.57 3.57.11.35.03.74-.25 1.02z"}),"Phone")},5403:function(e,n,t){var r=t(64836);n.Z=void 0;var i=r(t(45649)),l=t(80184);n.Z=(0,i.default)((0,l.jsx)("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14"}),"Search")},65661:function(e,n,t){var r=t(87462),i=t(63366),l=t(72791),o=t(28182),a=t(94419),s=t(4567),d=t(66934),c=t(31402),u=t(17673),m=t(85090),h=t(80184),v=["className","id"],f=(0,d.ZP)(s.Z,{name:"MuiDialogTitle",slot:"Root",overridesResolver:function(e,n){return n.root}})({padding:"16px 24px",flex:"0 0 auto"}),p=l.forwardRef((function(e,n){var t=(0,c.Z)({props:e,name:"MuiDialogTitle"}),s=t.className,d=t.id,p=(0,i.Z)(t,v),Z=t,x=function(e){var n=e.classes;return(0,a.Z)({root:["root"]},u.a,n)}(Z),b=l.useContext(m.Z).titleId,j=void 0===b?d:b;return(0,h.jsx)(f,(0,r.Z)({component:"h2",className:(0,o.Z)(x.root,s),ownerState:Z,ref:n,variant:"h6",id:null!=d?d:j},p))}));n.Z=p}}]);
//# sourceMappingURL=60.98455a79.chunk.js.map