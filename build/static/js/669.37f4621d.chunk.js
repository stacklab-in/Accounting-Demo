"use strict";(self.webpackChunk_accounting_billing_stacklab=self.webpackChunk_accounting_billing_stacklab||[]).push([[669],{61214:function(e,t,n){n.d(t,{Z:function(){return z}});var r=n(1413),a=n(45987),o=n(64554),i=n(50533),l=n(36314),s=n(4567),c=n(93433),d=n(29439),u=n(4942),p=n(87462),m=n(63366),x=n(72791),h=(n(57441),n(28182)),f=n(94419),g=n(57271),v=n(66934),y=n(31402),Z=n(12065),b=n(74223),j=n(80184),C=(0,b.Z)((0,j.jsx)("path",{d:"M6 10c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm12 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm-6 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"}),"MoreHoriz"),S=n(95080),w=["slots","slotProps"],D=(0,v.ZP)(S.Z)((function(e){var t=e.theme;return(0,p.Z)({display:"flex",marginLeft:"calc(".concat(t.spacing(1)," * 0.5)"),marginRight:"calc(".concat(t.spacing(1)," * 0.5)")},"light"===t.palette.mode?{backgroundColor:t.palette.grey[100],color:t.palette.grey[700]}:{backgroundColor:t.palette.grey[700],color:t.palette.grey[100]},{borderRadius:2,"&:hover, &:focus":(0,p.Z)({},"light"===t.palette.mode?{backgroundColor:t.palette.grey[200]}:{backgroundColor:t.palette.grey[600]}),"&:active":(0,p.Z)({boxShadow:t.shadows[0]},"light"===t.palette.mode?{backgroundColor:(0,Z._4)(t.palette.grey[200],.12)}:{backgroundColor:(0,Z._4)(t.palette.grey[600],.12)})})})),k=(0,v.ZP)(C)({width:24,height:16});var T=function(e){var t=e.slots,n=void 0===t?{}:t,r=e.slotProps,a=void 0===r?{}:r,o=(0,m.Z)(e,w),i=e;return(0,j.jsx)("li",{children:(0,j.jsx)(D,(0,p.Z)({focusRipple:!0},o,{ownerState:i,children:(0,j.jsx)(k,(0,p.Z)({as:n.CollapsedIcon,ownerState:i},a.collapsedIcon))}))})},M=n(75878),E=n(21217);function P(e){return(0,E.Z)("MuiBreadcrumbs",e)}var N=(0,M.Z)("MuiBreadcrumbs",["root","ol","li","separator"]),I=["children","className","component","slots","slotProps","expandText","itemsAfterCollapse","itemsBeforeCollapse","maxItems","separator"],B=(0,v.ZP)(s.Z,{name:"MuiBreadcrumbs",slot:"Root",overridesResolver:function(e,t){return[(0,u.Z)({},"& .".concat(N.li),t.li),t.root]}})({}),_=(0,v.ZP)("ol",{name:"MuiBreadcrumbs",slot:"Ol",overridesResolver:function(e,t){return t.ol}})({display:"flex",flexWrap:"wrap",alignItems:"center",padding:0,margin:0,listStyle:"none"}),L=(0,v.ZP)("li",{name:"MuiBreadcrumbs",slot:"Separator",overridesResolver:function(e,t){return t.separator}})({display:"flex",userSelect:"none",marginLeft:8,marginRight:8});function R(e,t,n,r){return e.reduce((function(a,o,i){return i<e.length-1?a=a.concat(o,(0,j.jsx)(L,{"aria-hidden":!0,className:t,ownerState:r,children:n},"separator-".concat(i))):a.push(o),a}),[])}var F=x.forwardRef((function(e,t){var n=(0,y.Z)({props:e,name:"MuiBreadcrumbs"}),r=n.children,a=n.className,o=n.component,i=void 0===o?"nav":o,l=n.slots,s=void 0===l?{}:l,u=n.slotProps,v=void 0===u?{}:u,Z=n.expandText,b=void 0===Z?"Show path":Z,C=n.itemsAfterCollapse,S=void 0===C?1:C,w=n.itemsBeforeCollapse,D=void 0===w?1:w,k=n.maxItems,M=void 0===k?8:k,E=n.separator,N=void 0===E?"/":E,L=(0,m.Z)(n,I),F=x.useState(!1),O=(0,d.Z)(F,2),A=O[0],q=O[1],z=(0,p.Z)({},n,{component:i,expanded:A,expandText:b,itemsAfterCollapse:S,itemsBeforeCollapse:D,maxItems:M,separator:N}),U=function(e){var t=e.classes;return(0,f.Z)({root:["root"],li:["li"],ol:["ol"],separator:["separator"]},P,t)}(z),Y=(0,g.Z)({elementType:s.CollapsedIcon,externalSlotProps:v.collapsedIcon,ownerState:z}),H=x.useRef(null),G=x.Children.toArray(r).filter((function(e){return x.isValidElement(e)})).map((function(e,t){return(0,j.jsx)("li",{className:U.li,children:e},"child-".concat(t))}));return(0,j.jsx)(B,(0,p.Z)({ref:t,component:i,color:"text.secondary",className:(0,h.Z)(U.root,a),ownerState:z},L,{children:(0,j.jsx)(_,{className:U.ol,ref:H,ownerState:z,children:R(A||M&&G.length<=M?G:function(e){return D+S>=e.length?e:[].concat((0,c.Z)(e.slice(0,D)),[(0,j.jsx)(T,{"aria-label":b,slots:{CollapsedIcon:s.CollapsedIcon},slotProps:{collapsedIcon:Y},onClick:function(){q(!0);var e=H.current.querySelector("a[href],button,[tabindex]");e&&e.focus()}},"ellipsis")],(0,c.Z)(e.slice(e.length-S,e.length)))}(G),U.separator,N,z)})}))})),O=n(83854);function A(e){var t=e.link,n=e.activeLast,a=e.disabled,l=t.name,s=t.href,c=t.icon,d=(0,r.Z)({typography:"body2",alignItems:"center",color:"text.primary",display:"inline-flex"},a&&!n&&{cursor:"default",pointerEvents:"none",color:"text.disabled"}),u=(0,j.jsxs)(j.Fragment,{children:[c&&(0,j.jsx)(o.Z,{component:"span",sx:{mr:1,display:"inherit","& svg":{width:20,height:20}},children:c}),l]});return s?(0,j.jsx)(i.Z,{component:O.r,href:s,sx:d,children:u}):(0,j.jsxs)(o.Z,{sx:d,children:[" ",u," "]})}var q=["links","action","heading","moreLink","activeLast","sx"];function z(e){var t=e.links,n=e.action,c=e.heading,d=e.moreLink,u=e.activeLast,p=e.sx,m=(0,a.Z)(e,q);t[t.length-1].name;return(0,j.jsxs)(o.Z,{sx:(0,r.Z)({},p),children:[(0,j.jsxs)(l.Z,{direction:"row",alignItems:"center",children:[(0,j.jsxs)(o.Z,{sx:{flexGrow:1},children:[c&&(0,j.jsx)(s.Z,{variant:"h4",gutterBottom:!0,children:c}),!!t.length&&(0,j.jsx)(F,(0,r.Z)((0,r.Z)({separator:(0,j.jsx)(U,{})},m),{},{children:t.map((function(e){return(0,j.jsx)(A,{link:e,activeLast:u},e.name||"")}))}))]}),n&&(0,j.jsxs)(o.Z,{sx:{flexShrink:0},children:[" ",n," "]})]}),!!d&&(0,j.jsx)(o.Z,{sx:{mt:2},children:d.map((function(e){return(0,j.jsx)(i.Z,{href:e,variant:"body2",target:"_blank",rel:"noopener",sx:{display:"table"},children:e},e)}))})]})}function U(){return(0,j.jsx)(o.Z,{component:"span",sx:{width:4,height:4,borderRadius:"50%",bgcolor:"text.disabled"}})}},32869:function(e,t,n){n.d(t,{Ds:function(){return r.Ds}});var r=n(58518);n(58764)},51669:function(e,t,n){n.r(t),n.d(t,{default:function(){return O}});var r=n(1413),a=n(74165),o=n(15861),i=n(29439),l=n(89164),s=n(36314),c=n(85771),d=n(30439),u=n(71715),p=n(82626),m=n(48550),x=n(63466),h=n(64554),f=n(4567),g=n(6907),v=n(57088),y=n(18406),Z=n(26759),b=n(72791),j=n(52073),C=n(57689),S=n(99615),w=n(32869),D=n(43513),k=n(5403),T=n(61214),M=n(38072),E=n(71652),P=n(24750),N=n(97892),I=n.n(N),B=n(23937),_=n(34045),L=n(35125),R=(n(31052),n(64802)),F=n(80184);function O(){var e,t,n=(0,v.K$)(),N=(0,b.useState)(!1),O=(0,i.Z)(N,2),A=O[0],q=O[1],z=(0,b.useState)([]),U=(0,i.Z)(z,2),Y=U[0],H=U[1],G=(0,b.useState)([]),V=(0,i.Z)(G,2),Q=(V[0],V[1]),W=(0,b.useState)(""),X=(0,i.Z)(W,2),$=X[0],K=X[1],J=(0,w.Ds)().enqueueSnackbar,ee=(0,C.TH)(),te=null===ee||void 0===ee?void 0:ee.state,ne=(0,b.useState)([I()().startOf("year"),I()().endOf("year")]),re=(0,i.Z)(ne,2),ae=(re[0],re[1],(0,b.useState)(null)),oe=(0,i.Z)(ae,2),ie=oe[0],le=oe[1],se=Boolean(ie),ce=function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t,n){var r,o,i;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r=localStorage.getItem(j._.keyUserToken),o=(0,y.sw)(r),e.next=5,S.ZP.post(S.Hv.reports.ledgerDetails,{account:te.account,startDate:t,endDate:n},{headers:{Authorization:"Bearer ".concat(o)}});case 5:(i=e.sent)&&(q(!1),H(i.data.data),Q(i.data.data)),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),J("Failed to fetch sales orders!",{variant:"error"}),q(!1);case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,n){return e.apply(this,arguments)}}(),de=(0,b.useState)(I()().startOf("month")),ue=(0,i.Z)(de,2),pe=ue[0],me=ue[1],xe=(0,b.useState)(I()().endOf("month")),he=(0,i.Z)(xe,2),fe=he[0],ge=he[1];(0,b.useEffect)((function(){q(!0),ce(pe.toDate(),fe.toDate())}),[pe,fe]);var ve=[{name:"Transaction Date",selector:function(e){return new Date(e.createdAt).toLocaleDateString("en-GB",{day:"2-digit",month:"long",year:"numeric"})},sortable:"true"},{name:"Description",selector:function(e){return e.description||"-"},center:"true"},{name:"Payment Mode",selector:function(e){return e.paymentMode},sortable:"true"},{name:"Invoice/Cheque No",selector:function(e){return"CHEQUE"===e.paymentMode&&e.chequeNumber||e.invoiceNumber},sortable:"true"},{name:"Debit",selector:function(e){return"VENDOR"===e.partyType||"EXPENSE"===e.partyType?e.amount.toFixed(2):0},sortable:!0},{name:"Credit",selector:function(e){return"CUSTOMER"===e.partyType||"INCOME"===e.partyType?e.amount.toFixed(2):0},sortable:"true"},{name:"Balance",selector:function(e){return e.balance.toFixed(2)},sortable:"true"}],ye=null===Y||void 0===Y?void 0:Y.filter((function(e){var t,n;return(null===e||void 0===e||null===(t=e.invoiceNumber)||void 0===t?void 0:t.toLowerCase().includes(null===$||void 0===$?void 0:$.toLowerCase()))||e.chequeNumber&&(null===e||void 0===e||null===(n=e.chequeNumber)||void 0===n?void 0:n.toString().toLowerCase().includes(null===$||void 0===$?void 0:$.toLowerCase()))}));return(0,F.jsxs)(l.Z,{maxWidth:!n.themeStretch&&"xl",children:[(0,F.jsx)(g.ql,{children:(0,F.jsx)("title",{children:" Reports: Ledger Details"})}),(0,F.jsx)(T.Z,{heading:"Ledger Details",links:[{name:"Ledger",href:M.H.dashboard.reports.ledger},{name:"".concat(te.account)}],sx:{mb:{xs:3,md:5}}}),(0,F.jsxs)("div",{style:{display:"flex",flexDirection:"row",justifyContent:"space-between",marginTop:"20px"},children:[(0,F.jsxs)(s.Z,{direction:"row",spacing:1,children:[(0,F.jsx)(c.Z,{label:"Opening Balance : ".concat(null!==(e=ye[ye.length-1])&&void 0!==e&&e.balance?y.MG.format(ye[ye.length-1].balance):0),variant:"outlined"}),(0,F.jsx)(c.Z,{label:"Closing Balance : ".concat(null!==(t=ye[0])&&void 0!==t&&t.balance?y.MG.format(ye[0].balance):0),variant:"outlined"})]}),(0,F.jsxs)(s.Z,{children:[(0,F.jsx)(d.Z,{style:{color:y.$_.actionButton},endIcon:(0,F.jsx)(Z.Z,{}),variant:"outlined",onClick:function(e){return le(e.currentTarget)},children:"ACTIONS"}),(0,F.jsxs)(u.Z,{id:"basic-menu",anchorEl:ie,open:se,onClose:function(){le(null),Q({})},MenuListProps:{"aria-labelledby":"basic-button"},children:[(0,F.jsx)(p.Z,{onClick:function(){},children:"Print"}),(0,F.jsx)(p.Z,{onClick:function(){le(null);var e=new L.default;e.text("".concat(te.account," Ledger Report"),10,10);var t=ye.map((function(e){return[new Date(e.createdAt).toLocaleDateString("en-GB",{day:"2-digit",month:"long",year:"numeric"}),e.description||"-",e.paymentMode,"CHEQUE"===e.paymentMode&&e.chequeNumber||e.invoiceNumber,"VENDOR"===e.partyType||"EXPENSE"===e.partyType?e.amount.toFixed(2):0,"CUSTOMER"===e.partyType||"INCOME"===e.partyType?e.amount.toFixed(2):0,e.balance.toFixed(2)]}));e.autoTable({head:[["Transaction Date","Description","Payment Mode","Invoice/Cheque No","Debit","Credit","Balance"]],body:t}),e.save("".concat(te.account,"_ledger_report.pdf"))},children:"Download as PDF"}),(0,F.jsx)(p.Z,{onClick:function(){le(null);var e=ye.map((function(e){return{"Transaction Date":new Date(e.createdAt).toLocaleDateString("en-GB",{day:"2-digit",month:"long",year:"numeric"}),Description:e.description||"-","Payment Mode":e.paymentMode,"Invoice/Cheque No":"CHEQUE"===e.paymentMode&&e.chequeNumber||e.invoiceNumber,Debit:"VENDOR"===e.partyType||"EXPENSE"===e.partyType?e.amount.toFixed(2):0,Credit:"CUSTOMER"===e.partyType||"INCOME"===e.partyType?e.amount.toFixed(2):0,Balance:e.balance.toFixed(2)}})),t=_.P6.book_new(),n=_.P6.json_to_sheet(e);_.P6.book_append_sheet(t,n,"".concat(te.account,"_Ledger Report"));var r=_.cW(t,{bookType:"xlsx",type:"array"}),a=new Blob([r],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=UTF-8"});(0,R.saveAs)(a,"".concat(te.account,"_ledger_report.xlsx"))},children:"Download as Excel"})]})]})]}),(0,F.jsxs)("div",{style:{display:"flex",gap:"10px",marginTop:"20px"},children:[(0,F.jsx)(m.Z,{placeholder:"Search",size:"small",value:$,onChange:function(e){return K(e.target.value)},InputProps:{startAdornment:(0,F.jsx)(x.Z,{position:"start",children:(0,F.jsx)(k.Z,{})})}}),(0,F.jsx)("div",{children:(0,F.jsx)(E._,{dateAdapter:P.y,children:(0,F.jsxs)(h.Z,{sx:{display:"flex",flexDirection:"row",gap:"10px",alignItems:"center"},children:[(0,F.jsx)(B.M,{label:"From",value:pe,slotProps:{textField:{size:"small"}},onChange:function(e){me(e)},format:"DD/MM/YYYY",renderInput:function(e){return(0,F.jsx)(m.Z,(0,r.Z)({},e))}}),(0,F.jsx)(f.Z,{children:"-"}),(0,F.jsx)(B.M,{label:"To",value:fe,format:"DD/MM/YYYY",slotProps:{textField:{size:"small"}},onChange:function(e){ge(e)},renderInput:function(e){return(0,F.jsx)(m.Z,(0,r.Z)({},e))}})]})})})]}),(0,F.jsx)("div",{style:{marginTop:"20px"},children:(0,F.jsx)(D.ZP,{columns:ve,data:ye,pagination:!0,progressPending:A})})]})}}}]);
//# sourceMappingURL=669.37f4621d.chunk.js.map