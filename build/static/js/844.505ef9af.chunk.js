(self.webpackChunk_accounting_billing_stacklab=self.webpackChunk_accounting_billing_stacklab||[]).push([[844],{32869:function(e,t,r){"use strict";r.d(t,{Ds:function(){return n.Ds}});var n=r(58518);r(58764)},93844:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return de}});var n=r(4942),i=r(74165),s=r(15861),a=r(1413),o=r(29439),l=r(72791),u=r(6907),c=r(64554),d=r(89164),f=r(4567),h=r(57088),p=r(30439),x=r(71715),Z=r(82626),v=r(87462),m=r(63366),j=r(28182),g=r(94419),y=r(66934),b=r(31402),C=r(27938),$=r(75878),T=r(21217);function S(e){return(0,T.Z)("MuiCard",e)}(0,$.Z)("MuiCard",["root"]);var k=r(80184),D=["className","raised"],w=(0,y.ZP)(C.Z,{name:"MuiCard",slot:"Root",overridesResolver:function(e,t){return t.root}})((function(){return{overflow:"hidden"}})),P=l.forwardRef((function(e,t){var r=(0,b.Z)({props:e,name:"MuiCard"}),n=r.className,i=r.raised,s=void 0!==i&&i,a=(0,m.Z)(r,D),o=(0,v.Z)({},r,{raised:s}),l=function(e){var t=e.classes;return(0,g.Z)({root:["root"]},S,t)}(o);return(0,k.jsx)(w,(0,v.Z)({className:(0,j.Z)(l.root,n),elevation:s?8:void 0,ref:t,ownerState:o},a))}));function E(e){return(0,T.Z)("MuiCardContent",e)}(0,$.Z)("MuiCardContent",["root"]);var O=["className","component"],R=(0,y.ZP)("div",{name:"MuiCardContent",slot:"Root",overridesResolver:function(e,t){return t.root}})((function(){return{padding:16,"&:last-child":{paddingBottom:24}}})),A=l.forwardRef((function(e,t){var r=(0,b.Z)({props:e,name:"MuiCardContent"}),n=r.className,i=r.component,s=void 0===i?"div":i,a=(0,m.Z)(r,O),o=(0,v.Z)({},r,{component:s}),l=function(e){var t=e.classes;return(0,g.Z)({root:["root"]},E,t)}(o);return(0,k.jsx)(R,(0,v.Z)({as:s,className:(0,j.Z)(l.root,n),ownerState:o,ref:t},a))})),M=r(93006),N=r(63466),V=r(73590),I=r(61889),U=r(68096),_=r(50168),L=r(58406),F=r(47071),H=r(5574),Y=r(65661),z=r(39157),B=r(97123),W=r(26759),q=r(42419),G=r(5403),K=r(18406),J=r(99615),Q=r(52073),X=r(32869),ee=r(43513),te=r(71652),re=r(24750),ne=r(51612),ie=r(97892),se=r.n(ie),ae=r(83027),oe=r.n(ae);se().extend(oe());var le={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"70%",bgcolor:"background.paper",borderRadius:"10px",boxShadow:24,pl:2,pr:2,pt:2,backgroundColor:K.$_.modalbackground,height:"auto",overflow:"auto"},ue={code:"",description:"",type:"PERCENTAGE",typeValue:"",status:""},ce={type:!1,typeValue:!1,status:!1};function de(){var e,t,r,v,m=(0,h.K$)(),j=(0,X.Ds)().enqueueSnackbar,g=(0,l.useState)(!1),y=(0,o.Z)(g,2),b=y[0],C=y[1],$=(0,l.useState)(!1),T=(0,o.Z)($,2),S=T[0],D=T[1],w=(0,l.useState)([]),E=(0,o.Z)(w,2),O=E[0],R=E[1],ie=(0,l.useState)(ue),se=(0,o.Z)(ie,2),ae=se[0],oe=se[1],de=(0,l.useState)(ce),fe=(0,o.Z)(de,2),he=fe[0],pe=fe[1],xe=(0,l.useState)(!1),Ze=(0,o.Z)(xe,2),ve=Ze[0],me=Ze[1],je=(0,l.useState)({}),ge=(0,o.Z)(je,2),ye=ge[0],be=ge[1],Ce=(0,l.useState)(""),$e=(0,o.Z)(Ce,2),Te=$e[0],Se=$e[1],ke=(0,l.useState)(null),De=(0,o.Z)(ke,2),we=De[0],Pe=De[1],Ee=Boolean(we),Oe=(0,l.useState)(!1),Re=(0,o.Z)(Oe,2),Ae=Re[0],Me=Re[1],Ne=function(){return C(!1)},Ve=function(){var e=(0,s.Z)((0,i.Z)().mark((function e(){var t,r,n;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=localStorage.getItem(Q._.keyUserToken),r=(0,K.sw)(t),e.next=5,J.ZP.post(J.Hv.offer.list,{},{headers:{Authorization:"Bearer ".concat(r)}});case 5:(n=e.sent)&&(D(!1),R(n.data.data)),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),j("Failed to fetch offers!",{variant:"error"}),D(!1);case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}();(0,l.useEffect)((function(){D(!0),Ve()}),[]);var Ie=function(e){var t=e.target,r=t.name,i=t.value;oe((function(e){return(0,a.Z)((0,a.Z)({},e),{},(0,n.Z)({},r,i))})),"type"!==r&&"status"!==r&&"typeValue"!==r||pe((function(e){return(0,a.Z)((0,a.Z)({},e),{},(0,n.Z)({},r,!1))}))},Ue=function(){var e=(0,s.Z)((0,i.Z)().mark((function e(){var t,r;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(ae.type){e.next=3;break}return pe((function(e){return(0,a.Z)((0,a.Z)({},e),{},{type:!0})})),e.abrupt("return");case 3:if(pe((function(e){return(0,a.Z)((0,a.Z)({},e),{},{type:!1})})),ae.typeValue){e.next=7;break}return pe((function(e){return(0,a.Z)((0,a.Z)({},e),{},{typeValue:!0})})),e.abrupt("return");case 7:pe((function(e){return(0,a.Z)((0,a.Z)({},e),{},{typeValue:!1})})),t=localStorage.getItem(Q._.keyUserToken),r=(0,K.sw)(t),J.ZP.post(J.Hv.offer.add,ae,{headers:{Authorization:"Bearer ".concat(r)}}).then((function(e){j("Offer created successfully!",{variant:"success"}),Ne(),pe(ce),oe(ue),Ve()})).catch((function(e){j(e.error||e.msg,{variant:"error"})}));case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),_e=function(){var e=(0,s.Z)((0,i.Z)().mark((function e(){var t,r;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(ae.type){e.next=3;break}return pe((function(e){return(0,a.Z)((0,a.Z)({},e),{},{type:!0})})),e.abrupt("return");case 3:if(pe((function(e){return(0,a.Z)((0,a.Z)({},e),{},{type:!1})})),ae.status){e.next=7;break}return pe((function(e){return(0,a.Z)((0,a.Z)({},e),{},{status:!0})})),e.abrupt("return");case 7:pe((function(e){return(0,a.Z)((0,a.Z)({},e),{},{status:!1})})),t=localStorage.getItem(Q._.keyUserToken),r=(0,K.sw)(t),J.ZP.post(J.Hv.offer.update,ae,{headers:{Authorization:"Bearer ".concat(r)}}).then((function(e){j("Offer updated successfully!",{variant:"success"}),Ne(),pe(ce),oe(ue),Ve()})).catch((function(e){j(e.error||e.msg,{variant:"error"})}));case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Le=[{name:"Offer Code",selector:function(e){return e.code},sortable:!0},{name:"Offer Type",selector:function(e){return e.type},sortable:!0},{name:"Status",selector:function(e){return e.status},sortable:!0},{name:"Created On",selector:function(e){return(0,K.p6)(e.createdAt)},sortable:!0},{name:"Actions",width:"20%",cell:function(e){return(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(p.Z,{onClick:function(t){Pe(t.currentTarget),be(e)},style:{color:K.$_.actionButton},variant:"outlined",endIcon:(0,k.jsx)(W.Z,{}),children:"Action"}),(0,k.jsxs)(x.Z,{id:"basic-menu",anchorEl:we,open:Ee,onClose:function(){Pe(null),be({})},MenuListProps:{"aria-labelledby":"basic-button"},children:[(0,k.jsx)(Z.Z,{onClick:function(){return function(){me(!0),Pe(null);var e={id:ye._id,code:ye.code,status:ye.status,typeValue:ye.typeValue,type:ye.type,description:ye.description};oe(e),C(!0)}()},children:"Edit Details"}),(0,k.jsx)(Z.Z,{onClick:function(){return oe((function(e){return(0,a.Z)((0,a.Z)({},e),{},{id:ye._id})})),Me(!0),void Pe(null)},children:"Remove"})]})]})}}],Fe=O.filter((function(e){var t;return null===e||void 0===e||null===(t=e.code)||void 0===t?void 0:t.toLowerCase().includes(null===Te||void 0===Te?void 0:Te.toLowerCase())}));return(0,k.jsxs)(d.Z,{maxWidth:!m.themeStretch&&"xl",children:[(0,k.jsx)(u.ql,{children:(0,k.jsx)("title",{children:" Dashboard : Offers"})}),(0,k.jsx)(f.Z,{variant:"h4",children:" Offer Management "}),(0,k.jsx)("div",{style:{display:"flex",justifyContent:"flex-end"},children:(0,k.jsx)(p.Z,{startIcon:(0,k.jsx)(q.Z,{}),variant:"contained",color:"primary",onClick:function(){var e=(0,K.bj)();oe((function(t){return(0,a.Z)((0,a.Z)({},t),{},{code:e})})),C(!0),me(!1)},children:"ADD OFFER"})}),(0,k.jsxs)("div",{style:{display:"flex",justifyContent:"flex-start",alignItems:"center",marginTop:"10px",gap:"10px",padding:"10px",backgroundColor:"#E6F2FF",borderRadius:"10px"},children:[(0,k.jsx)(P,{children:(0,k.jsxs)(A,{children:[(0,k.jsx)(f.Z,{variant:"h6",children:"Total number of offers"}),(0,k.jsx)(f.Z,{variant:"h5",children:null!==(e=O.length)&&void 0!==e?e:"0"})]})}),(0,k.jsx)(P,{children:(0,k.jsxs)(A,{children:[(0,k.jsx)(f.Z,{variant:"h6",children:"Number of Live offers"}),(0,k.jsxs)(f.Z,{variant:"h5",children:["  ",null!==(t=O.filter((function(e){return"LIVE"===e.status})).length)&&void 0!==t?t:"0"]})]})}),(0,k.jsx)(P,{children:(0,k.jsxs)(A,{children:[(0,k.jsx)(f.Z,{variant:"h6",children:"Number of Draft offers"}),(0,k.jsxs)(f.Z,{variant:"h5",children:[" ",null!==(r=O.filter((function(e){return"DRAFT"===e.status})).length)&&void 0!==r?r:"0"]})]})}),(0,k.jsx)(P,{children:(0,k.jsxs)(A,{children:[(0,k.jsx)(f.Z,{variant:"h6",children:"Number of Past offers"}),(0,k.jsxs)(f.Z,{variant:"h5",children:[" ",null!==(v=O.filter((function(e){return"PAST"===e.status})).length)&&void 0!==v?v:"0"]})]})})]}),(0,k.jsx)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginTop:"20px"},children:(0,k.jsxs)("div",{style:{display:"flex",flexDirection:"row",alignItems:"center",gap:"10px"},children:[(0,k.jsx)(M.Z,{placeholder:"Search by offer code",size:"small",value:Te,onChange:function(e){return Se(e.target.value)},InputProps:{startAdornment:(0,k.jsx)(N.Z,{position:"start",children:(0,k.jsx)(G.Z,{})})}}),(0,k.jsx)(te._,{dateAdapter:re.y,children:(0,k.jsx)(ne.n,{size:"small",label:"Date Range"})})]})}),(0,k.jsx)(V.Z,{open:b,"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:(0,k.jsxs)(c.Z,{sx:le,children:[(0,k.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"10px"},children:[(0,k.jsx)(f.Z,{id:"modal-modal-title",variant:"h4",component:"h2",children:"Create New Offer"}),(0,k.jsx)("div",{style:{padding:"10px",backgroundColor:"white",borderRadius:"10px"},children:(0,k.jsxs)(I.ZP,{container:!0,spacing:2,children:[(0,k.jsx)(I.ZP,{item:!0,xs:6,children:(0,k.jsx)(M.Z,{label:"Offer Code",name:"offercode",value:ae.code,disabled:!0,fullWidth:!0,required:!0})}),(0,k.jsx)(I.ZP,{item:!0,xs:6,children:(0,k.jsxs)(U.Z,{fullWidth:!0,children:[(0,k.jsx)(_.Z,{id:"demo-simple-select-label",children:"Offer Percentage Type"}),(0,k.jsxs)(L.Z,{labelId:"demo-simple-select-label",id:"demo-simple-select",value:ae.type,label:"Offer Percentage Type",name:"type",onChange:Ie,error:he.type,required:!0,children:[(0,k.jsx)(Z.Z,{value:"PERCENTAGE",children:"Percentage Discount"}),(0,k.jsx)(Z.Z,{value:"VALUE",children:"Value Discount"})]}),he.type&&(0,k.jsx)(F.Z,{sx:{color:"red"},children:"Please Select Offer Type"})]})}),(0,k.jsx)(I.ZP,{item:!0,xs:ve?6:12,children:(0,k.jsx)(M.Z,{label:"PERCENTAGE"===ae.type?"Percentage":"Value",placeholder:"PERCENTAGE"===ae.type?"ENTER PERCENTAGE":"ENTER VALUE",name:"typeValue",type:"number",onChange:Ie,value:ae.typeValue,fullWidth:!0,error:he.typeValue,helperText:he.typeValue?"Enter ".concat("PERCENTAGE"===ae.type?"percentage":"value"):null,required:!0})}),ve&&(0,k.jsx)(I.ZP,{item:!0,xs:ve?6:4,children:(0,k.jsxs)(U.Z,{fullWidth:!0,children:[(0,k.jsx)(_.Z,{id:"demo-simple-select-label",children:"Offer Status"}),(0,k.jsxs)(L.Z,{labelId:"demo-simple-select-label",id:"demo-simple-select",value:ae.status,label:"Offer Status",name:"status",onChange:Ie,error:he.status,required:!0,children:[(0,k.jsx)(Z.Z,{value:"DRAFT",children:"Draft"}),(0,k.jsx)(Z.Z,{value:"LIVE",children:"Live"}),(0,k.jsx)(Z.Z,{value:"PAST",children:"Past"})]}),he.status&&(0,k.jsx)(F.Z,{sx:{color:"red"},children:"Please Select Offer Status"})]})}),(0,k.jsx)(I.ZP,{item:!0,xs:12,children:(0,k.jsx)(M.Z,{label:"Description",multiline:!0,rows:3,type:"text",name:"description",value:ae.description,onChange:Ie,fullWidth:!0})})]})})]}),(0,k.jsxs)("div",{style:{display:"flex",flexDirection:"row",gap:"10px",justifyContent:"flex-end",padding:"10px"},children:[(0,k.jsx)(p.Z,{variant:"contained",onClick:ve?_e:Ue,color:"primary",children:ve?"Update":"Save"}),(0,k.jsx)(p.Z,{variant:"outlined",onClick:function(){ve&&(oe(ue),me(!1)),C(!1),be({})},children:"Cancel"})]})]})}),(0,k.jsx)("div",{style:{marginTop:"20px"},children:(0,k.jsx)(ee.ZP,{columns:Le,data:Fe,pagination:!0,progressPending:S})}),(0,k.jsxs)(H.Z,{open:Ae,onClose:function(){return Me(!1)},children:[(0,k.jsx)(Y.Z,{children:"Remove Offer"}),(0,k.jsx)(z.Z,{children:"Are you sure you want to delete this offer?"}),(0,k.jsxs)(B.Z,{children:[(0,k.jsx)(p.Z,{onClick:function(){return Me(!1)},children:"Cancel"}),(0,k.jsx)(p.Z,{onClick:function(){var e=localStorage.getItem(Q._.keyUserToken),t=(0,K.sw)(e),r={headers:{Authorization:"Bearer ".concat(t)}};J.ZP.post(J.Hv.offer.delete,{id:ae.id},r).then((function(e){e&&(j("Offer deleted successfully!",{variant:"success"}),Me(!1),oe(ue),pe(ce),Ve())})).catch((function(e){j(e.msg||e.error,{variant:"error"})}))},variant:"contained",color:"error",children:"Delete"})]})]})]})}},65661:function(e,t,r){"use strict";var n=r(87462),i=r(63366),s=r(72791),a=r(28182),o=r(94419),l=r(4567),u=r(66934),c=r(31402),d=r(17673),f=r(85090),h=r(80184),p=["className","id"],x=(0,u.ZP)(l.Z,{name:"MuiDialogTitle",slot:"Root",overridesResolver:function(e,t){return t.root}})({padding:"16px 24px",flex:"0 0 auto"}),Z=s.forwardRef((function(e,t){var r=(0,c.Z)({props:e,name:"MuiDialogTitle"}),l=r.className,u=r.id,Z=(0,i.Z)(r,p),v=r,m=function(e){var t=e.classes;return(0,o.Z)({root:["root"]},d.a,t)}(v),j=s.useContext(f.Z).titleId,g=void 0===j?u:j;return(0,h.jsx)(x,(0,n.Z)({component:"h2",className:(0,a.Z)(m.root,l),ownerState:v,ref:t,variant:"h6",id:null!=u?u:g},Z))}));t.Z=Z},83027:function(e){e.exports=function(){"use strict";var e="minute",t=/[+-]\d\d(?::?\d\d)?/g,r=/([+-]|\d\d)/g;return function(n,i,s){var a=i.prototype;s.utc=function(e){return new i({date:e,utc:!0,args:arguments})},a.utc=function(t){var r=s(this.toDate(),{locale:this.$L,utc:!0});return t?r.add(this.utcOffset(),e):r},a.local=function(){return s(this.toDate(),{locale:this.$L,utc:!1})};var o=a.parse;a.parse=function(e){e.utc&&(this.$u=!0),this.$utils().u(e.$offset)||(this.$offset=e.$offset),o.call(this,e)};var l=a.init;a.init=function(){if(this.$u){var e=this.$d;this.$y=e.getUTCFullYear(),this.$M=e.getUTCMonth(),this.$D=e.getUTCDate(),this.$W=e.getUTCDay(),this.$H=e.getUTCHours(),this.$m=e.getUTCMinutes(),this.$s=e.getUTCSeconds(),this.$ms=e.getUTCMilliseconds()}else l.call(this)};var u=a.utcOffset;a.utcOffset=function(n,i){var s=this.$utils().u;if(s(n))return this.$u?0:s(this.$offset)?u.call(this):this.$offset;if("string"==typeof n&&(n=function(e){void 0===e&&(e="");var n=e.match(t);if(!n)return null;var i=(""+n[0]).match(r)||["-",0,0],s=i[0],a=60*+i[1]+ +i[2];return 0===a?0:"+"===s?a:-a}(n),null===n))return this;var a=Math.abs(n)<=16?60*n:n,o=this;if(i)return o.$offset=a,o.$u=0===n,o;if(0!==n){var l=this.$u?this.toDate().getTimezoneOffset():-1*this.utcOffset();(o=this.local().add(a+l,e)).$offset=a,o.$x.$localOffset=l}else o=this.utc();return o};var c=a.format;a.format=function(e){var t=e||(this.$u?"YYYY-MM-DDTHH:mm:ss[Z]":"");return c.call(this,t)},a.valueOf=function(){var e=this.$utils().u(this.$offset)?0:this.$offset+(this.$x.$localOffset||this.$d.getTimezoneOffset());return this.$d.valueOf()-6e4*e},a.isUTC=function(){return!!this.$u},a.toISOString=function(){return this.toDate().toISOString()},a.toString=function(){return this.toDate().toUTCString()};var d=a.toDate;a.toDate=function(e){return"s"===e&&this.$offset?s(this.format("YYYY-MM-DD HH:mm:ss:SSS")).toDate():d.call(this)};var f=a.diff;a.diff=function(e,t,r){if(e&&this.$u===e.$u)return f.call(this,e,t,r);var n=this.local(),i=s(e).local();return f.call(n,i,t,r)}}}()}}]);
//# sourceMappingURL=844.505ef9af.chunk.js.map