(self.webpackChunk_accounting_billing_stacklab=self.webpackChunk_accounting_billing_stacklab||[]).push([[950],{32869:function(e,n,t){"use strict";t.d(n,{Ds:function(){return r.Ds}});var r=t(58518);t(58764)},74950:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return A}});var r=t(6907),a=t(4942),o=t(1413),i=t(93433),c=t(74165),s=t(15861),u=t(29439),l=t(72791),d=t(89164),f=t(4567),v=t(57088),p=t(18406),h=t(99615),Z=t(52073),m=t(32869),x=t(43513),g=t(5403),k=t(48550),y=t(85771),S=t(52739),b=t(13239),w=t(63466),j=t(64554),C=t(30439),D=t(8976),P=t(31009),_=t(38996),M=t(80184),F=localStorage.getItem(Z._.keyUserToken),I=(0,p.sw)(F),z={headers:{Authorization:"Bearer ".concat(I)}};function E(){var e=(0,v.K$)(),n=(0,D.E)().user,t=(0,m.Ds)().enqueueSnackbar,r=(0,l.useState)(!1),p=(0,u.Z)(r,2),Z=p[0],F=p[1],I=(0,l.useState)([]),E=(0,u.Z)(I,2),A=E[0],L=E[1],R=(0,l.useState)(!1),N=(0,u.Z)(R,2),q=N[0],U=N[1],W=(0,l.useState)((new Date).getMonth()+1),B=(0,u.Z)(W,2),H=B[0],O=B[1],T=(0,l.useState)((new Date).getFullYear()),Y=(0,u.Z)(T,2),G=Y[0],K=Y[1],V=(0,l.useState)(""),$=(0,u.Z)(V,2),J=$[0],Q=$[1],X=function(){var e=(0,s.Z)((0,c.Z)().mark((function e(){var n;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,h.ZP.post(h.Hv.employee.list,{},z);case 3:(n=e.sent)&&(F(!1),L(n.data.data)),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),t("Failed to fetch employees!",{variant:"error"}),F(!1);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();(0,l.useEffect)((function(){F(!0),X()}),[]);var ee=new Date(G,H-1,1),ne=new Date(G,H,0).getDate(),te=[{name:"Employee Names",selector:function(e){return e.name},sortable:"true",width:"150px"}].concat((0,i.Z)(Array.from({length:ne},(function(e,t){var r=new Date(ee.getFullYear(),ee.getMonth(),t+1).toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"});return{name:r,center:"true",cell:function(e){var t,a;return(0,M.jsx)(y.Z,{label:e.attendance&&"absent"===e.attendance[r]?"A":"P",color:e.attendance&&"absent"===e.attendance[r]?"error":"success",onClick:function(){return re(e._id,r,e.attendance&&e.attendance[r])},disabled:!(null!==n&&void 0!==n&&null!==(t=n.permissions)&&void 0!==t&&null!==(a=t.employee)&&void 0!==a&&a.u)})}}})))),re=function(){var e=(0,s.Z)((0,c.Z)().mark((function e(n,r,i){var s,u,l;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return U(!0),s=void 0===i?"present":i,u=A.map((function(e){if(e._id===n){var t=(0,o.Z)((0,o.Z)({},e.attendance),{},(0,a.Z)({},r,"present"===s?"absent":"present"));return(0,o.Z)((0,o.Z)({},e),{},{attendance:t})}return e})),l=u.find((function(e){return e._id===n})),console.log("\ud83d\ude80 ~ handleAttendance ~ updatedEmployee:",l.attendance),e.prev=5,e.next=8,h.ZP.post(h.Hv.employee.markAttendance,{employeeId:l._id,attendance:l.attendance},z);case 8:e.sent&&(t("Attendance updated!",{variant:"success"}),L(u),U(!1)),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(5),U(!1),t("Failed to update attendance!",{variant:"error"});case 16:case 17:case"end":return e.stop()}}),e,null,[[5,12]])})));return function(n,t,r){return e.apply(this,arguments)}}(),ae=A.filter((function(e){var n;return null===e||void 0===e||null===(n=e.name)||void 0===n?void 0:n.toLowerCase().includes(null===J||void 0===J?void 0:J.toLowerCase())}));return(0,M.jsxs)(d.Z,{maxWidth:!e.themeStretch&&"xl",children:[(0,M.jsx)(S.Z,{sx:{color:"#fff",zIndex:function(e){return e.zIndex.drawer+1}},open:q,onClick:function(){return U(!1)},children:(0,M.jsx)(b.Z,{color:"inherit"})}),(0,M.jsx)(f.Z,{variant:"h4",children:"Employee Attendance"}),(0,M.jsxs)("div",{style:{display:"flex",flexDirection:"row",gap:"10px",alignItems:"center"},children:[(0,M.jsx)(k.Z,{size:"small",type:"text",placeholder:"Search Employee",value:J,onChange:function(e){return Q(e.target.value)},InputProps:{startAdornment:(0,M.jsx)(w.Z,{position:"start",children:(0,M.jsx)(g.Z,{})})}}),(0,M.jsxs)(j.Z,{sx:{display:"flex",flexDirection:"row",gap:"5px",alignItems:"center"},children:[(0,M.jsx)(C.Z,{onClick:function(){O((function(e){return 1===e?(K((function(e){return e-1})),12):e-1}))},children:(0,M.jsx)(P.Z,{})}),(0,M.jsx)(f.Z,{variant:"caption",children:new Date(G,H-1,1).toLocaleDateString("en-US",{month:"long",year:"numeric"})}),(0,M.jsx)(C.Z,{onClick:function(){O((function(e){return 12===e?(K((function(e){return e+1})),1):e+1}))},children:(0,M.jsx)(_.Z,{})})]})]}),(0,M.jsx)(x.ZP,{columns:te,data:ae,progressPending:Z,pagination:!0})]})}function A(){return(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)(r.ql,{children:(0,M.jsx)("title",{children:" Dashboard : Employee Attendance"})}),(0,M.jsx)(E,{})]})}},31009:function(e,n,t){"use strict";var r=t(64836);n.Z=void 0;var a=r(t(45649)),o=t(80184);n.Z=(0,a.default)((0,o.jsx)("path",{d:"M15.41 7.41 14 6l-6 6 6 6 1.41-1.41L10.83 12z"}),"ChevronLeft")},38996:function(e,n,t){"use strict";var r=t(64836);n.Z=void 0;var a=r(t(45649)),o=t(80184);n.Z=(0,a.default)((0,o.jsx)("path",{d:"M10 6 8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"}),"ChevronRight")},5403:function(e,n,t){"use strict";var r=t(64836);n.Z=void 0;var a=r(t(45649)),o=t(80184);n.Z=(0,a.default)((0,o.jsx)("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14"}),"Search")},45649:function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"default",{enumerable:!0,get:function(){return r.createSvgIcon}});var r=t(54421)},13239:function(e,n,t){"use strict";t.d(n,{Z:function(){return I}});var r=t(30168),a=t(63366),o=t(87462),i=t(72791),c=t(28182),s=t(94419),u=t(52554),l=t(14036),d=t(31402),f=t(66934),v=t(75878),p=t(21217);function h(e){return(0,p.Z)("MuiCircularProgress",e)}(0,v.Z)("MuiCircularProgress",["root","determinate","indeterminate","colorPrimary","colorSecondary","svg","circle","circleDeterminate","circleIndeterminate","circleDisableShrink"]);var Z,m,x,g,k,y,S,b,w=t(80184),j=["className","color","disableShrink","size","style","thickness","value","variant"],C=44,D=(0,u.F4)(k||(k=Z||(Z=(0,r.Z)(["\n  0% {\n    transform: rotate(0deg);\n  }\n\n  100% {\n    transform: rotate(360deg);\n  }\n"])))),P=(0,u.F4)(y||(y=m||(m=(0,r.Z)(["\n  0% {\n    stroke-dasharray: 1px, 200px;\n    stroke-dashoffset: 0;\n  }\n\n  50% {\n    stroke-dasharray: 100px, 200px;\n    stroke-dashoffset: -15px;\n  }\n\n  100% {\n    stroke-dasharray: 100px, 200px;\n    stroke-dashoffset: -125px;\n  }\n"])))),_=(0,f.ZP)("span",{name:"MuiCircularProgress",slot:"Root",overridesResolver:function(e,n){var t=e.ownerState;return[n.root,n[t.variant],n["color".concat((0,l.Z)(t.color))]]}})((function(e){var n=e.ownerState,t=e.theme;return(0,o.Z)({display:"inline-block"},"determinate"===n.variant&&{transition:t.transitions.create("transform")},"inherit"!==n.color&&{color:(t.vars||t).palette[n.color].main})}),(function(e){return"indeterminate"===e.ownerState.variant&&(0,u.iv)(S||(S=x||(x=(0,r.Z)(["\n      animation: "," 1.4s linear infinite;\n    "]))),D)})),M=(0,f.ZP)("svg",{name:"MuiCircularProgress",slot:"Svg",overridesResolver:function(e,n){return n.svg}})({display:"block"}),F=(0,f.ZP)("circle",{name:"MuiCircularProgress",slot:"Circle",overridesResolver:function(e,n){var t=e.ownerState;return[n.circle,n["circle".concat((0,l.Z)(t.variant))],t.disableShrink&&n.circleDisableShrink]}})((function(e){var n=e.ownerState,t=e.theme;return(0,o.Z)({stroke:"currentColor"},"determinate"===n.variant&&{transition:t.transitions.create("stroke-dashoffset")},"indeterminate"===n.variant&&{strokeDasharray:"80px, 200px",strokeDashoffset:0})}),(function(e){var n=e.ownerState;return"indeterminate"===n.variant&&!n.disableShrink&&(0,u.iv)(b||(b=g||(g=(0,r.Z)(["\n      animation: "," 1.4s ease-in-out infinite;\n    "]))),P)})),I=i.forwardRef((function(e,n){var t=(0,d.Z)({props:e,name:"MuiCircularProgress"}),r=t.className,i=t.color,u=void 0===i?"primary":i,f=t.disableShrink,v=void 0!==f&&f,p=t.size,Z=void 0===p?40:p,m=t.style,x=t.thickness,g=void 0===x?3.6:x,k=t.value,y=void 0===k?0:k,S=t.variant,b=void 0===S?"indeterminate":S,D=(0,a.Z)(t,j),P=(0,o.Z)({},t,{color:u,disableShrink:v,size:Z,thickness:g,value:y,variant:b}),I=function(e){var n=e.classes,t=e.variant,r=e.color,a=e.disableShrink,o={root:["root",t,"color".concat((0,l.Z)(r))],svg:["svg"],circle:["circle","circle".concat((0,l.Z)(t)),a&&"circleDisableShrink"]};return(0,s.Z)(o,h,n)}(P),z={},E={},A={};if("determinate"===b){var L=2*Math.PI*((C-g)/2);z.strokeDasharray=L.toFixed(3),A["aria-valuenow"]=Math.round(y),z.strokeDashoffset="".concat(((100-y)/100*L).toFixed(3),"px"),E.transform="rotate(-90deg)"}return(0,w.jsx)(_,(0,o.Z)({className:(0,c.Z)(I.root,r),style:(0,o.Z)({width:Z,height:Z},E,m),ownerState:P,ref:n,role:"progressbar"},A,D,{children:(0,w.jsx)(M,{className:I.svg,ownerState:P,viewBox:"".concat(22," ").concat(22," ").concat(C," ").concat(C),children:(0,w.jsx)(F,{className:I.circle,style:z,ownerState:P,cx:C,cy:C,r:(C-g)/2,fill:"none",strokeWidth:g})})}))}))},54421:function(e,n,t){"use strict";t.r(n),t.d(n,{capitalize:function(){return a.Z},createChainedFunction:function(){return o},createSvgIcon:function(){return i.Z},debounce:function(){return c.Z},deprecatedPropType:function(){return s},isMuiElement:function(){return u.Z},ownerDocument:function(){return l.Z},ownerWindow:function(){return d.Z},requirePropFactory:function(){return f},setRef:function(){return v},unstable_ClassNameGenerator:function(){return y},unstable_useEnhancedEffect:function(){return p.Z},unstable_useId:function(){return h.Z},unsupportedProp:function(){return Z},useControlled:function(){return m.Z},useEventCallback:function(){return x.Z},useForkRef:function(){return g.Z},useIsFocusVisible:function(){return k.Z}});var r=t(55902),a=t(14036),o=t(78949).Z,i=t(74223),c=t(83199);var s=function(e,n){return function(){return null}},u=t(19103),l=t(98301),d=t(17602);t(87462);var f=function(e,n){return function(){return null}},v=t(62971).Z,p=t(40162),h=t(67384);var Z=function(e,n,t,r,a){return null},m=t(98278),x=t(89683),g=t(42071),k=t(23031),y={configure:function(e){r.Z.configure(e)}}},64836:function(e){e.exports=function(e){return e&&e.__esModule?e:{default:e}},e.exports.__esModule=!0,e.exports.default=e.exports}}]);
//# sourceMappingURL=950.d0510573.chunk.js.map