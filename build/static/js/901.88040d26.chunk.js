"use strict";(self.webpackChunk_accounting_billing_stacklab=self.webpackChunk_accounting_billing_stacklab||[]).push([[901],{32869:function(e,n,t){t.d(n,{Ds:function(){return r.Ds}});var r=t(58518);t(58764)},60901:function(e,n,t){t.r(n),t.d(n,{default:function(){return U}});var r=t(6907),i=t(4942),o=t(1413),a=t(74165),s=t(15861),l=t(29439),c=t(72791),u=t(64554),d=t(89164),m=t(4567),p=t(57088),h=t(30439),v=t(71715),b=t(82626),f=t(48550),x=t(63466),Z=t(73590),g=t(61889),j=t(5574),y=t(65661),C=t(39157),k=t(97123),N=t(26759),w=t(42419),S=t(5403),A=t(42716),P=t(18406),D=t(99615),_=t(52073),I=t(32869),T=t(43513),M=t(8976),z=t(80184),R={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"70%",bgcolor:"background.paper",borderRadius:"10px",boxShadow:24,p:2,backgroundColor:"#E6F2FF",height:"auto",overflow:"auto"},B={id:"",name:"",email:"",mobileNumber:"",type:"",company:{name:"",gstNumber:"",billingAddress:{line1:"",line2:"",city:"",state:"",pincode:""},shippingAddress:{line1:"",line2:"",city:"",state:"",pincode:""}}},E={name:!1,email:!1,mobileNumber:!1,type:!1,company:{name:!1,gstNumber:!1,billingAddress:{line1:!1,line2:!1,city:!1,state:!1,pincode:!1},shippingAddress:{line1:!1,line2:!1,city:!1,state:!1,pincode:!1}}};function F(){var e,n,t=(0,p.K$)(),r=(0,I.Ds)().enqueueSnackbar,F=(0,M.E)().user,U=(0,c.useState)(!1),H=(0,l.Z)(U,2),L=H[0],q=H[1],O=(0,c.useState)(!1),W=(0,l.Z)(O,2),$=W[0],V=W[1],K=(0,c.useState)([]),G=(0,l.Z)(K,2),J=G[0],Q=G[1],X=(0,c.useState)(B),Y=(0,l.Z)(X,2),ee=Y[0],ne=Y[1],te=(0,c.useState)(E),re=(0,l.Z)(te,2),ie=re[0],oe=re[1],ae=(0,c.useState)(!1),se=(0,l.Z)(ae,2),le=se[0],ce=se[1],ue=(0,c.useState)({}),de=(0,l.Z)(ue,2),me=de[0],pe=de[1],he=(0,c.useState)(""),ve=(0,l.Z)(he,2),be=ve[0],fe=ve[1],xe=(0,c.useState)(null),Ze=(0,l.Z)(xe,2),ge=Ze[0],je=Ze[1],ye=Boolean(ge),Ce=(0,c.useState)(!1),ke=(0,l.Z)(Ce,2),Ne=ke[0],we=ke[1],Se=function(){return q(!1)},Ae=function(){var e=(0,s.Z)((0,a.Z)().mark((function e(){var n,t,i;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=localStorage.getItem(_._.keyUserToken),t=(0,P.sw)(n),e.next=5,D.ZP.post(D.Hv.customer.list,{},{headers:{Authorization:"Bearer ".concat(t)}});case 5:(i=e.sent)&&(V(!1),Q(i.data.data)),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),r("Failed to fetch customers!",{variant:"error"}),V(!1);case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}();(0,c.useEffect)((function(){V(!0),Ae()}),[]);var Pe=function(e){var n=e.target,t=n.name,r=n.value;ne((function(e){return(0,o.Z)((0,o.Z)({},e),{},(0,i.Z)({},t,r))})),oe((function(e){return(0,o.Z)((0,o.Z)({},e),{},(0,i.Z)({},t,!1))}))},De=function(){var e=(0,s.Z)((0,a.Z)().mark((function e(){var n,t,i;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=(0,o.Z)({},E),ee.name?n.name=!1:n.name=!0,ee.mobileNumber&&/^[0-9]*$/.test(ee.mobileNumber)&&10===ee.mobileNumber.length?n.mobileNumber=!1:n.mobileNumber=!0,console.log({newErrors:n}),!Object.values(n).some((function(e){return!0===e}))){e.next=7;break}return oe(n),e.abrupt("return");case 7:t=localStorage.getItem(_._.keyUserToken),i=(0,P.sw)(t),D.ZP.post(D.Hv.customer.add,ee,{headers:{Authorization:"Bearer ".concat(i)}}).then((function(e){r("Customer created successfully!",{variant:"success"}),Se(),oe({name:!1,email:!1,mobileNumber:!1,type:!1,company:{name:!1,gstNumber:!1,billingAddress:{line1:!1,line2:!1,city:!1,state:!1,pincode:!1},shippingAddress:{line1:!1,line2:!1,city:!1,state:!1,pincode:!1}}}),ne({id:"",name:"",email:"",mobileNumber:"",type:"",company:{name:"",gstNumber:"",billingAddress:{line1:"",line2:"",city:"",state:"",pincode:""},shippingAddress:{line1:"",line2:"",city:"",state:"",pincode:""}}}),Ae()})).catch((function(e){r(e.error||e.msg,{variant:"error"})}));case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),_e=function(){var e=(0,s.Z)((0,a.Z)().mark((function e(){var n,t,i;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=(0,o.Z)({},E),ee.name||(n.name=!0),ee.mobileNumber||(n.mobileNumber=!0),Object.values(n).some((function(e){return!0===e}))?oe(n):(t=localStorage.getItem(_._.keyUserToken),i=(0,P.sw)(t),D.ZP.post(D.Hv.customer.update,ee,{headers:{Authorization:"Bearer ".concat(i)}}).then((function(e){r("Customer updated successfully!",{variant:"success"}),Se(),oe(E),ne(B),Ae()})).catch((function(e){r(e.error||e.msg,{variant:"error"})})));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Ie=[{name:"Name",selector:function(e){return e.name},sortable:!0},{name:"Mobile Number",selector:function(e){return null!==e&&void 0!==e&&e.mobileNumber?e.mobileNumber:"N/A"},sortable:!0},{name:"Actions",cell:function(e){var n,t;return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(h.Z,{disabled:!(null!==F&&void 0!==F&&null!==(n=F.permissions)&&void 0!==n&&null!==(t=n.customer)&&void 0!==t&&t.u),onClick:function(n){je(n.currentTarget),pe(e)},style:{color:P.$_.actionButton},variant:"outlined",endIcon:(0,z.jsx)(N.Z,{}),children:"Action"}),(0,z.jsxs)(v.Z,{id:"basic-menu",anchorEl:ge,open:ye,onClose:function(){je(null),pe({})},MenuListProps:{"aria-labelledby":"basic-button"},children:[(0,z.jsx)(b.Z,{onClick:function(){return function(){ce(!0),je(null);var e={id:me._id,name:me.name,mobileNumber:me.mobileNumber.slice(3)};ne(e),q(!0)}()},children:"Edit Details"}),(0,z.jsx)(b.Z,{onClick:function(){return ne((function(e){return(0,o.Z)((0,o.Z)({},e),{},{id:me._id})})),we(!0),void je(null)},children:"Remove"})]})]})}}],Te=J.filter((function(e){var n;return null===e||void 0===e||null===(n=e.name)||void 0===n?void 0:n.toLowerCase().includes(null===be||void 0===be?void 0:be.toLowerCase())}));return(0,z.jsxs)(d.Z,{maxWidth:!t.themeStretch&&"xl",children:[(0,z.jsx)(m.Z,{variant:"h4",children:" Customer Master "}),(0,z.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginTop:"20px"},children:[(0,z.jsx)(f.Z,{size:"small",onChange:function(e){return fe(e.target.value)},type:"text",placeholder:"Search",InputProps:{endAdornment:(0,z.jsx)(x.Z,{position:"end",children:(0,z.jsx)(S.Z,{})})}}),(null===F||void 0===F||null===(e=F.permissions)||void 0===e||null===(n=e.customer)||void 0===n?void 0:n.u)&&(0,z.jsx)(h.Z,{startIcon:(0,z.jsx)(w.Z,{}),color:"primary",variant:"contained",onClick:function(){q(!0),ce(!1)},children:"ADD CUSTOMER"})]}),(0,z.jsx)(Z.Z,{open:L,"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:(0,z.jsxs)(u.Z,{sx:R,children:[(0,z.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"10px"},children:[(0,z.jsx)(m.Z,{id:"modal-modal-title",variant:"h4",component:"h2",children:"Basic Details"}),(0,z.jsx)("div",{style:{padding:"10px",backgroundColor:"white",borderRadius:"10px"},children:(0,z.jsxs)(g.ZP,{container:!0,spacing:2,children:[(0,z.jsx)(g.ZP,{item:!0,xs:6,children:(0,z.jsx)(f.Z,{label:"Name",name:"name",value:ee.name,onChange:Pe,error:ie.name,helperText:ie.name?"Invalid customer name!..":null,fullWidth:!0,required:!0})}),(0,z.jsx)(g.ZP,{item:!0,xs:6,children:(0,z.jsx)(f.Z,{label:"Mobile Number",name:"mobileNumber",value:ee.mobileNumber,onChange:Pe,error:ie.mobileNumber,helperText:ie.mobileNumber?"Invalid customer mobile number!..":null,fullWidth:!0,required:!0,inputProps:{maxLength:10},InputProps:{startAdornment:(0,z.jsxs)(x.Z,{position:"start",children:[(0,z.jsx)(A.Z,{})," +91"]})}})})]})})]}),(0,z.jsxs)("div",{style:{display:"flex",flexDirection:"row",gap:"10px",justifyContent:"flex-end",padding:"10px"},children:[(0,z.jsx)(h.Z,{variant:"contained",color:"primary",onClick:le?_e:De,children:le?"Update":"Save"}),(0,z.jsx)(h.Z,{variant:"outlined",onClick:function(){oe(E),le&&(ne(B),ce(!1)),q(!1),pe({})},children:"Cancel"})]})]})}),(0,z.jsx)("div",{style:{marginTop:"20px"},children:(0,z.jsx)(T.ZP,{columns:Ie,data:Te,pagination:!0,progressPending:$})}),(0,z.jsxs)(j.Z,{open:Ne,onClose:function(){return we(!1)},children:[(0,z.jsx)(y.Z,{children:"Remove Customer"}),(0,z.jsx)(C.Z,{children:"Are you sure you want to delete this customer?"}),(0,z.jsxs)(k.Z,{children:[(0,z.jsx)(h.Z,{onClick:function(){return we(!1)},children:"Cancel"}),(0,z.jsx)(h.Z,{onClick:function(){var e=localStorage.getItem(_._.keyUserToken),n=(0,P.sw)(e),t={headers:{Authorization:"Bearer ".concat(n)}};D.ZP.post(D.Hv.customer.delete,{id:ee.id},t).then((function(e){e&&(r("Customer deleted successfully!",{variant:"success"}),we(!1),ne(B),Ae())})).catch((function(e){r(e.msg||e.error,{variant:"error"})}))},variant:"contained",color:"error",children:"Delete"})]})]})]})}function U(){return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(r.ql,{children:(0,z.jsx)("title",{children:" Dashboard : Customer"})}),(0,z.jsx)(F,{})]})}},42419:function(e,n,t){var r=t(64836);n.Z=void 0;var i=r(t(45649)),o=t(80184);n.Z=(0,i.default)((0,o.jsx)("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6z"}),"Add")},42716:function(e,n,t){var r=t(64836);n.Z=void 0;var i=r(t(45649)),o=t(80184);n.Z=(0,i.default)((0,o.jsx)("path",{d:"M6.62 10.79c1.44 2.83 3.76 5.14 6.59 6.59l2.2-2.2c.27-.27.67-.36 1.02-.24 1.12.37 2.33.57 3.57.57.55 0 1 .45 1 1V20c0 .55-.45 1-1 1-9.39 0-17-7.61-17-17 0-.55.45-1 1-1h3.5c.55 0 1 .45 1 1 0 1.25.2 2.45.57 3.57.11.35.03.74-.25 1.02z"}),"Phone")},5403:function(e,n,t){var r=t(64836);n.Z=void 0;var i=r(t(45649)),o=t(80184);n.Z=(0,i.default)((0,o.jsx)("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14"}),"Search")},65661:function(e,n,t){var r=t(87462),i=t(63366),o=t(72791),a=t(28182),s=t(94419),l=t(4567),c=t(66934),u=t(31402),d=t(17673),m=t(85090),p=t(80184),h=["className","id"],v=(0,c.ZP)(l.Z,{name:"MuiDialogTitle",slot:"Root",overridesResolver:function(e,n){return n.root}})({padding:"16px 24px",flex:"0 0 auto"}),b=o.forwardRef((function(e,n){var t=(0,u.Z)({props:e,name:"MuiDialogTitle"}),l=t.className,c=t.id,b=(0,i.Z)(t,h),f=t,x=function(e){var n=e.classes;return(0,s.Z)({root:["root"]},d.a,n)}(f),Z=o.useContext(m.Z).titleId,g=void 0===Z?c:Z;return(0,p.jsx)(v,(0,r.Z)({component:"h2",className:(0,a.Z)(x.root,l),ownerState:f,ref:n,variant:"h6",id:null!=c?c:g},b))}));n.Z=b}}]);
//# sourceMappingURL=901.88040d26.chunk.js.map