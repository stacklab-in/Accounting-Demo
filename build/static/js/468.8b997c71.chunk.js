"use strict";(self.webpackChunk_accounting_billing_stacklab=self.webpackChunk_accounting_billing_stacklab||[]).push([[468],{32869:function(e,t,n){n.d(t,{Ds:function(){return r.Ds}});var r=n(58518);n(58764)},12468:function(e,t,n){n.r(t),n.d(t,{default:function(){return z}});var r=n(1413),a=n(74165),o=n(15861),s=n(29439),l=n(30439),i=n(89164),c=n(4567),u=n(36314),d=n(71715),p=n(82626),f=n(48550),x=n(63466),h=n(64554),v=n(6907),b=n(57088),m=n(18406),Z=n(26759),g=n(72791),j=n(52073),D=n(99615),k=n(32869),y=n(43513),C=n(3746),_=n(5403),w=n(57689),M=n(38072),P=n(97892),S=n.n(P),T=n(71652),A=n(23937),B=n(24750),I=n(34045),L=n(35125),Y=(n(31052),n(64802)),F=n(80184);function z(){var e=(0,b.K$)(),t=(0,g.useState)(!1),n=(0,s.Z)(t,2),P=n[0],z=n[1],H=(0,g.useState)([]),E=(0,s.Z)(H,2),G=E[0],O=E[1],R=(0,g.useState)([]),$=(0,s.Z)(R,2),q=($[0],$[1]),U=(0,g.useState)(""),V=(0,s.Z)(U,2),W=V[0],K=V[1],N=(0,k.Ds)().enqueueSnackbar,J=(0,g.useState)(null),Q=(0,s.Z)(J,2),X=Q[0],ee=Q[1],te=Boolean(X),ne=(0,w.s0)(),re=((0,w.TH)(),function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t,n){var r,o,s;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r=localStorage.getItem(j._.keyUserToken),o=(0,m.sw)(r),e.next=5,D.ZP.post(D.Hv.reports.ledger,{startDate:t,endDate:n},{headers:{Authorization:"Bearer ".concat(o)}});case 5:(s=e.sent)&&(z(!1),O(s.data.data),q(s.data.data)),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),N("Failed to fetch ledgers!",{variant:"error"}),z(!1);case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,n){return e.apply(this,arguments)}}()),ae=(0,g.useState)(S()().startOf("month")),oe=(0,s.Z)(ae,2),se=oe[0],le=oe[1],ie=(0,g.useState)(S()().endOf("month")),ce=(0,s.Z)(ie,2),ue=ce[0],de=ce[1];(0,g.useEffect)((function(){z(!0),se&&ue&&re(se.toDate(),ue.toDate())}),[se,ue]);var pe=[{name:"Account",selector:function(e){return e.account},sortable:!0},{name:"Debit",selector:function(e){return m.MG.format(e.debit)},sortable:"true"},{name:"Credit",selector:function(e){return m.MG.format(e.credit)},sortable:"true"},{name:"Balance",selector:function(e){return m.MG.format(e.balance)},sortable:"true"},{name:"Actions",cell:function(e){return(0,F.jsx)(l.Z,{variant:"outlined",onClick:function(){ne(M.H.dashboard.reports.ledgerDetails,{state:e})},style:{color:m.$_.actionButton},startIcon:(0,F.jsx)(C.Z,{}),children:"View"})},sortable:"true"}],fe=G.filter((function(e){var t;return null===e||void 0===e||null===(t=e.account)||void 0===t?void 0:t.toLowerCase().includes(null===W||void 0===W?void 0:W.toLowerCase())}));return(0,F.jsxs)(i.Z,{maxWidth:!e.themeStretch&&"xl",children:[(0,F.jsx)(v.ql,{children:(0,F.jsx)("title",{children:" Reports: Ledger"})}),(0,F.jsx)(c.Z,{variant:"h4",children:" Ledger "}),(0,F.jsx)("div",{style:{display:"flex",flexDirection:"row",justifyContent:"flex-end",marginTop:"20px"},children:(0,F.jsxs)(u.Z,{children:[(0,F.jsx)(l.Z,{style:{color:m.$_.actionButton},endIcon:(0,F.jsx)(Z.Z,{}),variant:"outlined",onClick:function(e){return ee(e.currentTarget)},children:"ACTIONS"}),(0,F.jsxs)(d.Z,{id:"basic-menu",anchorEl:X,open:te,onClose:function(){console.log("\ud83d\ude80 ~ Ledger ~ endpoints.reports.ledgerDetails:",D.Hv.reports.ledgerDetails),ee(null),q({})},MenuListProps:{"aria-labelledby":"basic-button"},children:[(0,F.jsx)(p.Z,{onClick:function(){},children:"Print"}),(0,F.jsx)(p.Z,{onClick:function(){ee(null);var e=new L.default;e.text("Ledger Report",10,10);var t=fe.map((function(e){return[e.account,e.debit,e.credit,e.balance]}));e.autoTable({head:[["Account","Debit","Credit","Balance"]],body:t}),e.save("ledger_report.pdf")},children:"Download as PDF"}),(0,F.jsx)(p.Z,{onClick:function(){ee(null);var e=fe.map((function(e){return{Account:e.account,Debit:e.debit,Credit:e.credit,Balance:e.balance}})),t=I.P6.book_new(),n=I.P6.json_to_sheet(e);I.P6.book_append_sheet(t,n,"Ledger Report");var r=I.cW(t,{bookType:"xlsx",type:"array"}),a=new Blob([r],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=UTF-8"});(0,Y.saveAs)(a,"ledger_report.xlsx")},children:"Download as Excel"})]})]})}),(0,F.jsxs)("div",{style:{display:"flex",marginTop:"8px",gap:"10px"},children:[(0,F.jsx)(f.Z,{placeholder:"Search",size:"small",value:W,onChange:function(e){return K(e.target.value)},InputProps:{startAdornment:(0,F.jsx)(x.Z,{position:"start",children:(0,F.jsx)(_.Z,{})})}}),(0,F.jsx)("div",{children:(0,F.jsx)(T._,{dateAdapter:B.y,children:(0,F.jsxs)(h.Z,{sx:{display:"flex",flexDirection:"row",gap:"10px",alignItems:"center"},children:[(0,F.jsx)(A.M,{label:"From",format:"DD/MM/YYYY",value:se,slotProps:{textField:{size:"small"}},onChange:function(e){le(e)},renderInput:function(e){return(0,F.jsx)(f.Z,(0,r.Z)({},e))}}),(0,F.jsx)(c.Z,{children:"-"}),(0,F.jsx)(A.M,{label:"To",format:"DD/MM/YYYY",value:ue,slotProps:{textField:{size:"small"}},onChange:function(e){de(e)},renderInput:function(e){return(0,F.jsx)(f.Z,(0,r.Z)({},e))}})]})})})]}),(0,F.jsx)("div",{style:{marginTop:"20px"},children:(0,F.jsx)(y.ZP,{columns:pe,data:fe,pagination:!0,progressPending:P})})]})}},3746:function(e,t,n){var r=n(64836);t.Z=void 0;var a=r(n(45649)),o=n(80184);t.Z=(0,a.default)((0,o.jsx)("path",{d:"M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5M12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5m0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3"}),"Visibility")}}]);
//# sourceMappingURL=468.8b997c71.chunk.js.map