"use strict";(self.webpackChunk_accounting_billing_stacklab=self.webpackChunk_accounting_billing_stacklab||[]).push([[803],{32869:function(e,n,t){t.d(n,{Ds:function(){return r.Ds}});var r=t(58518);t(58764)},54803:function(e,n,t){t.r(n),t.d(n,{default:function(){return O}});var r=t(6907),a=t(93433),i=t(74165),l=t(15861),o=t(29439),s=t(72791),c=t(57088),d=t(43513),u=t(30439),x=t(71715),h=t(82626),f=t(89164),p=t(4567),v=t(93006),m=t(63466),Z=t(5574),j=t(65661),g=t(39157),y=t(97123),b=t(73590),C=t(64554),k=t(68096),A=t(50168),w=t(58406),D=t(5403),S=t(26759),E=t(99615),I=t(52073),N=t(32869),R=t(18406),_=t(24750),T=t(42419),U=t(51612),M=t(97892),z=t.n(M),P=t(57689),q=t(71652),H=t(4919),L=t(27247),B=t(8007),F=t(80184),W={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"50%",bgcolor:"background.paper",borderRadius:"10px",boxShadow:24,p:2,backgroundColor:"#E6F2FF",height:"auto",overflow:"auto"};function G(){var e=(0,c.K$)(),n=(0,N.Ds)().enqueueSnackbar,t=(0,P.s0)(),r=(0,s.useState)(""),M=(0,o.Z)(r,2),G=M[0],O=M[1],V=(0,s.useState)(!1),$=(0,o.Z)(V,2),K=$[0],J=$[1],Q=(0,s.useState)([]),X=(0,o.Z)(Q,2),Y=X[0],ee=X[1],ne=(0,s.useState)((function(){return[z()("2022-04-17"),z()("2022-04-21")]})),te=(0,o.Z)(ne,2),re=te[0],ae=te[1],ie=(0,s.useState)(!1),le=(0,o.Z)(ie,2),oe=le[0],se=le[1],ce=(0,s.useState)(""),de=(0,o.Z)(ce,2),ue=de[0],xe=de[1],he=(0,s.useState)(""),fe=(0,o.Z)(he,2),pe=fe[0],ve=fe[1],me=(0,s.useState)(""),Ze=(0,o.Z)(me,2),je=Ze[0],ge=Ze[1],ye=(0,s.useState)([]),be=(0,o.Z)(ye,2),Ce=be[0],ke=be[1],Ae=(0,s.useState)(null),we=(0,o.Z)(Ae,2),De=we[0],Se=we[1],Ee=(0,s.useState)(!1),Ie=(0,o.Z)(Ee,2),Ne=Ie[0],Re=Ie[1],_e=(0,s.useState)(!1),Te=(0,o.Z)(_e,2),Ue=Te[0],Me=Te[1],ze=(0,s.useState)(null),Pe=(0,o.Z)(ze,2),qe=Pe[0],He=Pe[1],Le=Boolean(qe),Be=(0,s.useState)({}),Fe=(0,o.Z)(Be,2),We=Fe[0],Ge=Fe[1],Oe=(0,s.useState)(!1),Ve=(0,o.Z)(Oe,2),$e=Ve[0],Ke=Ve[1],Je=function(){var e=(0,l.Z)((0,i.Z)().mark((function e(){var t,r,a;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=localStorage.getItem(I._.keyUserToken),r=(0,R.sw)(t),e.next=5,E.ZP.post(E.Hv.user.list,{},{headers:{Authorization:"Bearer ".concat(r)}});case 5:(a=e.sent)&&(J(!1),ee(a.data.data)),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),n("Failed to fetch records!",{variant:"error"}),J(!1);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}(),Qe=function(){t("/dashboard/user/details",{state:We})};(0,s.useEffect)((function(){J(!0),Je()}),[]);var Xe=[{name:"Name",selector:function(e){return e.name}},{name:"Email Address",selector:function(e){return e.email}},{name:"User Role",selector:function(e){return e.roleId.name}},{name:"Status",selector:function(e){return e.isActive?"Active":"Inactive"}},{name:"Added On",selector:function(e){return new Date(e.createdAt).toLocaleDateString("en-GB",{day:"2-digit",month:"long",year:"numeric"})},sortable:"true",width:"220px"},{name:"Actions",cell:function(e){return(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(u.Z,{onClick:function(n){He(n.currentTarget),Ge(e)},style:{color:R.$_.actionButton},variant:"outlined",endIcon:(0,F.jsx)(S.Z,{}),children:"Action"}),(0,F.jsxs)(x.Z,{id:"basic-menu",anchorEl:qe,open:Le,onClose:function(){He(null),Ge({})},MenuListProps:{"aria-labelledby":"basic-button"},children:[(0,F.jsx)(h.Z,{onClick:Qe,children:"Edit User Details"}),(0,F.jsx)(h.Z,{onClick:function(){Ke(!0),He(null)},children:"Delete"})]})]})}}],Ye=Y.filter((function(e){var n;return null===e||void 0===e||null===(n=e.name)||void 0===n?void 0:n.toLowerCase().includes(null===G||void 0===G?void 0:G.toLowerCase())})),en=B.Ry().shape({name:B.Z_().required("Name is required").matches(/^[A-Za-z\s]+$/,"Name must contain only letters and spaces"),email:B.Z_().required("Email is required").email("Invalid email address"),role:B.Z_().required("Role is required")});return(0,F.jsxs)(f.Z,{maxWidth:!e.themeStretch&&"xl",children:[(0,F.jsx)(p.Z,{variant:"h4",children:" User Management "}),(0,F.jsxs)("div",{style:{display:"flex",flexDirection:"flex-end",justifyContent:"space-between",alignItems:"center"},children:[(0,F.jsxs)("div",{style:{display:"flex",justifyContent:"start",alignItems:"center",marginTop:"20px",gap:"10px"},children:[(0,F.jsx)(v.Z,{size:"small",onChange:function(e){return O(e.target.value)},type:"text",placeholder:"Search by name",InputProps:{startAdornment:(0,F.jsx)(m.Z,{position:"start",children:(0,F.jsx)(D.Z,{})})}}),(0,F.jsx)(q._,{dateAdapter:_.y,children:(0,F.jsx)(U.n,{size:"small",label:"Date Range",value:re,onChange:function(e){return ae(e)}})})]}),(0,F.jsx)("div",{children:(0,F.jsx)(u.Z,{startIcon:(0,F.jsx)(T.Z,{}),color:"primary",variant:"contained",onClick:function(){Re(!0),se(!1)},children:"ADD NEW USER"})})]}),(0,F.jsx)("div",{style:{marginTop:"20px"},children:(0,F.jsx)(d.ZP,{columns:Xe,data:Ye,pagination:!0,progressPending:K})}),(0,F.jsxs)(Z.Z,{open:$e,onClose:function(){return Ke(!1)},children:[(0,F.jsx)(j.Z,{children:"Remove User"}),(0,F.jsx)(g.Z,{children:"Are you sure you want to delete this user?"}),(0,F.jsxs)(y.Z,{children:[(0,F.jsx)(u.Z,{onClick:function(){Ke(!1),Ge(null)},children:"Cancel"}),(0,F.jsx)(u.Z,{onClick:function(){console.log("tempdata",We);var e=localStorage.getItem(I._.keyUserToken),t=(0,R.sw)(e),r={headers:{Authorization:"Bearer ".concat(t)}};E.ZP.post(E.Hv.user.delete,{id:We._id},r).then((function(e){e&&(n("User deleted successfully!",{variant:"success"}),Ke(!1),Ge(null),Je())})).catch((function(e){n(e.error||"Something went wrong!",{variant:"error"})}))},variant:"contained",color:"error",children:"Delete"})]})]}),(0,F.jsx)(b.Z,{open:Ne,"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:(0,F.jsxs)(C.Z,{sx:W,children:[(0,F.jsx)("div",{children:(0,F.jsx)(p.Z,{variant:"h5",children:"Invite new members"})}),(0,F.jsxs)("div",{style:{maxHeight:"500px",overflow:"auto"},children:[Ce.length>0&&(0,F.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"10px",borderRadius:"8px",padding:"20px"},children:[(0,F.jsx)("div",{children:(0,F.jsx)(p.Z,{variant:"h6",children:"Added Users"})}),(0,F.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:"20px",flexWrap:"wrap"},children:Ce.map((function(e,n){return(0,F.jsxs)("div",{style:{display:"flex",flexDirection:"row",gap:"5px",justifyContent:"space-between"},children:[(0,F.jsxs)("div",{children:[(0,F.jsx)(p.Z,{variant:"subtitle1",children:"".concat(e.name," - ").concat(e.role," ")}),(0,F.jsx)(p.Z,{variant:"caption",children:e.email})]}),(0,F.jsxs)("div",{children:[(0,F.jsx)(u.Z,{color:"success",onClick:function(){console.log("calling edit"),se(!0),xe(e.name),ve(e.role),ge(e.email),Me(!1),Se(n)},children:(0,F.jsx)(H.Z,{})}),(0,F.jsx)(u.Z,{color:"error",onClick:function(){var e=Ce.filter((function(e,t){return t!==n}));ke(e)},children:(0,F.jsx)(L.Z,{})})]})]},n)}))})]}),!Ue&&(0,F.jsxs)("div",{style:{marginTop:"10px",padding:"20px",display:"flex",flexDirection:"column",gap:"10px",backgroundColor:"white",borderRadius:"8px"},children:[(0,F.jsxs)("div",{style:{display:"flex",flexDirection:"row",gap:"20px"},children:[(0,F.jsx)(v.Z,{type:"text",placeholder:"Enter Name",label:"Name",value:ue,onChange:function(e){return xe(e.target.value)},fullWidth:!0}),(0,F.jsxs)(k.Z,{fullWidth:!0,children:[(0,F.jsx)(A.Z,{id:"demo-simple-select-label",children:"Role"}),(0,F.jsxs)(w.Z,{labelId:"demo-simple-select-label",id:"demo-simple-select",value:pe,onChange:function(e){return ve(e.target.value)},label:"Role",children:[(0,F.jsx)(h.Z,{value:"ADMIN",children:"ADMIN"}),(0,F.jsx)(h.Z,{value:"MANAGER",children:"MANAGER"})]})]})]}),(0,F.jsx)("div",{children:(0,F.jsx)(v.Z,{type:"text",placeholder:"Enter email address",label:"Email Address",value:je,onChange:function(e){return ge(e.target.value)},fullWidth:!0})}),(0,F.jsxs)("div",{style:{display:"flex",justifyContent:"flex-end",gap:"10px"},children:[(0,F.jsx)(u.Z,{variant:"outlined",onClick:function(){se(!1),xe(""),ve(""),ge("")},children:"CANCEL"}),(0,F.jsx)(u.Z,{variant:"contained",color:"primary",onClick:oe?function(){var e=Ce.filter((function(e,n){return n!==De}));e.find((function(e){return e.name===ue}))?n("User already added!",{variant:"error"}):e.find((function(e){return e.email===je}))?n("Email already added!",{variant:"error"}):en.validate({name:ue,email:je,role:pe}).then((function(){Me(!0);var e=Ce.map((function(e,n){return n===De?{name:ue,role:pe,email:je}:e}));ke(e),xe(""),ve(""),ge(""),Se(null)})).catch((function(e){n(e.errors[0],{variant:"error"})}))}:function(){Ce.find((function(e){return e.name===ue}))?n("User already added!",{variant:"error"}):Ce.find((function(e){return e.email===je}))?n("Email already added!",{variant:"error"}):en.validate({name:ue,email:je,role:pe}).then((function(){Me(!0),ke([].concat((0,a.Z)(Ce),[{name:ue,role:pe,email:je}])),xe(""),ve(""),ge("")})).catch((function(e){n(e.errors[0],{variant:"error"})}))},children:oe?"UPDATE":"ADD"})]})]})]}),(0,F.jsx)("div",{style:{padding:"10px"},children:(0,F.jsx)(u.Z,{variant:"outlined",onClick:function(){return Me(!1)},children:"ADD ANOTHER"})}),(0,F.jsxs)("div",{style:{display:"flex",paddingTop:"30px",justifyContent:"flex-end",gap:"10px"},children:[(0,F.jsx)(u.Z,{variant:"outlined",onClick:function(){Re(!1),Me(!1),xe(""),ve(""),ge(""),ke([])},children:"CANCEL"}),(0,F.jsx)(u.Z,{variant:"contained",color:"primary",onClick:function(){console.log(Ce);var e=localStorage.getItem(I._.keyUserToken),t=(0,R.sw)(e),r={headers:{Authorization:"Bearer ".concat(t)}};E.ZP.post(E.Hv.user.invite,{users:Ce},r).then((function(e){e&&(n("Invitation sent successfully!",{variant:"success"}),Re(!1),xe(""),ve(""),ge(""),ke([]),Me(!1))})).catch((function(e){n(e.error||"Something went wrong!",{variant:"error"})}))},children:"SEND INVITATION"})]})]})})]})}function O(){return(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(r.ql,{children:(0,F.jsx)("title",{children:" Dashboard : User"})}),(0,F.jsx)(G,{})]})}},27247:function(e,n,t){var r=t(64836);n.Z=void 0;var a=r(t(45649)),i=t(80184);n.Z=(0,a.default)((0,i.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6zM19 4h-3.5l-1-1h-5l-1 1H5v2h14z"}),"Delete")},4919:function(e,n,t){var r=t(64836);n.Z=void 0;var a=r(t(45649)),i=t(80184);n.Z=(0,a.default)((0,i.jsx)("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.9959.9959 0 0 0-1.41 0l-1.83 1.83 3.75 3.75z"}),"ModeEdit")},65661:function(e,n,t){var r=t(87462),a=t(63366),i=t(72791),l=t(28182),o=t(94419),s=t(4567),c=t(66934),d=t(31402),u=t(17673),x=t(85090),h=t(80184),f=["className","id"],p=(0,c.ZP)(s.Z,{name:"MuiDialogTitle",slot:"Root",overridesResolver:function(e,n){return n.root}})({padding:"16px 24px",flex:"0 0 auto"}),v=i.forwardRef((function(e,n){var t=(0,d.Z)({props:e,name:"MuiDialogTitle"}),s=t.className,c=t.id,v=(0,a.Z)(t,f),m=t,Z=function(e){var n=e.classes;return(0,o.Z)({root:["root"]},u.a,n)}(m),j=i.useContext(x.Z).titleId,g=void 0===j?c:j;return(0,h.jsx)(p,(0,r.Z)({component:"h2",className:(0,l.Z)(Z.root,s),ownerState:m,ref:n,variant:"h6",id:null!=c?c:g},v))}));n.Z=v}}]);
//# sourceMappingURL=803.b641559c.chunk.js.map