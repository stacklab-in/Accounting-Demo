(self.webpackChunk_accounting_billing_stacklab=self.webpackChunk_accounting_billing_stacklab||[]).push([[638],{32869:function(e,t,n){"use strict";n.d(t,{Ds:function(){return r.Ds}});var r=n(58518);n(58764)},65638:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return re}});var r=n(6907),a=n(4942),i=n(74165),o=n(15861),l=n(1413),s=n(29439),c=n(72791),u=n(64554),d=n(89164),p=n(4567),h=n(57088),f=n(30439),m=n(71715),x=n(82626),Z=n(93006),y=n(63466),b=n(68096),g=n(50168),v=n(58406),j=n(73590),k=n(61889),S=n(47071),P=n(85523),C=n(89891),I=n(5574),E=n(65661),D=n(39157),M=n(97123),T=n(26759),A=n(42419),w=n(5403),$=n(18406),N=n(99615),Y=n(52073),R=n(32869),O=n(43513),L=n(71652),_=n(98265),U=n(24750),B=n(51612),H=n(97892),W=n.n(H),F=n(83027),q=n.n(F),z=n(80184);W().extend(q());var X={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"70%",bgcolor:"background.paper",borderRadius:"10px",boxShadow:24,p:2,backgroundColor:$.$_.modalbackground,height:"auto",overflow:"auto"},G={price:"",type:"",date:null,category:"",paymentStatus:"PAID",paymentMode:"",bankId:""},K={price:!1,date:!1,type:!1,category:!1,paymentStatus:!1,paymentMode:!1,bankId:!1},Q={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"400px",bgcolor:$.$_.modalbackground,borderRadius:"10px",height:"auto",boxShadow:24,p:2},J=["ELECTRICITY BILL","REPAIR AND MAINTAINANCE","INTERNET BILLS","RAW MATERIAL","RENT","PRINTING","EMPLOYEE SALARIES"],V=["SALE OF OLD NEWSPAPERS","SALE OF CARTOON BOXES","RENTAL INCOME","SALE OF UNUSED BUSINESS EQUIPMENT"],ee=["CASH","CARD","UPI","NET BANKING","CHEQUE","EMI"],te={id:"",type:"",balance:0,amountToPay:0,paymentDate:W()(new Date),paymentMode:"",bank:""};function ne(){var e=(0,c.useState)(W()("2022-04-17")),t=(0,s.Z)(e,2),n=(t[0],t[1],W().utc("2024-01-14T18:30:00.000+00:00").local(),(0,h.K$)()),H=(0,R.Ds)().enqueueSnackbar,F=(0,c.useState)(!1),q=(0,s.Z)(F,2),ne=q[0],re=q[1],ae=(0,c.useState)(!1),ie=(0,s.Z)(ae,2),oe=ie[0],le=ie[1],se=(0,c.useState)(te),ce=(0,s.Z)(se,2),ue=ce[0],de=ce[1],pe=(0,c.useState)(!1),he=(0,s.Z)(pe,2),fe=he[0],me=he[1],xe=(0,c.useState)([]),Ze=(0,s.Z)(xe,2),ye=Ze[0],be=Ze[1],ge=(0,c.useState)([]),ve=(0,s.Z)(ge,2),je=ve[0],ke=ve[1],Se=(0,c.useState)([]),Pe=(0,s.Z)(Se,2),Ce=Pe[0],Ie=Pe[1],Ee=(0,c.useState)(G),De=(0,s.Z)(Ee,2),Me=De[0],Te=De[1],Ae=(0,c.useState)(K),we=(0,s.Z)(Ae,2),$e=we[0],Ne=we[1],Ye=(0,c.useState)(!1),Re=(0,s.Z)(Ye,2),Oe=Re[0],Le=Re[1],_e=(0,c.useState)("ALL"),Ue=(0,s.Z)(_e,2),Be=Ue[0],He=Ue[1],We=(0,c.useState)({}),Fe=(0,s.Z)(We,2),qe=Fe[0],ze=Fe[1],Xe=(0,c.useState)(""),Ge=(0,s.Z)(Xe,2),Ke=Ge[0],Qe=Ge[1],Je=(0,c.useState)(null),Ve=(0,s.Z)(Je,2),et=Ve[0],tt=Ve[1],nt=Boolean(et),rt=(0,c.useState)(!1),at=(0,s.Z)(rt,2),it=at[0],ot=at[1],lt=function(){return re(!1)},st=function(){var e=(0,o.Z)((0,i.Z)().mark((function e(){var t,n,r;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=localStorage.getItem(Y._.keyUserToken),n=(0,$.sw)(t),e.next=5,N.ZP.post(N.Hv.expenditure.list,{},{headers:{Authorization:"Bearer ".concat(n)}});case 5:(r=e.sent)&&(me(!1),be(r.data.data),ke(r.data.data)),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),H("Failed to fetch dataArray!",{variant:"error"}),me(!1);case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}(),ct=function(){var e=(0,o.Z)((0,i.Z)().mark((function e(){var t,n,r;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=localStorage.getItem(Y._.keyUserToken),n=(0,$.sw)(t),e.next=5,N.ZP.post(N.Hv.bank.list,{},{headers:{Authorization:"Bearer ".concat(n)}});case 5:(r=e.sent)&&Ie(r.data.data),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),H("Failed to fetch bank accounts!",{variant:"error"});case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}();(0,c.useEffect)((function(){me(!0),st(),ct()}),[]);var ut=function(e){var t=e.target,n=t.name,r=t.value;Te((function(e){return(0,l.Z)((0,l.Z)({},e),{},(0,a.Z)({},n,r))})),Ne((function(e){return(0,l.Z)((0,l.Z)({},e),{},(0,a.Z)({},n,!1))}))},dt=function(){var e=(0,o.Z)((0,i.Z)().mark((function e(){var t,n,r,a;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t={},Me.price){e.next=4;break}return Ne((function(e){return(0,l.Z)((0,l.Z)({},e),{},{price:!0})})),e.abrupt("return");case 4:if(Ne((function(e){return(0,l.Z)((0,l.Z)({},e),{},{price:!1})})),Me.date){e.next=8;break}return Ne((function(e){return(0,l.Z)((0,l.Z)({},e),{},{date:!0})})),e.abrupt("return");case 8:if(Ne((function(e){return(0,l.Z)((0,l.Z)({},e),{},{date:!1})})),Me.type){e.next=12;break}return Ne((function(e){return(0,l.Z)((0,l.Z)({},e),{},{type:!0})})),e.abrupt("return");case 12:if(Ne((function(e){return(0,l.Z)((0,l.Z)({},e),{},{type:!1})})),Me.category){e.next=16;break}return Ne((function(e){return(0,l.Z)((0,l.Z)({},e),{},{category:!0})})),e.abrupt("return");case 16:if(Ne((function(e){return(0,l.Z)((0,l.Z)({},e),{},{category:!1})})),"PAID"!==Me.paymentStatus){e.next=27;break}if(Me.paymentMode){e.next=21;break}return Ne((function(e){return(0,l.Z)((0,l.Z)({},e),{},{paymentMode:!0})})),e.abrupt("return");case 21:if(Ne((function(e){return(0,l.Z)((0,l.Z)({},e),{},{paymentMode:!1})})),"CASH"===Me.paymentMode||Me.bankId){e.next=25;break}return Ne((function(e){return(0,l.Z)((0,l.Z)({},e),{},{bankId:!0})})),e.abrupt("return");case 25:Ne((function(e){return(0,l.Z)((0,l.Z)({},e),{},{bankId:!1})}));case 27:n=Me.date.format("YYYY/MM/DD"),t.price=parseFloat(Me.price),t.date=n,t.category=Me.category,t.paymentStatus=Me.paymentStatus,t.type=Me.type,"PAID"===Me.paymentStatus&&(t.paymentMode=Me.paymentMode,Me.bankId&&(t.bankId=Me.bankId)),r=localStorage.getItem(Y._.keyUserToken),a=(0,$.sw)(r),N.ZP.post(N.Hv.expenditure.add,t,{headers:{Authorization:"Bearer ".concat(a)}}).then((function(e){H("Expense created successfully!",{variant:"success"}),st(),lt(),Ne(K),Te(G)})).catch((function(e){H(e.error||e.msg,{variant:"error"})}));case 38:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),pt=function(){var e=(0,o.Z)((0,i.Z)().mark((function e(){var t,n,r,a;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t={},Me.date){e.next=4;break}return Ne((function(e){return(0,l.Z)((0,l.Z)({},e),{},{date:!0})})),e.abrupt("return");case 4:if(Ne((function(e){return(0,l.Z)((0,l.Z)({},e),{},{date:!1})})),Me.category){e.next=8;break}return Ne((function(e){return(0,l.Z)((0,l.Z)({},e),{},{category:!0})})),e.abrupt("return");case 8:if(Ne((function(e){return(0,l.Z)((0,l.Z)({},e),{},{category:!1})})),Me.type){e.next=12;break}return Ne((function(e){return(0,l.Z)((0,l.Z)({},e),{},{category:!0})})),e.abrupt("return");case 12:Ne((function(e){return(0,l.Z)((0,l.Z)({},e),{},{category:!1})})),n=Me.date.format("YYYY/MM/DD"),t.date=n,t.type=Me.type,t.category=Me.category,t.id=Me.id,r=localStorage.getItem(Y._.keyUserToken),a=(0,$.sw)(r),N.ZP.post(N.Hv.expenditure.update,Me,{headers:{Authorization:"Bearer ".concat(a)}}).then((function(e){H("Expenditure updated successfully!",{variant:"success"}),lt(),Ne(K),Te(G),st()})).catch((function(e){H(e.error||e.msg,{variant:"error"})}));case 21:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ht=[{name:"Type",selector:function(e){return e.type},sortable:"true"},{name:"Category",selector:function(e){return e.category},sortable:"true",width:"250px"},{name:"Paid Amount",selector:function(e){return e.price},sortable:"true",width:"150px"},{name:"Amount To Pay",selector:function(e){return e.remainingAmount},sortable:"true",width:"150px"},{name:"Payment Mode",selector:function(e){return 0===e.payments.length?"-":e.payments[e.payments.length-1].paymentID.paymentMode},sortable:!0,width:"150px"},{name:"Payment Status",selector:function(e){return e.paymentStatus},sortable:"true",center:"true",width:"150px"},{name:"Date",selector:function(e){return new Date(e.date).toLocaleDateString("en-GB",{day:"2-digit",month:"long",year:"numeric"})},sortable:"true",width:"150px"},{name:"Actions",width:"20%",cell:function(e){return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(f.Z,{onClick:function(t){tt(t.currentTarget),ze(e)},style:{color:$.$_.actionButton},variant:"outlined",endIcon:(0,z.jsx)(T.Z,{}),children:"Action"}),(0,z.jsxs)(m.Z,{id:"basic-menu",anchorEl:et,open:nt,onClose:function(){tt(null),ze({})},MenuListProps:{"aria-labelledby":"basic-button"},children:[(0,z.jsx)(x.Z,{onClick:function(){return function(){Le(!0),tt(null);var e={id:qe._id,price:qe.price,date:W()(qe.date),type:qe.type,category:qe.category};Te(e),re(!0)}()},children:"Edit Details"}),(0,z.jsx)(x.Z,{onClick:function(){return Te((function(e){return(0,l.Z)((0,l.Z)({},e),{},{id:qe._id})})),ot(!0),void tt(null)},children:"Remove"}),qe.remainingAmount>0&&(0,z.jsx)(x.Z,{onClick:function(){tt(null),le(!0),de((function(e){return(0,l.Z)((0,l.Z)({},e),{},{type:qe.type,balance:qe.remainingAmount,id:qe._id})})),ze({})},children:"Record Payment"})]})]})}}],ft=ye.filter((function(e){var t;return null===e||void 0===e||null===(t=e.category)||void 0===t?void 0:t.toLowerCase().includes(null===Ke||void 0===Ke?void 0:Ke.toLowerCase())}));return(0,z.jsxs)(d.Z,{maxWidth:!n.themeStretch&&"xl",children:[(0,z.jsx)(r.ql,{children:(0,z.jsx)("title",{children:" Dashboard : Expenditure"})}),(0,z.jsx)(p.Z,{variant:"h4",children:" Expense/Income "}),(0,z.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginTop:"20px"},children:[(0,z.jsxs)("div",{style:{display:"flex",flexDirection:"row",alignItems:"center",gap:"10px"},children:[(0,z.jsx)(Z.Z,{placeholder:"Search",size:"small",value:Ke,onChange:function(e){return Qe(e.target.value)},InputProps:{startAdornment:(0,z.jsx)(y.Z,{position:"start",children:(0,z.jsx)(w.Z,{})})}}),(0,z.jsxs)(b.Z,{size:"small",sx:{width:"230px"},children:[(0,z.jsx)(g.Z,{id:"demo-simple-select-label",children:"Select Category"}),(0,z.jsxs)(v.Z,{labelId:"demo-simple-select-label",id:"demo-simple-select",value:Be,label:"Select Category",onChange:function(e){me(!0),"INCOME"===e.target.value?be(je.filter((function(e){return"INCOME"===e.type}))):"EXPENSE"===e.target.value?be(je.filter((function(e){return"EXPENSE"===e.type}))):be(je),He(e.target.value),me(!1)},children:[(0,z.jsx)(x.Z,{value:"ALL",children:"ALL"}),(0,z.jsx)(x.Z,{value:"EXPENSE",children:"EXPENSE"}),(0,z.jsx)(x.Z,{value:"INCOME",children:"INCOME"})]})]}),(0,z.jsx)(L._,{dateAdapter:U.y,children:(0,z.jsx)(B.n,{size:"small",label:"Date Range"})})]}),(0,z.jsx)(f.Z,{startIcon:(0,z.jsx)(A.Z,{}),variant:"contained",color:"primary",onClick:function(){Te((function(e){return(0,l.Z)((0,l.Z)({},e),{},{date:W()(new Date)})})),re(!0),Le(!1)},children:"ADD ENTRY"})]}),(0,z.jsx)(j.Z,{open:ne,"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:(0,z.jsxs)(u.Z,{sx:X,children:[(0,z.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"10px"},children:[(0,z.jsx)(p.Z,{id:"modal-modal-title",variant:"h4",component:"h2",children:"Basic Details"}),(0,z.jsx)("div",{style:{padding:"10px",backgroundColor:"white",borderRadius:"10px"},children:(0,z.jsxs)(k.ZP,{container:!0,spacing:2,children:[(0,z.jsx)(k.ZP,{item:!0,xs:6,children:(0,z.jsx)(Z.Z,{label:"Amount in rupees",name:"price",type:"number",value:Me.price,disabled:Oe,onBlur:function(){parseFloat(Me.price)<=0&&(H("Expense should be greater than 0!",{variant:"error"}),Te((function(e){return(0,l.Z)((0,l.Z)({},e),{},{price:1})})))},onChange:ut,error:$e.price,helperText:$e.price?"Please enter expense in rupees":null,fullWidth:!0,required:!0})}),(0,z.jsx)(k.ZP,{item:!0,xs:6,children:(0,z.jsx)(L._,{dateAdapter:U.y,children:(0,z.jsx)(_.M,{label:"Date",value:Me.date,format:"DD/MM/YYYY",onChange:function(e){Te((function(t){return(0,l.Z)((0,l.Z)({},t),{},{date:e})})),Ne((function(e){return(0,l.Z)((0,l.Z)({},e),{},{date:!1})}))},slotProps:{textField:{fullWidth:!0,required:!0,error:$e.date,helperText:$e.date?"Please select expense date!.":null}}})})}),(0,z.jsx)(k.ZP,{item:!0,xs:6,children:(0,z.jsxs)(b.Z,{fullWidth:!0,required:!0,children:[(0,z.jsx)(g.Z,{id:"demo-simple-select-label",children:"Type"}),(0,z.jsxs)(v.Z,{labelId:"demo-simple-select-label",id:"demo-simple-select",value:Me.type,label:"Type",name:"type",onChange:function(e){Te((function(t){return(0,l.Z)((0,l.Z)({},t),{},{type:e.target.value,category:""})})),Ne((function(e){return(0,l.Z)((0,l.Z)({},e),{},{type:!1})}))},required:!0,error:$e.type,children:[(0,z.jsx)(x.Z,{value:"EXPENSE",children:"EXPENSE"}),(0,z.jsx)(x.Z,{value:"INCOME",children:"INCOME"})]}),$e.type&&(0,z.jsx)(S.Z,{sx:{color:"red"},children:"Please Select Expense Type"})]})}),(0,z.jsx)(k.ZP,{item:!0,xs:6,children:(0,z.jsxs)(b.Z,{fullWidth:!0,required:!0,children:[(0,z.jsx)(g.Z,{id:"demo-simple-select-label",children:"Category"}),(0,z.jsx)(v.Z,{labelId:"demo-simple-select-label",id:"demo-simple-select",value:Me.category,label:"Category",name:"category",disabled:!Me.type,onChange:function(e){Te((function(t){return(0,l.Z)((0,l.Z)({},t),{},{category:e.target.value})})),Ne((function(e){return(0,l.Z)((0,l.Z)({},e),{},{category:!1})}))},error:$e.category,children:"EXPENSE"===Me.type?J.map((function(e,t){return(0,z.jsx)(x.Z,{value:e,children:e},t)})):V.map((function(e,t){return(0,z.jsx)(x.Z,{value:e,children:e},t)}))}),$e.category&&(0,z.jsx)(S.Z,{sx:{color:"red"},children:"Please Select Expense Category"})]})})]})}),!Oe&&(0,z.jsx)("div",{style:{padding:"10px",backgroundColor:"white",borderRadius:"10px"},children:(0,z.jsxs)(k.ZP,{container:!0,spacing:2,children:[(0,z.jsx)(k.ZP,{item:!0,xs:12,children:(0,z.jsx)(p.Z,{id:"modal-modal-title",variant:"h6",component:"h2",children:"Payments"})}),(0,z.jsx)(k.ZP,{item:!0,xs:12,display:"flex",justifyContent:"flex-start",alignItems:"center",children:(0,z.jsx)(b.Z,{component:"fieldset",variant:"standard",children:(0,z.jsx)(b.Z,{children:(0,z.jsx)(P.Z,{control:(0,z.jsx)(C.Z,{checked:"PAID"===(null===Me||void 0===Me?void 0:Me.paymentStatus),onChange:function(e){Te((function(t){return(0,l.Z)((0,l.Z)({},t),{},{paymentStatus:e.target.checked?"PAID":"PENDING"})}))},name:"paymentStatus"}),label:"Mark as Paid",labelPlacement:"start"})})})}),"PAID"===Me.paymentStatus&&(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(k.ZP,{item:!0,xs:6,children:(0,z.jsxs)(b.Z,{fullWidth:!0,required:!0,children:[(0,z.jsx)(g.Z,{id:"demo-simple-select-label",children:"Payment Type"}),(0,z.jsxs)(v.Z,{labelId:"demo-simple-select-label",id:"demo-simple-select",value:Me.paymentMode,label:"Payment Type",name:"paymentMode",onChange:ut,error:$e.paymentMode,required:!0,children:[ee.map((function(e,t){return(0,z.jsx)(x.Z,{value:e,children:e},t)})),(0,z.jsx)(x.Z,{value:"EMI",children:"EMI"})]}),$e.paymentMode&&(0,z.jsx)(S.Z,{sx:{color:"red"},children:"Please Select Expense Payment Type"})]})}),"CASH"!==Me.paymentMode&&(0,z.jsx)(k.ZP,{item:!0,xs:6,children:(0,z.jsxs)(b.Z,{fullWidth:!0,required:!0,children:[(0,z.jsx)(g.Z,{id:"demo-simple-select-label",children:"Select Bank"}),(0,z.jsx)(v.Z,{labelId:"demo-simple-select-label",id:"demo-simple-select",value:Me.bankId,label:"Select Bank",name:"bankId",onChange:function(e){console.log(e.target.value),Te((function(t){return(0,l.Z)((0,l.Z)({},t),{},{bankId:e.target.value})})),Ne((function(e){return(0,l.Z)((0,l.Z)({},e),{},{bankId:!1})}))},error:$e.bankId,required:!0,children:Ce.map((function(e){return(0,z.jsx)(x.Z,{value:e._id,children:e.bankName},e._id)}))}),$e.bankId&&(0,z.jsx)(S.Z,{sx:{color:"red"},children:"Please Select Bank"})]})})]})]})})]}),(0,z.jsxs)("div",{style:{display:"flex",flexDirection:"row",gap:"10px",justifyContent:"flex-end",padding:"10px"},children:[(0,z.jsx)(f.Z,{variant:"contained",color:"primary",onClick:Oe?pt:dt,children:Oe?"Update":"Save"}),(0,z.jsx)(f.Z,{variant:"outlined",onClick:function(){Oe&&(Te(G),Le(!1)),re(!1),ze({}),Te(G),Ne(K)},children:"Cancel"})]})]})}),(0,z.jsx)("div",{style:{marginTop:"20px"},children:(0,z.jsx)(O.ZP,{columns:ht,data:ft,pagination:!0,progressPending:fe})}),(0,z.jsxs)(I.Z,{open:it,onClose:function(){return ot(!1)},children:[(0,z.jsx)(E.Z,{children:"Remove"}),(0,z.jsx)(D.Z,{children:"Are you sure you want to delete?"}),(0,z.jsxs)(M.Z,{children:[(0,z.jsx)(f.Z,{onClick:function(){ot(!1),Te(G),Ne(K),ze({})},children:"Cancel"}),(0,z.jsx)(f.Z,{onClick:function(){var e=localStorage.getItem(Y._.keyUserToken),t=(0,$.sw)(e),n={headers:{Authorization:"Bearer ".concat(t)}};N.ZP.post(N.Hv.expenditure.delete,{id:Me.id},n).then((function(e){e&&H("Offer deleted successfully!",{variant:"success"})})).catch((function(e){H(e.msg||e.error,{variant:"error"})}))},variant:"contained",color:"error",children:"Delete"})]})]}),(0,z.jsx)(j.Z,{id:"paymentModal",open:oe,"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:(0,z.jsx)(u.Z,{sx:Q,children:(0,z.jsxs)(k.ZP,{container:!0,sx:{display:"flex",flexDirection:"column",gap:"10px"},children:[(0,z.jsx)(k.ZP,{item:!0,xs:12,children:(0,z.jsx)(p.Z,{variant:"h6",children:"Customer Details"})}),(0,z.jsx)(k.ZP,{item:!0,xs:12,children:(0,z.jsxs)(b.Z,{fullWidth:!0,required:!0,children:[(0,z.jsx)(g.Z,{id:"demo-simple-select-label",children:"Type"}),(0,z.jsx)(v.Z,{labelId:"demo-simple-select-label",id:"demo-simple-select",value:ue.type,label:"Type",name:"type",disabled:!0,required:!0,sx:{backgroundColor:"white",borderRadius:"7px"},children:(0,z.jsx)(x.Z,{value:ue.type,children:ue.type})})]})}),(0,z.jsx)(k.ZP,{item:!0,xs:12,children:(0,z.jsx)(Z.Z,{label:"Balance",value:ue.balance,disabled:!0,sx:{backgroundColor:"white",borderRadius:"7px"},fullWidth:!0})}),(0,z.jsx)(k.ZP,{item:!0,xs:12,children:(0,z.jsx)(p.Z,{variant:"h6",children:"Payment Details"})}),(0,z.jsx)(k.ZP,{item:!0,xs:12,children:(0,z.jsx)(Z.Z,{label:"Amount To Pay",value:ue.amountToPay,onBlur:function(){ue.amountToPay>ue.balance&&(H("Amount to pay cannot be greater than balance!",{variant:"error"}),de((function(e){return(0,l.Z)((0,l.Z)({},e),{},{amountToPay:ue.balance})})))},onChange:function(e){return de((function(t){return(0,l.Z)((0,l.Z)({},t),{},{amountToPay:e.target.value})}))},sx:{backgroundColor:"white",borderRadius:"7px"},fullWidth:!0})}),(0,z.jsx)(k.ZP,{item:!0,xs:12,children:(0,z.jsx)(L._,{dateAdapter:U.y,children:(0,z.jsx)(_.M,{label:"Payment Date",value:ue.paymentDate,maxDate:W()(new Date),onChange:function(e){de((function(t){return(0,l.Z)((0,l.Z)({},t),{},{paymentDate:e})}))},sx:{backgroundColor:"white",borderRadius:"7px"},format:"DD/MM/YYYY",slotProps:{textField:{fullWidth:!0}}})})}),(0,z.jsx)(k.ZP,{item:!0,xs:12,children:(0,z.jsxs)(b.Z,{fullWidth:!0,children:[(0,z.jsx)(g.Z,{id:"record-payment-mode",children:"Select Payment Mode"}),(0,z.jsx)(v.Z,{labelId:"record-payment-mode",id:"demo-simple-select",label:"Select Payment Mode",sx:{backgroundColor:"white",borderRadius:"7px"},value:ue.paymentMode,onChange:function(e){return de((function(t){return(0,l.Z)((0,l.Z)({},t),{},{paymentMode:e.target.value})}))},children:$.y0.paymentMode.map((function(e,t){return(0,z.jsx)(x.Z,{value:e,children:e},t)}))})]})}),"CASH"!==ue.paymentMode&&(0,z.jsx)(k.ZP,{item:!0,xs:12,children:(0,z.jsxs)(b.Z,{fullWidth:!0,children:[(0,z.jsx)(g.Z,{id:"select-bank",children:"Select Bank"}),(0,z.jsx)(v.Z,{labelId:"select-bank",id:"demo-simple-select",label:"Select Bank",value:ue.bank,sx:{backgroundColor:"white",borderRadius:"7px"},onChange:function(e){return de((function(t){return(0,l.Z)((0,l.Z)({},t),{},{bank:e.target.value})}))},children:Ce.map((function(e,t){return(0,z.jsx)(x.Z,{value:e._id,children:e.bankName},e._id)}))})]})}),(0,z.jsxs)(k.ZP,{item:!0,xs:12,sx:{display:"flex",justifyContent:"flex-end",gap:"10px"},children:[(0,z.jsx)(f.Z,{variant:"contained",color:"primary",onClick:function(){var e={};if(parseFloat(ue.amountToPay)<=0)H("Amount to pay should be greater than 0!",{variant:"error"});else{e.id=ue.id,e.amount=parseFloat(ue.amountToPay),e.paymentDate=W()(ue.paymentDate).format("YYYY-MM-DD"),e.paymentMode=ue.paymentMode,ue.bank.length>0&&(e.bank=ue.bank);var t=localStorage.getItem(Y._.keyUserToken),n=(0,$.sw)(t);N.ZP.post(N.Hv.expenditure.recordPayment,e,{headers:{Authorization:"Bearer ".concat(n)}}).then((function(e){H("Payment recorded successfully!",{variant:"success"}),le(!1),de(te),st()})).catch((function(e){H(e.error,{variant:"error"})}))}},disabled:!ue.amountToPay||!ue.paymentMode||"CASH"!==ue.paymentMode&&!ue.bank,children:"Update Payment"}),(0,z.jsx)(f.Z,{variant:"contained",color:"error",onClick:function(){le(!1),de(te)},children:"Cancel"})]})]})})})]})}function re(){return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(r.ql,{children:(0,z.jsx)("title",{children:" Dashboard: Expenditure"})}),(0,z.jsx)(ne,{})]})}},65661:function(e,t,n){"use strict";var r=n(87462),a=n(63366),i=n(72791),o=n(28182),l=n(94419),s=n(4567),c=n(66934),u=n(31402),d=n(17673),p=n(85090),h=n(80184),f=["className","id"],m=(0,c.ZP)(s.Z,{name:"MuiDialogTitle",slot:"Root",overridesResolver:function(e,t){return t.root}})({padding:"16px 24px",flex:"0 0 auto"}),x=i.forwardRef((function(e,t){var n=(0,u.Z)({props:e,name:"MuiDialogTitle"}),s=n.className,c=n.id,x=(0,a.Z)(n,f),Z=n,y=function(e){var t=e.classes;return(0,l.Z)({root:["root"]},d.a,t)}(Z),b=i.useContext(p.Z).titleId,g=void 0===b?c:b;return(0,h.jsx)(m,(0,r.Z)({component:"h2",className:(0,o.Z)(y.root,s),ownerState:Z,ref:t,variant:"h6",id:null!=c?c:g},x))}));t.Z=x},83027:function(e){e.exports=function(){"use strict";var e="minute",t=/[+-]\d\d(?::?\d\d)?/g,n=/([+-]|\d\d)/g;return function(r,a,i){var o=a.prototype;i.utc=function(e){return new a({date:e,utc:!0,args:arguments})},o.utc=function(t){var n=i(this.toDate(),{locale:this.$L,utc:!0});return t?n.add(this.utcOffset(),e):n},o.local=function(){return i(this.toDate(),{locale:this.$L,utc:!1})};var l=o.parse;o.parse=function(e){e.utc&&(this.$u=!0),this.$utils().u(e.$offset)||(this.$offset=e.$offset),l.call(this,e)};var s=o.init;o.init=function(){if(this.$u){var e=this.$d;this.$y=e.getUTCFullYear(),this.$M=e.getUTCMonth(),this.$D=e.getUTCDate(),this.$W=e.getUTCDay(),this.$H=e.getUTCHours(),this.$m=e.getUTCMinutes(),this.$s=e.getUTCSeconds(),this.$ms=e.getUTCMilliseconds()}else s.call(this)};var c=o.utcOffset;o.utcOffset=function(r,a){var i=this.$utils().u;if(i(r))return this.$u?0:i(this.$offset)?c.call(this):this.$offset;if("string"==typeof r&&(r=function(e){void 0===e&&(e="");var r=e.match(t);if(!r)return null;var a=(""+r[0]).match(n)||["-",0,0],i=a[0],o=60*+a[1]+ +a[2];return 0===o?0:"+"===i?o:-o}(r),null===r))return this;var o=Math.abs(r)<=16?60*r:r,l=this;if(a)return l.$offset=o,l.$u=0===r,l;if(0!==r){var s=this.$u?this.toDate().getTimezoneOffset():-1*this.utcOffset();(l=this.local().add(o+s,e)).$offset=o,l.$x.$localOffset=s}else l=this.utc();return l};var u=o.format;o.format=function(e){var t=e||(this.$u?"YYYY-MM-DDTHH:mm:ss[Z]":"");return u.call(this,t)},o.valueOf=function(){var e=this.$utils().u(this.$offset)?0:this.$offset+(this.$x.$localOffset||this.$d.getTimezoneOffset());return this.$d.valueOf()-6e4*e},o.isUTC=function(){return!!this.$u},o.toISOString=function(){return this.toDate().toISOString()},o.toString=function(){return this.toDate().toUTCString()};var d=o.toDate;o.toDate=function(e){return"s"===e&&this.$offset?i(this.format("YYYY-MM-DD HH:mm:ss:SSS")).toDate():d.call(this)};var p=o.diff;o.diff=function(e,t,n){if(e&&this.$u===e.$u)return p.call(this,e,t,n);var r=this.local(),a=i(e).local();return p.call(r,a,t,n)}}}()}}]);
//# sourceMappingURL=638.0f14c48c.chunk.js.map