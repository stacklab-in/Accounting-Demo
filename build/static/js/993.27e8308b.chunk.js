"use strict";(self.webpackChunk_accounting_billing_stacklab=self.webpackChunk_accounting_billing_stacklab||[]).push([[993],{32869:function(e,t,n){n.d(t,{Ds:function(){return r.Ds}});var r=n(58518);n(58764)},37993:function(e,t,n){n.r(t),n.d(t,{default:function(){return I}});var r=n(74165),a=n(15861),o=n(29439),i=n(89164),l=n(4567),u=n(36314),s=n(85771),c=n(30439),p=n(71715),d=n(82626),m=n(48550),f=n(63466),y=n(68096),h=n(50168),x=n(58406),v=n(6907),T=n(57088),N=n(18406),b=n(26759),g=n(72791),E=n(52073),Z=n(99615),j=n(32869),A=n(43513),C=n(5403),R=n(71652),S=n(97892),k=n.n(S),D=n(23937),w=n(24750),M=n(34045),P=n(35125),U=(n(31052),n(64802)),_=n(80184);function I(){var e=(0,T.K$)(),t=(0,g.useState)(!1),n=(0,o.Z)(t,2),S=n[0],I=n[1],O=(0,g.useState)([]),L=(0,o.Z)(O,2),B=L[0],G=L[1],Y=(0,g.useState)([]),V=(0,o.Z)(Y,2),H=V[0],z=V[1],F=(0,g.useState)(""),W=(0,o.Z)(F,2),X=W[0],q=W[1],$=(0,g.useState)(k()(new Date)),K=(0,o.Z)($,2),J=K[0],Q=K[1],ee=(0,j.Ds)().enqueueSnackbar,te=(0,g.useState)("all"),ne=(0,o.Z)(te,2),re=ne[0],ae=ne[1],oe=(0,g.useState)(null),ie=(0,o.Z)(oe,2),le=ie[0],ue=ie[1],se=Boolean(le),ce=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(){var t,n,a;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=localStorage.getItem(E._.keyUserToken),n=(0,N.sw)(t),e.next=5,Z.ZP.post(Z.Hv.reports.dayBook,{date:k()(J).format("YYYY-MM-DD")},{headers:{Authorization:"Bearer ".concat(n)}});case 5:(a=e.sent)&&(I(!1),G(a.data.data),z(a.data.data)),e.next=14;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0),ee(e.t0.error||"Something went wrong!.",{variant:"error"}),I(!1);case 14:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}();(0,g.useEffect)((function(){I(!0),ce()}),[J]);var pe=[{name:"Item Name",selector:function(e){return"CUSTOMER"===e.partyType||"VENDOR"===e.partyType?e.userName||"N/A":e.category||"N/A"},sortable:!0},{name:"Transaction Type",selector:function(e){return"purchaseReturn"===e.type?"PURCHASE RETURN":e.type.toUpperCase()},sortable:"true"},{name:"Invoice Number",selector:function(e){return e.invoiceNumber},sortable:"true"},{name:"Amount",selector:function(e){return N.MG.format(e.amount)},sortable:"true"},{name:"Time",selector:function(e){return new Date(e.createdAt).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0})||"N/A"},sortable:"true"}],de=B.filter((function(e){return(null===e||void 0===e?void 0:e.userName)&&e.userName.toLowerCase().includes(null===X||void 0===X?void 0:X.toLowerCase())||(null===e||void 0===e?void 0:e.category)&&e.category.toLowerCase().includes(null===X||void 0===X?void 0:X.toLowerCase())}));return(0,_.jsxs)(i.Z,{maxWidth:!e.themeStretch&&"xl",children:[(0,_.jsx)(v.ql,{children:(0,_.jsx)("title",{children:" Reports: Day Book"})}),(0,_.jsx)(l.Z,{variant:"h4",children:" Day Book "}),(0,_.jsxs)("div",{style:{display:"flex",flexDirection:"row",justifyContent:"space-between",marginTop:"20px"},children:[(0,_.jsxs)(u.Z,{direction:"row",spacing:1,children:[(0,_.jsx)(s.Z,{label:"Sales : ".concat(B.length>0?N.MG.format(B.filter((function(e){return"CUSTOMER"===e.partyType})).reduce((function(e,t){return e+t.amount}),0)):N.MG.format(0)),variant:"outlined"}),(0,_.jsx)(s.Z,{label:"Purchase : ".concat(B.length>0?N.MG.format(B.filter((function(e){return"VENDOR"===e.partyType})).reduce((function(e,t){return e+t.amount}),0)):N.MG.format(0)),variant:"outlined"}),(0,_.jsx)(s.Z,{label:"Expense : ".concat(B.length>0?N.MG.format(B.filter((function(e){return"EXPENSE"===e.partyType})).reduce((function(e,t){return e+t.amount}),0)):N.MG.format(0)),variant:"outlined"}),(0,_.jsx)(s.Z,{label:"Income : ".concat(B.length>0?N.MG.format(B.filter((function(e){return"INCOME"===e.partyType})).reduce((function(e,t){return e+t.amount}),0)):N.MG.format(0)),variant:"outlined"})]}),(0,_.jsxs)(u.Z,{children:[(0,_.jsx)(c.Z,{style:{color:N.$_.actionButton},endIcon:(0,_.jsx)(b.Z,{}),variant:"outlined",onClick:function(e){return ue(e.currentTarget)},children:"ACTIONS"}),(0,_.jsxs)(p.Z,{id:"basic-menu",anchorEl:le,open:se,onClose:function(){ue(null),z({})},MenuListProps:{"aria-labelledby":"basic-button"},children:[(0,_.jsx)(d.Z,{onClick:function(){window.print()},children:"Print"}),(0,_.jsx)(d.Z,{onClick:function(){ue(null);var e=new P.default;e.text("Day Book Report",10,10);var t=B.map((function(e){return["CUSTOMER"===e.partyType||"VENDOR"===e.partyType?e.userName||"N/A":e.category||"N/A","purchaseReturn"===e.type?"PURCHASE RETURN":e.type.toUpperCase(),e.invoiceNumber||"N/A",void 0!==e.amount&&null!==e.amount?e.amount:"N/A",e.createdAt?new Date(e.createdAt).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0}):"N/A"]}));e.autoTable({head:[["Item Name","Transaction Type","Invoice Number","Amount","Time"]],body:t}),e.save("day_book_report.pdf")},children:"Download as PDF"}),(0,_.jsx)(d.Z,{onClick:function(){ue(null);var e=B.map((function(e){return{"Item Name":"CUSTOMER"===e.partyType||"VENDOR"===e.partyType?e.userName||"N/A":e.category||"N/A","Transaction Type":"purchaseReturn"===e.type?"PURCHASE RETURN":e.type.toUpperCase(),"Invoice Number":e.invoiceNumber||"N/A",Amount:void 0!==e.amount&&null!==e.amount?e.amount:"N/A",Time:e.createdAt?(0,N.p6)(e.createdAt):"N/A"}})),t=M.P6.book_new(),n=M.P6.json_to_sheet(e);M.P6.book_append_sheet(t,n,"Day Book Report");var r=M.cW(t,{bookType:"xlsx",type:"array"}),a=new Blob([r],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=UTF-8"});(0,U.saveAs)(a,"day_book_report.xlsx")},children:"Download as Excel"})]})]})]}),(0,_.jsxs)("div",{style:{display:"flex",justifyContent:"flex-start",gap:"10px",marginTop:"20px"},children:[(0,_.jsx)(m.Z,{placeholder:"Search",size:"small",value:X,onChange:function(e){return q(e.target.value)},InputProps:{startAdornment:(0,_.jsx)(f.Z,{position:"start",children:(0,_.jsx)(C.Z,{})})}}),(0,_.jsx)(R._,{dateAdapter:w.y,children:(0,_.jsx)(D.M,{value:J,onChange:function(e){Q(e)},format:"DD/MM/YYYY",size:"small",slotProps:{textField:{size:"small"}}})}),(0,_.jsxs)(y.Z,{fullWidth:!0,size:"small",sx:{width:"300px"},children:[(0,_.jsx)(h.Z,{id:"demo-simple-select-label",children:"Transaction Type"}),(0,_.jsxs)(x.Z,{labelId:"demo-simple-select-label",id:"demo-simple-select",value:re,label:"Transaction Type",onChange:function(e){ae(e.target.value),"sales"===e.target.value?G(H.filter((function(e){return"CUSTOMER"===e.partyType}))):"purchase"===e.target.value?G(H.filter((function(e){return"VENDOR"===e.partyType&&"PAID"===e.paymentType}))):"purchaseReturn"===e.target.value?G(H.filter((function(e){return"VENDOR"===e.partyType&&"RECEIVED"===e.paymentType}))):"expense"===e.target.value?G(H.filter((function(e){return"EXPENSE"===e.partyType}))):"income"===e.target.value?G(H.filter((function(e){return"INCOME"===e.partyType}))):G(H)},children:[(0,_.jsx)(d.Z,{value:"all",children:"ALL"}),(0,_.jsx)(d.Z,{value:"sales",children:"SALES"}),(0,_.jsx)(d.Z,{value:"purchase",children:"PURCHASE"}),(0,_.jsx)(d.Z,{value:"purchaseReturn",children:"PURCHASE RETURN"}),(0,_.jsx)(d.Z,{value:"expense",children:"EXPENSE"}),(0,_.jsx)(d.Z,{value:"income",children:"INCOME"})]})]})]}),(0,_.jsx)("div",{style:{marginTop:"20px"},children:(0,_.jsx)(A.ZP,{columns:pe,data:de,progressPending:S,pagination:!0,id:"daybook-table"})})]})}}}]);
//# sourceMappingURL=993.27e8308b.chunk.js.map