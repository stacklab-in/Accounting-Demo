"use strict";(self.webpackChunk_accounting_billing_stacklab=self.webpackChunk_accounting_billing_stacklab||[]).push([[60],{32869:function(e,n,t){t.d(n,{Ds:function(){return r.Ds}});var r=t(58518);t(58764)},60060:function(e,n,t){t.r(n),t.d(n,{default:function(){return Y}});var r=t(6907),a=t(45987),i=t(4942),o=t(74165),s=t(15861),l=t(1413),d=t(29439),c=t(72791),u=t(64554),h=t(89164),m=t(4567),p=t(57088),x=t(83932),f=t(30439),Z=t(71715),v=t(82626),j=t(93006),b=t(63466),g=t(73590),y=t(61889),C=t(68096),k=t(50168),P=t(58406),w=t(5574),S=t(65661),A=t(39157),_=t(97123),B=t(26759),D=t(42419),E=t(5403),N=t(42716),q=t(18406),I=t(99615),L=t(52073),W=t(32869),M=t(43513),T=t(71652),z=t(24750),R=t(97892),O=t.n(R),H=t(57689),U=t(80184),F=["id"],$={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"70%",backgroundColor:q.$_.modalbackground,borderRadius:"10px",boxShadow:24,p:2,height:"auto",overflow:"auto"},V={id:"",code:"",name:"",mobileNumber:"",dateOfBirth:null,address:{line1:"",line2:"",city:"",state:"",pincode:""}};function K(){var e=(0,p.K$)(),n=(0,W.Ds)().enqueueSnackbar,t=(0,H.s0)(),r=(0,c.useState)(!1),R=(0,d.Z)(r,2),K=R[0],Y=R[1],G=(0,c.useState)(!1),J=(0,d.Z)(G,2),Q=J[0],X=J[1],ee=(0,c.useState)([]),ne=(0,d.Z)(ee,2),te=ne[0],re=ne[1],ae=(0,c.useState)(V),ie=(0,d.Z)(ae,2),oe=ie[0],se=ie[1],le=(0,c.useState)(!1),de=(0,d.Z)(le,2),ce=de[0],ue=de[1],he=(0,c.useState)({}),me=(0,d.Z)(he,2),pe=me[0],xe=me[1],fe=(0,c.useState)(""),Ze=(0,d.Z)(fe,2),ve=Ze[0],je=Ze[1],be=(0,c.useState)(null),ge=(0,d.Z)(be,2),ye=ge[0],Ce=ge[1],ke=Boolean(ye),Pe=(0,c.useState)(!1),we=(0,d.Z)(Pe,2),Se=we[0],Ae=we[1],_e=function(){return Y(!1)},Be=function(){var e=(0,s.Z)((0,o.Z)().mark((function e(){var t,r,a;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=localStorage.getItem(L._.keyUserToken),r=(0,q.sw)(t),e.next=5,I.ZP.post(I.Hv.employee.list,{},{headers:{Authorization:"Bearer ".concat(r)}});case 5:(a=e.sent)&&(X(!1),re(a.data.data)),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),n("Failed to fetch employees!",{variant:"error"}),X(!1);case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}();(0,c.useEffect)((function(){X(!0),Be()}),[]);var De=function(e){var n=e.target,t=n.name,r=n.value;se((function(e){return(0,l.Z)((0,l.Z)({},e),{},(0,i.Z)({},t,r))}))},Ee=function(){var e=(0,s.Z)((0,o.Z)().mark((function e(){var t,r,i;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=localStorage.getItem(L._.keyUserToken),r=(0,q.sw)(t),oe.id,i=(0,a.Z)(oe,F),I.ZP.post(I.Hv.employee.add,i,{headers:{Authorization:"Bearer ".concat(r)}}).then((function(e){n("Employee created successfully!",{variant:"success"}),_e(),se(V),Be()})).catch((function(e){n(e.error||e.msg,{variant:"error"})}));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Ne=function(){var e=(0,s.Z)((0,o.Z)().mark((function e(){var t,r;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=localStorage.getItem(L._.keyUserToken),r=(0,q.sw)(t),I.ZP.post(I.Hv.employee.update,oe,{headers:{Authorization:"Bearer ".concat(r)}}).then((function(e){n("Employee updated successfully!",{variant:"success"}),_e(),se(V),Be()})).catch((function(e){n(e.error||e.msg,{variant:"error"})}));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),qe=[{name:"Name",selector:function(e){return e.name},sortable:!0,cell:function(e){return(0,U.jsx)(m.Z,{sx:{fontWeight:"bold"},onClick:function(){console.log({row:e}),t("/dashboard/employee/details",{state:e})},style:{cursor:"pointer"},children:e.name})}},{name:"Employee Code",selector:function(e){return e.code},sortable:!0},{name:"Contact Number",selector:function(e){return e.mobileNumber},sortable:!0},{name:"Actions",cell:function(e){return(0,U.jsxs)(U.Fragment,{children:[(0,U.jsx)(f.Z,{onClick:function(n){Ce(n.currentTarget),xe(e)},style:{color:q.$_.actionButton},variant:"outlined",endIcon:(0,U.jsx)(B.Z,{}),children:"Action"}),(0,U.jsxs)(Z.Z,{id:"basic-menu",anchorEl:ye,open:ke,onClose:function(){Ce(null),xe({})},MenuListProps:{"aria-labelledby":"basic-button"},children:[(0,U.jsx)(v.Z,{onClick:function(){return function(){ue(!0),Ce(null);var e={id:pe._id,name:pe.name,code:pe.code,dateOfBirth:O()(pe.dateOfBirth),mobileNumber:pe.mobileNumber.slice(3),address:{line1:pe.address.line1,line2:pe.address.line2,city:pe.address.city,state:pe.address.state,pincode:pe.address.pincode}};se(e),Y(!0)}()},children:"Edit Details"}),(0,U.jsx)(v.Z,{onClick:function(){return se((function(e){return(0,l.Z)((0,l.Z)({},e),{},{id:pe._id})})),Ae(!0),void Ce(null)},children:"Remove"})]})]})}}],Ie=te.filter((function(e){var n,t;return(null===e||void 0===e||null===(n=e.name)||void 0===n?void 0:n.toLowerCase().includes(null===ve||void 0===ve?void 0:ve.toLowerCase()))||(null===e||void 0===e||null===(t=e.code)||void 0===t?void 0:t.toLowerCase().includes(null===ve||void 0===ve?void 0:ve.toLowerCase()))})),Le=function(e){var n=e.target,t=n.name,r=n.value;"pincode"===t&&r.length>6||se((function(e){return(0,l.Z)((0,l.Z)({},e),{},{address:(0,l.Z)((0,l.Z)({},e.address),{},(0,i.Z)({},t,r))})}))};return(0,U.jsxs)(h.Z,{maxWidth:!e.themeStretch&&"xl",children:[(0,U.jsx)(m.Z,{variant:"h4",children:" Employee Master "}),(0,U.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginTop:"20px"},children:[(0,U.jsx)(j.Z,{size:"small",onChange:function(e){return je(e.target.value)},type:"text",placeholder:"Search",InputProps:{endAdornment:(0,U.jsx)(b.Z,{position:"end",children:(0,U.jsx)(E.Z,{})})}}),(0,U.jsx)(f.Z,{startIcon:(0,U.jsx)(D.Z,{}),color:"primary",variant:"contained",onClick:function(){var e=(0,q.bj)();se((function(n){return(0,l.Z)((0,l.Z)({},n),{},{code:e})})),Y(!0),ue(!1)},children:"ADD EMPLOYEE"})]}),(0,U.jsx)(g.Z,{open:K,"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:(0,U.jsxs)(u.Z,{sx:$,children:[(0,U.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"10px"},children:[(0,U.jsx)(m.Z,{id:"modal-modal-title",variant:"h4",component:"h2",children:"Basic Details"}),(0,U.jsx)("div",{style:{padding:"10px",backgroundColor:"white",borderRadius:"10px"},children:(0,U.jsxs)(y.ZP,{container:!0,spacing:2,children:[(0,U.jsx)(y.ZP,{item:!0,xs:6,children:(0,U.jsx)(j.Z,{label:"Name",name:"name",value:oe.name,onChange:De,fullWidth:!0,required:!0})}),(0,U.jsx)(y.ZP,{item:!0,xs:6,children:(0,U.jsx)(j.Z,{label:"Employee Code",name:"code",value:oe.code,onChange:De,fullWidth:!0,disabled:!0,required:!0})}),(0,U.jsx)(y.ZP,{item:!0,xs:6,children:(0,U.jsx)(j.Z,{label:"Mobile Number",name:"mobileNumber",value:oe.mobileNumber,onChange:De,fullWidth:!0,required:!0,inputProps:{maxLength:10},InputProps:{startAdornment:(0,U.jsxs)(b.Z,{position:"start",children:[(0,U.jsx)(N.Z,{})," +91"]})}})}),(0,U.jsx)(y.ZP,{item:!0,xs:6,children:(0,U.jsx)(T._,{dateAdapter:z.y,children:(0,U.jsx)(x.M,{label:"Date of Birth",value:oe.dateOfBirth,onChange:function(e){return se((function(n){return(0,l.Z)((0,l.Z)({},n),{},{dateOfBirth:e})}))},slotProps:{textField:{fullWidth:!0,required:!0}},required:!0})})})]})}),(0,U.jsx)("div",{style:{padding:"10px",backgroundColor:"white",borderRadius:"10px"},children:(0,U.jsxs)(y.ZP,{container:!0,spacing:2,children:[(0,U.jsx)(y.ZP,{item:!0,xs:12,children:(0,U.jsx)(m.Z,{variant:"h6",children:"Address"})}),(0,U.jsx)(y.ZP,{item:!0,xs:6,children:(0,U.jsx)(j.Z,{label:"Address Line 1",value:oe.address.line1,name:"line1",onChange:Le,fullWidth:!0,required:!0})}),(0,U.jsx)(y.ZP,{item:!0,xs:6,children:(0,U.jsx)(j.Z,{label:"Address Line 2",value:oe.address.line2,name:"line2",onChange:Le,fullWidth:!0})}),(0,U.jsx)(y.ZP,{item:!0,xs:6,children:(0,U.jsx)(j.Z,{label:"City",value:oe.address.city,name:"city",onChange:Le,fullWidth:!0,required:!0})}),(0,U.jsx)(y.ZP,{item:!0,xs:6,children:(0,U.jsxs)(C.Z,{fullWidth:!0,required:!0,children:[(0,U.jsx)(k.Z,{id:"demo-simple-select-label",children:"Select State"}),(0,U.jsx)(P.Z,{labelId:"demo-simple-select-label",id:"demo-simple-select",value:oe.address.state,name:"state",onChange:Le,label:"Select State",children:q.$q.map((function(e,n){return(0,U.jsx)(v.Z,{value:e,children:e},n)}))})]})}),(0,U.jsx)(y.ZP,{item:!0,xs:6,children:(0,U.jsx)(j.Z,{label:"Pincode",name:"pincode",type:"number",value:oe.address.pincode,onChange:Le,fullWidth:!0,required:!0,inputProps:{maxLength:6}})})]})})]}),(0,U.jsxs)("div",{style:{display:"flex",flexDirection:"row",gap:"10px",justifyContent:"flex-end",padding:"10px"},children:[(0,U.jsx)(f.Z,{disabled:!oe.name||!oe.mobileNumber||!oe.dateOfBirth||!oe.address.line1||!oe.address.city||!oe.address.state||!oe.address.pincode,variant:"contained",color:"primary",onClick:ce?Ne:Ee,children:ce?"Update":"Save"}),(0,U.jsx)(f.Z,{variant:"outlined",onClick:function(){ce&&(se(V),ue(!1)),Y(!1),xe({})},children:"Cancel"})]})]})}),(0,U.jsx)("div",{style:{marginTop:"20px"},children:(0,U.jsx)(M.ZP,{columns:qe,data:Ie,pagination:!0,progressPending:Q})}),(0,U.jsxs)(w.Z,{open:Se,onClose:function(){return Ae(!1)},children:[(0,U.jsx)(S.Z,{children:"Remove Employee"}),(0,U.jsx)(A.Z,{children:"Are you sure you want to delete this employee?"}),(0,U.jsxs)(_.Z,{children:[(0,U.jsx)(f.Z,{onClick:function(){return Ae(!1)},children:"Cancel"}),(0,U.jsx)(f.Z,{onClick:function(){var e=localStorage.getItem(L._.keyUserToken),t=(0,q.sw)(e),r={headers:{Authorization:"Bearer ".concat(t)}};I.ZP.post(I.Hv.employee.delete,{id:oe.id},r).then((function(e){e&&(n("Employee deleted successfully!",{variant:"success"}),Ae(!1),se(V),Be())})).catch((function(e){n(e.msg||e.error,{variant:"error"})}))},variant:"contained",color:"error",children:"Delete"})]})]})]})}function Y(){return(0,U.jsxs)(U.Fragment,{children:[(0,U.jsx)(r.ql,{children:(0,U.jsx)("title",{children:" Dashboard : Employee"})}),(0,U.jsx)(K,{})]})}},42419:function(e,n,t){var r=t(64836);n.Z=void 0;var a=r(t(45649)),i=t(80184);n.Z=(0,a.default)((0,i.jsx)("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6z"}),"Add")},42716:function(e,n,t){var r=t(64836);n.Z=void 0;var a=r(t(45649)),i=t(80184);n.Z=(0,a.default)((0,i.jsx)("path",{d:"M6.62 10.79c1.44 2.83 3.76 5.14 6.59 6.59l2.2-2.2c.27-.27.67-.36 1.02-.24 1.12.37 2.33.57 3.57.57.55 0 1 .45 1 1V20c0 .55-.45 1-1 1-9.39 0-17-7.61-17-17 0-.55.45-1 1-1h3.5c.55 0 1 .45 1 1 0 1.25.2 2.45.57 3.57.11.35.03.74-.25 1.02z"}),"Phone")},5403:function(e,n,t){var r=t(64836);n.Z=void 0;var a=r(t(45649)),i=t(80184);n.Z=(0,a.default)((0,i.jsx)("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14"}),"Search")},65661:function(e,n,t){var r=t(87462),a=t(63366),i=t(72791),o=t(28182),s=t(94419),l=t(4567),d=t(66934),c=t(31402),u=t(17673),h=t(85090),m=t(80184),p=["className","id"],x=(0,d.ZP)(l.Z,{name:"MuiDialogTitle",slot:"Root",overridesResolver:function(e,n){return n.root}})({padding:"16px 24px",flex:"0 0 auto"}),f=i.forwardRef((function(e,n){var t=(0,c.Z)({props:e,name:"MuiDialogTitle"}),l=t.className,d=t.id,f=(0,a.Z)(t,p),Z=t,v=function(e){var n=e.classes;return(0,s.Z)({root:["root"]},u.a,n)}(Z),j=i.useContext(h.Z).titleId,b=void 0===j?d:j;return(0,m.jsx)(x,(0,r.Z)({component:"h2",className:(0,o.Z)(v.root,l),ownerState:Z,ref:n,variant:"h6",id:null!=d?d:b},f))}));n.Z=f}}]);
//# sourceMappingURL=60.ee721f31.chunk.js.map