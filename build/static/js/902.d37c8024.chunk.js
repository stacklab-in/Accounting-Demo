(self.webpackChunk_accounting_billing_stacklab=self.webpackChunk_accounting_billing_stacklab||[]).push([[902],{32869:function(e,t,n){"use strict";n.d(t,{Ds:function(){return r.Ds}});var r=n(58518);n(58764)},95902:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return B}});var r=n(4942),i=n(74165),s=n(15861),a=n(1413),o=n(29439),l=n(72791),u=n(6907),c=n(64554),d=n(89164),f=n(4567),h=n(57088),p=n(30439),x=n(71715),v=n(82626),Z=n(93006),m=n(63466),g=n(73590),y=n(61889),j=n(68096),b=n(50168),C=n(58406),S=n(47071),$=n(5574),T=n(65661),k=n(39157),w=n(97123),D=n(26759),E=n(42419),P=n(5403),O=n(18406),R=n(99615),A=n(52073),V=n(32869),I=n(43513),U=n(71652),N=n(24750),_=n(51612),M=n(97892),z=n.n(M),L=n(83027),F=n.n(L),H=n(80184);z().extend(F());var Y={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"70%",bgcolor:"background.paper",borderRadius:"10px",boxShadow:24,pl:2,pr:2,pt:2,backgroundColor:O.$_.modalbackground,height:"auto",overflow:"auto"},W={code:"",description:"",type:"PERCENTAGE",typeValue:"",status:""},q={type:!1,typeValue:!1,status:!1};function B(){var e,t,n,M,z=(0,h.K$)(),L=(0,V.Ds)().enqueueSnackbar,F=(0,l.useState)(!1),B=(0,o.Z)(F,2),G=B[0],K=B[1],J=(0,l.useState)(!1),Q=(0,o.Z)(J,2),X=Q[0],ee=Q[1],te=(0,l.useState)([]),ne=(0,o.Z)(te,2),re=ne[0],ie=ne[1],se=(0,l.useState)(W),ae=(0,o.Z)(se,2),oe=ae[0],le=ae[1],ue=(0,l.useState)(q),ce=(0,o.Z)(ue,2),de=ce[0],fe=ce[1],he=(0,l.useState)(!1),pe=(0,o.Z)(he,2),xe=pe[0],ve=pe[1],Ze=(0,l.useState)({}),me=(0,o.Z)(Ze,2),ge=me[0],ye=me[1],je=(0,l.useState)(""),be=(0,o.Z)(je,2),Ce=be[0],Se=be[1],$e=(0,l.useState)(null),Te=(0,o.Z)($e,2),ke=Te[0],we=Te[1],De=Boolean(ke),Ee=(0,l.useState)(!1),Pe=(0,o.Z)(Ee,2),Oe=Pe[0],Re=Pe[1],Ae=function(){return K(!1)},Ve=function(){var e=(0,s.Z)((0,i.Z)().mark((function e(){var t,n,r;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=localStorage.getItem(A._.keyUserToken),n=(0,O.sw)(t),e.next=5,R.ZP.post(R.Hv.offer.list,{},{headers:{Authorization:"Bearer ".concat(n)}});case 5:(r=e.sent)&&(ee(!1),ie(r.data.data)),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),L("Failed to fetch offers!",{variant:"error"}),ee(!1);case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}();(0,l.useEffect)((function(){ee(!0),Ve()}),[]);var Ie=function(e){var t=e.target,n=t.name,i=t.value;le((function(e){return(0,a.Z)((0,a.Z)({},e),{},(0,r.Z)({},n,i))})),"type"!==n&&"status"!==n&&"typeValue"!==n||fe((function(e){return(0,a.Z)((0,a.Z)({},e),{},(0,r.Z)({},n,!1))}))},Ue=function(){var e=(0,s.Z)((0,i.Z)().mark((function e(){var t,n;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(oe.type){e.next=3;break}return fe((function(e){return(0,a.Z)((0,a.Z)({},e),{},{type:!0})})),e.abrupt("return");case 3:if(fe((function(e){return(0,a.Z)((0,a.Z)({},e),{},{type:!1})})),oe.typeValue){e.next=7;break}return fe((function(e){return(0,a.Z)((0,a.Z)({},e),{},{typeValue:!0})})),e.abrupt("return");case 7:fe((function(e){return(0,a.Z)((0,a.Z)({},e),{},{typeValue:!1})})),t=localStorage.getItem(A._.keyUserToken),n=(0,O.sw)(t),R.ZP.post(R.Hv.offer.add,oe,{headers:{Authorization:"Bearer ".concat(n)}}).then((function(e){L("Offer created successfully!",{variant:"success"}),Ae(),fe(q),le(W),Ve()})).catch((function(e){L(e.error||e.msg,{variant:"error"})}));case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Ne=function(){var e=(0,s.Z)((0,i.Z)().mark((function e(){var t,n;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(oe.type){e.next=3;break}return fe((function(e){return(0,a.Z)((0,a.Z)({},e),{},{type:!0})})),e.abrupt("return");case 3:if(fe((function(e){return(0,a.Z)((0,a.Z)({},e),{},{type:!1})})),oe.status){e.next=7;break}return fe((function(e){return(0,a.Z)((0,a.Z)({},e),{},{status:!0})})),e.abrupt("return");case 7:fe((function(e){return(0,a.Z)((0,a.Z)({},e),{},{status:!1})})),t=localStorage.getItem(A._.keyUserToken),n=(0,O.sw)(t),R.ZP.post(R.Hv.offer.update,oe,{headers:{Authorization:"Bearer ".concat(n)}}).then((function(e){L("Offer updated successfully!",{variant:"success"}),Ae(),fe(q),le(W),Ve()})).catch((function(e){L(e.error||e.msg,{variant:"error"})}));case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),_e=[{name:"Offer Code",selector:function(e){return e.code},sortable:!0},{name:"Offer Type",selector:function(e){return e.type},sortable:!0},{name:"Status",selector:function(e){return e.status},sortable:!0},{name:"Created On",selector:function(e){return(0,O.p6)(e.createdAt)},sortable:!0},{name:"Actions",width:"20%",cell:function(e){return(0,H.jsxs)(H.Fragment,{children:[(0,H.jsx)(p.Z,{onClick:function(t){we(t.currentTarget),ye(e)},style:{color:O.$_.actionButton},variant:"outlined",endIcon:(0,H.jsx)(D.Z,{}),children:"Action"}),(0,H.jsxs)(x.Z,{id:"basic-menu",anchorEl:ke,open:De,onClose:function(){we(null),ye({})},MenuListProps:{"aria-labelledby":"basic-button"},children:[(0,H.jsx)(v.Z,{onClick:function(){return function(){ve(!0),we(null);var e={id:ge._id,code:ge.code,status:ge.status,typeValue:ge.typeValue,type:ge.type,description:ge.description};le(e),K(!0)}()},children:"Edit Details"}),(0,H.jsx)(v.Z,{onClick:function(){return le((function(e){return(0,a.Z)((0,a.Z)({},e),{},{id:ge._id})})),Re(!0),void we(null)},children:"Remove"})]})]})}}],Me=re.filter((function(e){var t;return null===e||void 0===e||null===(t=e.code)||void 0===t?void 0:t.toLowerCase().includes(null===Ce||void 0===Ce?void 0:Ce.toLowerCase())}));return(0,H.jsxs)(d.Z,{maxWidth:!z.themeStretch&&"xl",children:[(0,H.jsx)(u.ql,{children:(0,H.jsx)("title",{children:" Dashboard : Offers"})}),(0,H.jsx)(f.Z,{variant:"h4",children:" Offer Management "}),(0,H.jsx)("div",{style:{display:"flex",justifyContent:"flex-end"},children:(0,H.jsx)(p.Z,{startIcon:(0,H.jsx)(E.Z,{}),variant:"contained",color:"primary",onClick:function(){var e=(0,O.bj)();le((function(t){return(0,a.Z)((0,a.Z)({},t),{},{code:e})})),K(!0),ve(!1)},children:"ADD OFFER"})}),(0,H.jsxs)("div",{style:{display:"flex",justifyContent:"flex-start",alignItems:"center",marginTop:"10px",gap:"10px",padding:"10px",backgroundColor:"#E6F2FF",borderRadius:"10px"},children:[(0,H.jsxs)("div",{style:{display:"flex",flexDirection:"column",justifyContent:"space-between",width:"auto",borderRadius:"8px",height:"100px",backgroundColor:"white",padding:"15px"},children:[(0,H.jsx)("div",{children:(0,H.jsx)(f.Z,{variant:"subtitle1",children:"Total number of offers "})}),(0,H.jsx)("div",{children:(0,H.jsx)(f.Z,{sx:{fontSize:24},children:null!==(e=re.length)&&void 0!==e?e:"0"})})]}),(0,H.jsxs)("div",{style:{display:"flex",flexDirection:"column",justifyContent:"space-between",width:"auto",borderRadius:"8px",height:"100px",backgroundColor:"white",padding:"15px"},children:[(0,H.jsx)("div",{children:(0,H.jsx)(f.Z,{variant:"subtitle1",children:"Number of Live offers "})}),(0,H.jsx)("div",{children:(0,H.jsx)(f.Z,{sx:{fontSize:24},children:null!==(t=re.filter((function(e){return"LIVE"===e.status})).length)&&void 0!==t?t:"0"})})]}),(0,H.jsxs)("div",{style:{display:"flex",flexDirection:"column",justifyContent:"space-between",width:"auto",borderRadius:"8px",height:"100px",backgroundColor:"white",padding:"15px"},children:[(0,H.jsx)("div",{children:(0,H.jsx)(f.Z,{variant:"subtitle1",children:"Number of Draft offers"})}),(0,H.jsx)("div",{children:(0,H.jsx)(f.Z,{sx:{fontSize:24},children:null!==(n=re.filter((function(e){return"DRAFT"===e.status})).length)&&void 0!==n?n:"0"})})]}),(0,H.jsxs)("div",{style:{display:"flex",flexDirection:"column",justifyContent:"space-between",width:"auto",borderRadius:"8px",height:"100px",backgroundColor:"white",padding:"15px"},children:[(0,H.jsx)("div",{children:(0,H.jsx)(f.Z,{variant:"subtitle1",children:"Number of Past offers"})}),(0,H.jsx)("div",{children:(0,H.jsx)(f.Z,{sx:{fontSize:24},children:null!==(M=re.filter((function(e){return"PAST"===e.status})).length)&&void 0!==M?M:"0"})})]})]}),(0,H.jsx)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginTop:"20px"},children:(0,H.jsxs)("div",{style:{display:"flex",flexDirection:"row",alignItems:"center",gap:"10px"},children:[(0,H.jsx)(Z.Z,{placeholder:"Search by offer code",size:"small",value:Ce,onChange:function(e){return Se(e.target.value)},InputProps:{startAdornment:(0,H.jsx)(m.Z,{position:"start",children:(0,H.jsx)(P.Z,{})})}}),(0,H.jsx)(U._,{dateAdapter:N.y,children:(0,H.jsx)(_.n,{size:"small",label:"Date Range"})})]})}),(0,H.jsx)(g.Z,{open:G,"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:(0,H.jsxs)(c.Z,{sx:Y,children:[(0,H.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"10px"},children:[(0,H.jsx)(f.Z,{id:"modal-modal-title",variant:"h4",component:"h2",children:"Create New Offer"}),(0,H.jsx)("div",{style:{padding:"10px",backgroundColor:"white",borderRadius:"10px"},children:(0,H.jsxs)(y.ZP,{container:!0,spacing:2,children:[(0,H.jsx)(y.ZP,{item:!0,xs:6,children:(0,H.jsx)(Z.Z,{label:"Offer Code",name:"offercode",value:oe.code,disabled:!0,fullWidth:!0,required:!0})}),(0,H.jsx)(y.ZP,{item:!0,xs:6,children:(0,H.jsxs)(j.Z,{fullWidth:!0,children:[(0,H.jsx)(b.Z,{id:"demo-simple-select-label",children:"Offer Percentage Type"}),(0,H.jsxs)(C.Z,{labelId:"demo-simple-select-label",id:"demo-simple-select",value:oe.type,label:"Offer Percentage Type",name:"type",onChange:Ie,error:de.type,required:!0,children:[(0,H.jsx)(v.Z,{value:"PERCENTAGE",children:"Percentage Discount"}),(0,H.jsx)(v.Z,{value:"VALUE",children:"Value Discount"})]}),de.type&&(0,H.jsx)(S.Z,{sx:{color:"red"},children:"Please Select Offer Type"})]})}),(0,H.jsx)(y.ZP,{item:!0,xs:xe?6:12,children:(0,H.jsx)(Z.Z,{label:"PERCENTAGE"===oe.type?"Percentage":"Value",placeholder:"PERCENTAGE"===oe.type?"ENTER PERCENTAGE":"ENTER VALUE",name:"typeValue",type:"number",onChange:Ie,value:oe.typeValue,fullWidth:!0,error:de.typeValue,helperText:de.typeValue?"Enter ".concat("PERCENTAGE"===oe.type?"percentage":"value"):null,required:!0})}),xe&&(0,H.jsx)(y.ZP,{item:!0,xs:xe?6:4,children:(0,H.jsxs)(j.Z,{fullWidth:!0,children:[(0,H.jsx)(b.Z,{id:"demo-simple-select-label",children:"Offer Status"}),(0,H.jsxs)(C.Z,{labelId:"demo-simple-select-label",id:"demo-simple-select",value:oe.status,label:"Offer Status",name:"status",onChange:Ie,error:de.status,required:!0,children:[(0,H.jsx)(v.Z,{value:"DRAFT",children:"Draft"}),(0,H.jsx)(v.Z,{value:"LIVE",children:"Live"}),(0,H.jsx)(v.Z,{value:"PAST",children:"Past"})]}),de.status&&(0,H.jsx)(S.Z,{sx:{color:"red"},children:"Please Select Offer Status"})]})}),(0,H.jsx)(y.ZP,{item:!0,xs:12,children:(0,H.jsx)(Z.Z,{label:"Description",multiline:!0,rows:3,type:"text",name:"description",value:oe.description,onChange:Ie,fullWidth:!0})})]})})]}),(0,H.jsxs)("div",{style:{display:"flex",flexDirection:"row",gap:"10px",justifyContent:"flex-end",padding:"10px"},children:[(0,H.jsx)(p.Z,{variant:"contained",onClick:xe?Ne:Ue,color:"primary",children:xe?"Update":"Save"}),(0,H.jsx)(p.Z,{variant:"outlined",onClick:function(){xe&&(le(W),ve(!1)),K(!1),ye({})},children:"Cancel"})]})]})}),(0,H.jsx)("div",{style:{marginTop:"20px"},children:(0,H.jsx)(I.ZP,{columns:_e,data:Me,pagination:!0,progressPending:X})}),(0,H.jsxs)($.Z,{open:Oe,onClose:function(){return Re(!1)},children:[(0,H.jsx)(T.Z,{children:"Remove Offer"}),(0,H.jsx)(k.Z,{children:"Are you sure you want to delete this offer?"}),(0,H.jsxs)(w.Z,{children:[(0,H.jsx)(p.Z,{onClick:function(){return Re(!1)},children:"Cancel"}),(0,H.jsx)(p.Z,{onClick:function(){var e=localStorage.getItem(A._.keyUserToken),t=(0,O.sw)(e),n={headers:{Authorization:"Bearer ".concat(t)}};R.ZP.post(R.Hv.offer.delete,{id:oe.id},n).then((function(e){e&&(L("Offer deleted successfully!",{variant:"success"}),Re(!1),le(W),fe(q),Ve())})).catch((function(e){L(e.msg||e.error,{variant:"error"})}))},variant:"contained",color:"error",children:"Delete"})]})]})]})}},65661:function(e,t,n){"use strict";var r=n(87462),i=n(63366),s=n(72791),a=n(28182),o=n(94419),l=n(4567),u=n(66934),c=n(31402),d=n(17673),f=n(85090),h=n(80184),p=["className","id"],x=(0,u.ZP)(l.Z,{name:"MuiDialogTitle",slot:"Root",overridesResolver:function(e,t){return t.root}})({padding:"16px 24px",flex:"0 0 auto"}),v=s.forwardRef((function(e,t){var n=(0,c.Z)({props:e,name:"MuiDialogTitle"}),l=n.className,u=n.id,v=(0,i.Z)(n,p),Z=n,m=function(e){var t=e.classes;return(0,o.Z)({root:["root"]},d.a,t)}(Z),g=s.useContext(f.Z).titleId,y=void 0===g?u:g;return(0,h.jsx)(x,(0,r.Z)({component:"h2",className:(0,a.Z)(m.root,l),ownerState:Z,ref:t,variant:"h6",id:null!=u?u:y},v))}));t.Z=v},83027:function(e){e.exports=function(){"use strict";var e="minute",t=/[+-]\d\d(?::?\d\d)?/g,n=/([+-]|\d\d)/g;return function(r,i,s){var a=i.prototype;s.utc=function(e){return new i({date:e,utc:!0,args:arguments})},a.utc=function(t){var n=s(this.toDate(),{locale:this.$L,utc:!0});return t?n.add(this.utcOffset(),e):n},a.local=function(){return s(this.toDate(),{locale:this.$L,utc:!1})};var o=a.parse;a.parse=function(e){e.utc&&(this.$u=!0),this.$utils().u(e.$offset)||(this.$offset=e.$offset),o.call(this,e)};var l=a.init;a.init=function(){if(this.$u){var e=this.$d;this.$y=e.getUTCFullYear(),this.$M=e.getUTCMonth(),this.$D=e.getUTCDate(),this.$W=e.getUTCDay(),this.$H=e.getUTCHours(),this.$m=e.getUTCMinutes(),this.$s=e.getUTCSeconds(),this.$ms=e.getUTCMilliseconds()}else l.call(this)};var u=a.utcOffset;a.utcOffset=function(r,i){var s=this.$utils().u;if(s(r))return this.$u?0:s(this.$offset)?u.call(this):this.$offset;if("string"==typeof r&&(r=function(e){void 0===e&&(e="");var r=e.match(t);if(!r)return null;var i=(""+r[0]).match(n)||["-",0,0],s=i[0],a=60*+i[1]+ +i[2];return 0===a?0:"+"===s?a:-a}(r),null===r))return this;var a=Math.abs(r)<=16?60*r:r,o=this;if(i)return o.$offset=a,o.$u=0===r,o;if(0!==r){var l=this.$u?this.toDate().getTimezoneOffset():-1*this.utcOffset();(o=this.local().add(a+l,e)).$offset=a,o.$x.$localOffset=l}else o=this.utc();return o};var c=a.format;a.format=function(e){var t=e||(this.$u?"YYYY-MM-DDTHH:mm:ss[Z]":"");return c.call(this,t)},a.valueOf=function(){var e=this.$utils().u(this.$offset)?0:this.$offset+(this.$x.$localOffset||this.$d.getTimezoneOffset());return this.$d.valueOf()-6e4*e},a.isUTC=function(){return!!this.$u},a.toISOString=function(){return this.toDate().toISOString()},a.toString=function(){return this.toDate().toUTCString()};var d=a.toDate;a.toDate=function(e){return"s"===e&&this.$offset?s(this.format("YYYY-MM-DD HH:mm:ss:SSS")).toDate():d.call(this)};var f=a.diff;a.diff=function(e,t,n){if(e&&this.$u===e.$u)return f.call(this,e,t,n);var r=this.local(),i=s(e).local();return f.call(r,i,t,n)}}}()}}]);
//# sourceMappingURL=902.d37c8024.chunk.js.map