"use strict";(self.webpackChunk_accounting_billing_stacklab=self.webpackChunk_accounting_billing_stacklab||[]).push([[962],{32869:function(e,n,t){t.d(n,{Ds:function(){return r.Ds}});var r=t(58518);t(58764)},94962:function(e,n,t){t.r(n),t.d(n,{default:function(){return T}});var r=t(6907),a=t(1413),o=t(74165),i=t(15861),l=t(29439),s=t(72791),u=t(89164),c=t(4567),d=t(57088),v=t(43513),f=t(30439),p=t(71715),h=t(82626),m=t(48550),x=t(63466),Z=t(64554),j=t(5403),y=t(26759),g=t(99615),b=t(52073),S=t(32869),C=t(18406),k=t(24750),w=t(97892),D=t.n(w),P=t(71652),I=t(23937),M=t(8976),A=t(80184);function N(){var e=(0,d.K$)(),n=(0,S.Ds)().enqueueSnackbar,t=(0,s.useState)(""),r=(0,l.Z)(t,2),w=r[0],N=r[1],T=(0,s.useState)([]),L=(0,l.Z)(T,2),_=L[0],Y=L[1],E=(0,s.useState)(!1),F=(0,l.Z)(E,2),z=F[0],B=F[1],O=(0,s.useState)((function(){return[D()("2022-04-17"),D()("2022-04-21")]})),R=(0,l.Z)(O,2),U=(R[0],R[1],(0,M.E)().user),q=(0,s.useState)([]),V=(0,l.Z)(q,2),W=V[0],$=V[1],G=(0,s.useState)(null),H=(0,l.Z)(G,2),K=H[0],J=H[1],Q=Boolean(K),X=(0,s.useState)({}),ee=(0,l.Z)(X,2),ne=(ee[0],ee[1]),te=(0,s.useState)(!1),re=(0,l.Z)(te,2),ae=(re[0],re[1],function(){var e=(0,i.Z)((0,o.Z)().mark((function e(){var t,r,a;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=localStorage.getItem(b._.keyUserToken),r=(0,C.sw)(t),e.next=5,g.ZP.post(g.Hv.receipt.list,{},{headers:{Authorization:"Bearer ".concat(r)}});case 5:(a=e.sent)&&(B(!1),console.log(a.data.data),$(a.data.data),Y(a.data.data)),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),n("Failed to fetch records!",{variant:"error"}),B(!1);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}());(0,s.useEffect)((function(){B(!0),ae()}),[]);var oe=[{name:"User Name",selector:function(e){return"CUSTOMER"===e.partyType||"VENDOR"===e.partyType?e.userName||"N/A":e.category||"N/A"},sortable:!0},{name:"Invoice Number",selector:function(e){return null===e||void 0===e?void 0:e.invoiceNumber},sortable:!0},{name:"Amount Paid",selector:function(e){var n;return null===e||void 0===e||null===(n=e.amount)||void 0===n?void 0:n.toFixed(2)},sortable:!0},{name:"Payment Mode",selector:function(e){var n;return null===e||void 0===e||null===(n=e.paymentId)||void 0===n?void 0:n.paymentMode},sortable:!0},{name:"Payment Status",selector:function(e){var n;return null===e||void 0===e||null===(n=e.paymentId)||void 0===n?void 0:n.paymentStatus},sortable:!0},{name:"Party Type",selector:function(e){return null===e||void 0===e?void 0:e.partyType},sortable:!0},{name:"Payment Date",selector:function(e){return new Date((null===e||void 0===e?void 0:e.createdAt)||null).toLocaleDateString("en-GB",{day:"2-digit",month:"long",year:"numeric"})},sortable:!0},{name:"Actions",width:"130px",cell:function(e){var n,t;return(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)(f.Z,{disabled:!(null!==U&&void 0!==U&&null!==(n=U.permissions)&&void 0!==n&&null!==(t=n.receipt)&&void 0!==t&&t.u),onClick:function(n){J(n.currentTarget),ne(e)},style:{color:C.$_.actionButton},variant:"outlined",endIcon:(0,A.jsx)(y.Z,{}),children:"Action"}),(0,A.jsxs)(p.Z,{id:"basic-menu",anchorEl:K,open:Q,onClose:function(){J(null),ne({})},MenuListProps:{"aria-labelledby":"basic-button"},children:[(0,A.jsx)(h.Z,{onClick:function(){},children:"View"}),(0,A.jsx)(h.Z,{onClick:function(){},children:"Print"}),(0,A.jsx)(h.Z,{onClick:function(){},children:"Share via Whatsapp"}),(0,A.jsx)(h.Z,{onClick:function(){},children:"Share via Email"}),(0,A.jsx)(h.Z,{onClick:function(){},children:"Delete"})]})]})}}],ie=W.filter((function(e){var n,t,r,a=null===e||void 0===e||null===(n=e.invoiceNumber)||void 0===n?void 0:n.toLowerCase().includes(null===w||void 0===w?void 0:w.toLowerCase()),o=null===e||void 0===e||null===(t=e.userName)||void 0===t?void 0:t.toLowerCase().includes(null===w||void 0===w?void 0:w.toLowerCase()),i=null===e||void 0===e||null===(r=e.category)||void 0===r?void 0:r.toLowerCase().includes(null===w||void 0===w?void 0:w.toLowerCase());return a||o||i})),le=(0,s.useState)(D()().startOf("month")),se=(0,l.Z)(le,2),ue=se[0],ce=se[1],de=(0,s.useState)(D()().endOf("month")),ve=(0,l.Z)(de,2),fe=ve[0],pe=ve[1];return(0,s.useEffect)((function(){if(ue&&fe){var e=_.filter((function(e){var n=D()(e.createdAt);return console.log(ue,fe),n.isBetween(ue,fe,null,"[]")}));$(e)}else $(_)}),[ue,fe]),(0,A.jsxs)(u.Z,{maxWidth:!e.themeStretch&&"xl",children:[(0,A.jsx)(c.Z,{variant:"h4",children:" Receipts "}),(0,A.jsxs)("div",{style:{display:"flex",justifyContent:"start",alignItems:"center",marginTop:"20px",gap:"10px"},children:[(0,A.jsx)(m.Z,{size:"small",onChange:function(e){return N(e.target.value)},type:"text",placeholder:"Search by Inv/Name",InputProps:{startAdornment:(0,A.jsx)(x.Z,{position:"start",children:(0,A.jsx)(j.Z,{})})}}),(0,A.jsx)("div",{children:(0,A.jsx)(P._,{dateAdapter:k.y,children:(0,A.jsxs)(Z.Z,{sx:{display:"flex",flexDirection:"row",gap:"10px",alignItems:"center"},children:[(0,A.jsx)(I.M,{label:"From",format:"DD/MM/YYYY",value:ue,slotProps:{textField:{size:"small"}},onChange:function(e){ce(e)},renderInput:function(e){return(0,A.jsx)(m.Z,(0,a.Z)({},e))}}),(0,A.jsx)(c.Z,{children:"-"}),(0,A.jsx)(I.M,{label:"To",format:"DD/MM/YYYY",value:fe,slotProps:{textField:{size:"small"}},onChange:function(e){pe(e)},renderInput:function(e){return(0,A.jsx)(m.Z,(0,a.Z)({},e))}})]})})})]}),(0,A.jsx)("div",{style:{marginTop:"20px"},children:(0,A.jsx)(v.ZP,{columns:oe,data:ie,pagination:!0,progressPending:z})})]})}function T(){return(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)(r.ql,{children:(0,A.jsx)("title",{children:" Dashboard: Receipts"})}),(0,A.jsx)(N,{})]})}},5403:function(e,n,t){var r=t(64836);n.Z=void 0;var a=r(t(45649)),o=t(80184);n.Z=(0,a.default)((0,o.jsx)("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14"}),"Search")}}]);
//# sourceMappingURL=962.33e61ea5.chunk.js.map